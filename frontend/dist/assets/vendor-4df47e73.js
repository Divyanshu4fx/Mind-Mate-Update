import{r as vt}from"./react-vendor-628b8af5.js";function Wr(r){let t;const i=new Set,e=(a,v)=>{const d=typeof a=="function"?a(t):a;if(d!==t){const p=t;t=v?d:Object.assign({},t,d),i.forEach(b=>b(t,p))}},s=()=>t,n=(a,v=s,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=v(t);function b(){const V=v(t);if(!d(p,V)){const z=p;a(p=V,z)}}return i.add(b),()=>i.delete(b)},o={setState:e,getState:s,subscribe:(a,v,d)=>v||d?n(a,v,d):(i.add(a),()=>i.delete(a)),destroy:()=>i.clear()};return t=r(e,s,o),o}const Kr=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),fr=Kr?vt.useEffect:vt.useLayoutEffect;function As(r){const t=typeof r=="function"?Wr(r):r,i=(e=t.getState,s=Object.is)=>{const[,n]=vt.useReducer(Z=>Z+1,0),h=t.getState(),f=vt.useRef(h),o=vt.useRef(e),a=vt.useRef(s),v=vt.useRef(!1),d=vt.useRef();d.current===void 0&&(d.current=e(h));let p,b=!1;(f.current!==h||o.current!==e||a.current!==s||v.current)&&(p=e(h),b=!s(d.current,p)),fr(()=>{b&&(d.current=p),f.current=h,o.current=e,a.current=s,v.current=!1});const V=vt.useRef(h);fr(()=>{const Z=()=>{try{const K=t.getState(),$=o.current(K);a.current(d.current,$)||(f.current=K,d.current=$,n())}catch{v.current=!0,n()}},q=t.subscribe(Z);return t.getState()!==V.current&&Z(),q},[]);const z=b?p:d.current;return vt.useDebugValue(z),z};return Object.assign(i,t),i[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const e=[i,t];return{next(){const s=e.length<=0;return{value:e.shift(),done:s}}}},i}var _r={},jr={get exports(){return _r},set exports(r){_r=r}},Ur={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function t(C,_){var m=C.length;C.push(_);t:for(;0<m;){var l=m-1>>>1,g=C[l];if(0<s(g,_))C[l]=_,C[m]=g,m=l;else break t}}function i(C){return C.length===0?null:C[0]}function e(C){if(C.length===0)return null;var _=C[0],m=C.pop();if(m!==_){C[0]=m;t:for(var l=0,g=C.length,F=g>>>1;l<F;){var w=2*(l+1)-1,y=C[w],L=w+1,E=C[L];if(0>s(y,m))L<g&&0>s(E,y)?(C[l]=E,C[L]=m,l=L):(C[l]=y,C[w]=m,l=w);else if(L<g&&0>s(E,m))C[l]=E,C[L]=m,l=L;else break t}}return _}function s(C,_){var m=C.sortIndex-_.sortIndex;return m!==0?m:C.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var n=performance;r.unstable_now=function(){return n.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var o=[],a=[],v=1,d=null,p=3,b=!1,V=!1,z=!1,Z=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(C){for(var _=i(a);_!==null;){if(_.callback===null)e(a);else if(_.startTime<=C)e(a),_.sortIndex=_.expirationTime,t(o,_);else break;_=i(a)}}function c(C){if(z=!1,$(C),!V)if(i(o)!==null)V=!0,Et(x);else{var _=i(a);_!==null&&Bt(c,_.startTime-C)}}function x(C,_){V=!1,z&&(z=!1,q(A),A=-1),b=!0;var m=p;try{for($(_),d=i(o);d!==null&&(!(d.expirationTime>_)||C&&!lt());){var l=d.callback;if(typeof l=="function"){d.callback=null,p=d.priorityLevel;var g=l(d.expirationTime<=_);_=r.unstable_now(),typeof g=="function"?d.callback=g:d===i(o)&&e(o),$(_)}else e(o);d=i(o)}if(d!==null)var F=!0;else{var w=i(a);w!==null&&Bt(c,w.startTime-_),F=!1}return F}finally{d=null,p=m,b=!1}}var R=!1,U=null,A=-1,M=5,et=-1;function lt(){return!(r.unstable_now()-et<M)}function gt(){if(U!==null){var C=r.unstable_now();et=C;var _=!0;try{_=U(!0,C)}finally{_?ht():(R=!1,U=null)}}else R=!1}var ht;if(typeof K=="function")ht=function(){K(gt)};else if(typeof MessageChannel<"u"){var yt=new MessageChannel,Ut=yt.port2;yt.port1.onmessage=gt,ht=function(){Ut.postMessage(null)}}else ht=function(){Z(gt,0)};function Et(C){U=C,R||(R=!0,ht())}function Bt(C,_){A=Z(function(){C(r.unstable_now())},_)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(C){C.callback=null},r.unstable_continueExecution=function(){V||b||(V=!0,Et(x))},r.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<C?Math.floor(1e3/C):5},r.unstable_getCurrentPriorityLevel=function(){return p},r.unstable_getFirstCallbackNode=function(){return i(o)},r.unstable_next=function(C){switch(p){case 1:case 2:case 3:var _=3;break;default:_=p}var m=p;p=_;try{return C()}finally{p=m}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(C,_){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var m=p;p=C;try{return _()}finally{p=m}},r.unstable_scheduleCallback=function(C,_,m){var l=r.unstable_now();switch(typeof m=="object"&&m!==null?(m=m.delay,m=typeof m=="number"&&0<m?l+m:l):m=l,C){case 1:var g=-1;break;case 2:g=250;break;case 5:g=1073741823;break;case 4:g=1e4;break;default:g=5e3}return g=m+g,C={id:v++,callback:_,priorityLevel:C,startTime:m,expirationTime:g,sortIndex:-1},m>l?(C.sortIndex=m,t(a,C),i(o)===null&&C===i(a)&&(z?(q(A),A=-1):z=!0,Bt(c,m-l))):(C.sortIndex=g,t(o,C),V||b||(V=!0,Et(x))),C},r.unstable_shouldYield=lt,r.unstable_wrapCallback=function(C){var _=p;return function(){var m=p;p=_;try{return C.apply(this,arguments)}finally{p=m}}}})(Ur);(function(r){r.exports=Ur})(jr);function Fi(r,t,i){var e,s,n,h,f;t==null&&(t=100);function o(){var v=Date.now()-h;v<t&&v>=0?e=setTimeout(o,t-v):(e=null,i||(f=r.apply(n,s),n=s=null))}var a=function(){n=this,s=arguments,h=Date.now();var v=i&&!e;return e||(e=setTimeout(o,t)),v&&(f=r.apply(n,s),n=s=null),f};return a.clear=function(){e&&(clearTimeout(e),e=null)},a.flush=function(){e&&(f=r.apply(n,s),n=s=null,clearTimeout(e),e=null)},a}Fi.debounce=Fi;var Ps=Fi,Qr=Object.defineProperty,Jr=Object.defineProperties,qr=Object.getOwnPropertyDescriptors,dr=Object.getOwnPropertySymbols,$r=Object.prototype.hasOwnProperty,ts=Object.prototype.propertyIsEnumerable,mr=(r,t,i)=>t in r?Qr(r,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[t]=i,pr=(r,t)=>{for(var i in t||(t={}))$r.call(t,i)&&mr(r,i,t[i]);if(dr)for(var i of dr(t))ts.call(t,i)&&mr(r,i,t[i]);return r},es=(r,t)=>Jr(r,qr(t));function Ar(r,t,i){if(!r)return;if(i(r)===!0)return r;let e=t?r.return:r.child;for(;e;){const s=Ar(e,t,i);if(s)return s;e=t?null:e.sibling}}function Pr(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const Bi=Pr(vt.createContext(null));class is extends vt.Component{render(){return vt.createElement(Bi.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:vr,ReactCurrentDispatcher:gr}=vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function rs(){const r=vt.useContext(Bi);if(r===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=vt.useId();return vt.useMemo(()=>{for(const e of[vr==null?void 0:vr.current,r,r==null?void 0:r.alternate]){if(!e)continue;const s=Ar(e,!1,n=>{let h=n.memoizedState;for(;h;){if(h.memoizedState===t)return!0;h=h.next}});if(s)return s}},[r,t])}function ss(){var r,t;const i=rs(),[e]=vt.useState(()=>new Map);e.clear();let s=i;for(;s;){const n=(r=s.type)==null?void 0:r._context;n&&n!==Bi&&!e.has(n)&&e.set(n,(t=gr==null?void 0:gr.current)==null?void 0:t.readContext(Pr(n))),s=s.return}return e}function xs(){const r=ss();return vt.useMemo(()=>Array.from(r.keys()).reduce((t,i)=>e=>vt.createElement(t,null,vt.createElement(i.Provider,es(pr({},e),{value:r.get(i)}))),t=>vt.createElement(is,pr({},t))),[r])}var xt=Uint8Array,Kt=Uint16Array,Si=Uint32Array,xr=new xt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Mr=new xt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ns=new xt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Rr=function(r,t){for(var i=new Kt(31),e=0;e<31;++e)i[e]=t+=1<<r[e-1];for(var s=new Si(i[30]),e=1;e<30;++e)for(var n=i[e];n<i[e+1];++n)s[n]=n-i[e]<<5|e;return[i,s]},Fr=Rr(xr,2),Sr=Fr[0],os=Fr[1];Sr[28]=258,os[258]=28;var as=Rr(Mr,0),ls=as[0],zi=new Kt(32768);for(var _t=0;_t<32768;++_t){var Xt=(_t&43690)>>>1|(_t&21845)<<1;Xt=(Xt&52428)>>>2|(Xt&13107)<<2,Xt=(Xt&61680)>>>4|(Xt&3855)<<4,zi[_t]=((Xt&65280)>>>8|(Xt&255)<<8)>>>1}var Le=function(r,t,i){for(var e=r.length,s=0,n=new Kt(t);s<e;++s)++n[r[s]-1];var h=new Kt(t);for(s=0;s<t;++s)h[s]=h[s-1]+n[s-1]<<1;var f;if(i){f=new Kt(1<<t);var o=15-t;for(s=0;s<e;++s)if(r[s])for(var a=s<<4|r[s],v=t-r[s],d=h[r[s]-1]++<<v,p=d|(1<<v)-1;d<=p;++d)f[zi[d]>>>o]=a}else for(f=new Kt(e),s=0;s<e;++s)r[s]&&(f[s]=zi[h[r[s]-1]++]>>>15-r[s]);return f},Ae=new xt(288);for(var _t=0;_t<144;++_t)Ae[_t]=8;for(var _t=144;_t<256;++_t)Ae[_t]=9;for(var _t=256;_t<280;++_t)Ae[_t]=7;for(var _t=280;_t<288;++_t)Ae[_t]=8;var zr=new xt(32);for(var _t=0;_t<32;++_t)zr[_t]=5;var hs=Le(Ae,9,1),cs=Le(zr,5,1),Ci=function(r){for(var t=r[0],i=1;i<r.length;++i)r[i]>t&&(t=r[i]);return t},Ft=function(r,t,i){var e=t/8|0;return(r[e]|r[e+1]<<8)>>(t&7)&i},Li=function(r,t){var i=t/8|0;return(r[i]|r[i+1]<<8|r[i+2]<<16)>>(t&7)},us=function(r){return(r/8|0)+(r&7&&1)},fs=function(r,t,i){(t==null||t<0)&&(t=0),(i==null||i>r.length)&&(i=r.length);var e=new(r instanceof Kt?Kt:r instanceof Si?Si:xt)(i-t);return e.set(r.subarray(t,i)),e},_s=function(r,t,i){var e=r.length;if(!e||i&&!i.l&&e<5)return t||new xt(0);var s=!t||i,n=!i||i.i;i||(i={}),t||(t=new xt(e*3));var h=function(L){var E=t.length;if(L>E){var D=new xt(Math.max(E*2,L));D.set(t),t=D}},f=i.f||0,o=i.p||0,a=i.b||0,v=i.l,d=i.d,p=i.m,b=i.n,V=e*8;do{if(!v){i.f=f=Ft(r,o,1);var z=Ft(r,o+1,3);if(o+=3,z)if(z==1)v=hs,d=cs,p=9,b=5;else if(z==2){var $=Ft(r,o,31)+257,c=Ft(r,o+10,15)+4,x=$+Ft(r,o+5,31)+1;o+=14;for(var R=new xt(x),U=new xt(19),A=0;A<c;++A)U[ns[A]]=Ft(r,o+A*3,7);o+=c*3;for(var M=Ci(U),et=(1<<M)-1,lt=Le(U,M,1),A=0;A<x;){var gt=lt[Ft(r,o,et)];o+=gt&15;var Z=gt>>>4;if(Z<16)R[A++]=Z;else{var ht=0,yt=0;for(Z==16?(yt=3+Ft(r,o,3),o+=2,ht=R[A-1]):Z==17?(yt=3+Ft(r,o,7),o+=3):Z==18&&(yt=11+Ft(r,o,127),o+=7);yt--;)R[A++]=ht}}var Ut=R.subarray(0,$),Et=R.subarray($);p=Ci(Ut),b=Ci(Et),v=Le(Ut,p,1),d=Le(Et,b,1)}else throw"invalid block type";else{var Z=us(o)+4,q=r[Z-4]|r[Z-3]<<8,K=Z+q;if(K>e){if(n)throw"unexpected EOF";break}s&&h(a+q),t.set(r.subarray(Z,K),a),i.b=a+=q,i.p=o=K*8;continue}if(o>V){if(n)throw"unexpected EOF";break}}s&&h(a+131072);for(var Bt=(1<<p)-1,C=(1<<b)-1,_=o;;_=o){var ht=v[Li(r,o)&Bt],m=ht>>>4;if(o+=ht&15,o>V){if(n)throw"unexpected EOF";break}if(!ht)throw"invalid length/literal";if(m<256)t[a++]=m;else if(m==256){_=o,v=null;break}else{var l=m-254;if(m>264){var A=m-257,g=xr[A];l=Ft(r,o,(1<<g)-1)+Sr[A],o+=g}var F=d[Li(r,o)&C],w=F>>>4;if(!F)throw"invalid distance";o+=F&15;var Et=ls[w];if(w>3){var g=Mr[w];Et+=Li(r,o)&(1<<g)-1,o+=g}if(o>V){if(n)throw"unexpected EOF";break}s&&h(a+131072);for(var y=a+l;a<y;a+=4)t[a]=t[a-Et],t[a+1]=t[a+1-Et],t[a+2]=t[a+2-Et],t[a+3]=t[a+3-Et];a=y}}i.l=v,i.p=_,i.b=a,v&&(f=1,i.m=p,i.d=d,i.n=b)}while(!f);return a==t.length?t:fs(t,0,a)},ds=new xt(0),ms=function(r){if((r[0]&15)!=8||r[0]>>>4>7||(r[0]<<8|r[1])%31)throw"invalid zlib data";if(r[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Ms(r,t){return _s((ms(r),r.subarray(2,-4)),t)}var ps=typeof TextDecoder<"u"&&new TextDecoder,vs=0;try{ps.decode(ds,{stream:!0}),vs=1}catch{}function gs(){var r=Object.create(null);function t(s,n){var h=s.id,f=s.name,o=s.dependencies;o===void 0&&(o=[]);var a=s.init;a===void 0&&(a=function(){});var v=s.getTransferables;if(v===void 0&&(v=null),!r[h])try{o=o.map(function(p){return p&&p.isWorkerModule&&(t(p,function(b){if(b instanceof Error)throw b}),p=r[p.id].value),p}),a=e("<"+f+">.init",a),v&&(v=e("<"+f+">.getTransferables",v));var d=null;typeof a=="function"?d=a.apply(void 0,o):console.error("worker module init function failed to rehydrate"),r[h]={id:h,value:d,getTransferables:v},n(d)}catch(p){p&&p.noLog||console.error(p),n(p)}}function i(s,n){var h,f=s.id,o=s.args;(!r[f]||typeof r[f].value!="function")&&n(new Error("Worker module "+f+": not found or its 'init' did not return a function"));try{var a=(h=r[f]).value.apply(h,o);a&&typeof a.then=="function"?a.then(v,function(d){return n(d instanceof Error?d:new Error(""+d))}):v(a)}catch(d){n(d)}function v(d){try{var p=r[f].getTransferables&&r[f].getTransferables(d);(!p||!Array.isArray(p)||!p.length)&&(p=void 0),n(d,p)}catch(b){console.error(b),n(b)}}}function e(s,n){var h=void 0;self.troikaDefine=function(o){return h=o};var f=URL.createObjectURL(new Blob(["/** "+s.replace(/\*/g,"")+` **/

troikaDefine(
`+n+`
)`],{type:"application/javascript"}));try{importScripts(f)}catch(o){console.error(o)}return URL.revokeObjectURL(f),delete self.troikaDefine,h}self.addEventListener("message",function(s){var n=s.data,h=n.messageId,f=n.action,o=n.data;try{f==="registerModule"&&t(o,function(a){a instanceof Error?postMessage({messageId:h,success:!1,error:a.message}):postMessage({messageId:h,success:!0,result:{isCallable:typeof a=="function"}})}),f==="callModule"&&i(o,function(a,v){a instanceof Error?postMessage({messageId:h,success:!1,error:a.message}):postMessage({messageId:h,success:!0,result:a},v||void 0)})}catch(a){postMessage({messageId:h,success:!1,error:a.stack})}})}function Es(r){var t=function(){for(var i=[],e=arguments.length;e--;)i[e]=arguments[e];return t._getInitResult().then(function(s){if(typeof s=="function")return s.apply(void 0,i);throw new Error("Worker module function was called but `init` did not return a callable function")})};return t._getInitResult=function(){var i=r.dependencies,e=r.init;i=Array.isArray(i)?i.map(function(n){return n&&n._getInitResult?n._getInitResult():n}):[];var s=Promise.all(i).then(function(n){return e.apply(null,n)});return t._getInitResult=function(){return s},s},t}var kr=function(){var r=!1;if(typeof window<"u"&&typeof window.document<"u")try{var t=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));t.terminate(),r=!0}catch(i){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+i.message+"]")}return kr=function(){return r},r},ys=0,Ts=0,Di=!1,De=Object.create(null),Ue=Object.create(null),ki=Object.create(null);function Os(r){if((!r||typeof r.init!="function")&&!Di)throw new Error("requires `options.init` function");var t=r.dependencies,i=r.init,e=r.getTransferables,s=r.workerId;if(!kr())return Es(r);s==null&&(s="#default");var n="workerModule"+ ++ys,h=r.name||n,f=null;t=t&&t.map(function(a){return typeof a=="function"&&!a.workerModuleData&&(Di=!0,a=Os({workerId:s,name:"<"+h+"> function dependency: "+a.name,init:`function(){return (
`+$e(a)+`
)}`}),Di=!1),a&&a.workerModuleData&&(a=a.workerModuleData),a});function o(){for(var a=[],v=arguments.length;v--;)a[v]=arguments[v];if(!f){f=Er(s,"registerModule",o.workerModuleData);var d=function(){f=null,Ue[s].delete(d)};(Ue[s]||(Ue[s]=new Set)).add(d)}return f.then(function(p){var b=p.isCallable;if(b)return Er(s,"callModule",{id:n,args:a});throw new Error("Worker module function was called but `init` did not return a callable function")})}return o.workerModuleData={isWorkerModule:!0,id:n,name:h,dependencies:t,init:$e(i),getTransferables:e&&$e(e)},o}function Rs(r){Ue[r]&&Ue[r].forEach(function(t){t()}),De[r]&&(De[r].terminate(),delete De[r])}function $e(r){var t=r.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function ws(r){var t=De[r];if(!t){var i=$e(gs);t=De[r]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+r.replace(/\*/g,"")+` **/

;(`+i+")()"],{type:"application/javascript"}))),t.onmessage=function(e){var s=e.data,n=s.messageId,h=ki[n];if(!h)throw new Error("WorkerModule response with empty or unknown messageId");delete ki[n],h(s)}}return t}function Er(r,t,i){return new Promise(function(e,s){var n=++Ts;ki[n]=function(h){h.success?e(h.result):s(new Error("Error in worker "+t+" call: "+h.error))},ws(r).postMessage({messageId:n,action:t,data:i})})}function Fs(){var r=function(t){function i(_,m,l,g,F,w,y,L){var E=1-y;L.x=E*E*_+2*E*y*l+y*y*F,L.y=E*E*m+2*E*y*g+y*y*w}function e(_,m,l,g,F,w,y,L,E,D){var B=1-E;D.x=B*B*B*_+3*B*B*E*l+3*B*E*E*F+E*E*E*y,D.y=B*B*B*m+3*B*B*E*g+3*B*E*E*w+E*E*E*L}function s(_,m){for(var l=/([MLQCZ])([^MLQCZ]*)/g,g,F,w,y,L;g=l.exec(_);){var E=g[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(D){return parseFloat(D)});switch(g[1]){case"M":y=F=E[0],L=w=E[1];break;case"L":(E[0]!==y||E[1]!==L)&&m("L",y,L,y=E[0],L=E[1]);break;case"Q":{m("Q",y,L,y=E[2],L=E[3],E[0],E[1]);break}case"C":{m("C",y,L,y=E[4],L=E[5],E[0],E[1],E[2],E[3]);break}case"Z":(y!==F||L!==w)&&m("L",y,L,F,w);break}}}function n(_,m,l){l===void 0&&(l=16);var g={x:0,y:0};s(_,function(F,w,y,L,E,D,B,st,nt){switch(F){case"L":m(w,y,L,E);break;case"Q":{for(var P=w,dt=y,Ot=1;Ot<l;Ot++)i(w,y,D,B,L,E,Ot/(l-1),g),m(P,dt,g.x,g.y),P=g.x,dt=g.y;break}case"C":{for(var X=w,J=y,tt=1;tt<l;tt++)e(w,y,D,B,st,nt,L,E,tt/(l-1),g),m(X,J,g.x,g.y),X=g.x,J=g.y;break}}})}var h="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",f="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",o=new WeakMap,a={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function v(_,m){var l=_.getContext?_.getContext("webgl",a):_,g=o.get(l);if(!g){let B=function(X){var J=w[X];if(!J&&(J=w[X]=l.getExtension(X),!J))throw new Error(X+" not supported");return J},st=function(X,J){var tt=l.createShader(J);return l.shaderSource(tt,X),l.compileShader(tt),tt},nt=function(X,J,tt,O){if(!y[X]){var Y={},N={},T=l.createProgram();l.attachShader(T,st(J,l.VERTEX_SHADER)),l.attachShader(T,st(tt,l.FRAGMENT_SHADER)),l.linkProgram(T),y[X]={program:T,transaction:function(k){l.useProgram(T),k({setUniform:function(H,ut){for(var mt=[],Q=arguments.length-2;Q-- >0;)mt[Q]=arguments[Q+2];var ft=N[ut]||(N[ut]=l.getUniformLocation(T,ut));l["uniform"+H].apply(l,[ft].concat(mt))},setAttribute:function(H,ut,mt,Q,ft){var Tt=Y[H];Tt||(Tt=Y[H]={buf:l.createBuffer(),loc:l.getAttribLocation(T,H),data:null}),l.bindBuffer(l.ARRAY_BUFFER,Tt.buf),l.vertexAttribPointer(Tt.loc,ut,l.FLOAT,!1,0,0),l.enableVertexAttribArray(Tt.loc),F?l.vertexAttribDivisor(Tt.loc,Q):B("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(Tt.loc,Q),ft!==Tt.data&&(l.bufferData(l.ARRAY_BUFFER,ft,mt),Tt.data=ft)}})}}}y[X].transaction(O)},P=function(X,J){E++;try{l.activeTexture(l.TEXTURE0+E);var tt=L[X];tt||(tt=L[X]=l.createTexture(),l.bindTexture(l.TEXTURE_2D,tt),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST)),l.bindTexture(l.TEXTURE_2D,tt),J(tt,E)}finally{E--}},dt=function(X,J,tt){var O=l.createFramebuffer();D.push(O),l.bindFramebuffer(l.FRAMEBUFFER,O),l.activeTexture(l.TEXTURE0+J),l.bindTexture(l.TEXTURE_2D,X),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,X,0);try{tt(O)}finally{l.deleteFramebuffer(O),l.bindFramebuffer(l.FRAMEBUFFER,D[--D.length-1]||null)}},Ot=function(){w={},y={},L={},E=-1,D.length=0};var F=typeof WebGL2RenderingContext<"u"&&l instanceof WebGL2RenderingContext,w={},y={},L={},E=-1,D=[];l.canvas.addEventListener("webglcontextlost",function(X){Ot(),X.preventDefault()},!1),o.set(l,g={gl:l,isWebGL2:F,getExtension:B,withProgram:nt,withTexture:P,withTextureFramebuffer:dt,handleContextLoss:Ot})}m(g)}function d(_,m,l,g,F,w,y,L){y===void 0&&(y=15),L===void 0&&(L=null),v(_,function(E){var D=E.gl,B=E.withProgram,st=E.withTexture;st("copy",function(nt,P){D.texImage2D(D.TEXTURE_2D,0,D.RGBA,F,w,0,D.RGBA,D.UNSIGNED_BYTE,m),B("copy",h,f,function(dt){var Ot=dt.setUniform,X=dt.setAttribute;X("aUV",2,D.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Ot("1i","image",P),D.bindFramebuffer(D.FRAMEBUFFER,L||null),D.disable(D.BLEND),D.colorMask(y&8,y&4,y&2,y&1),D.viewport(l,g,F,w),D.scissor(l,g,F,w),D.drawArrays(D.TRIANGLES,0,3)})})})}function p(_,m,l){var g=_.width,F=_.height;v(_,function(w){var y=w.gl,L=new Uint8Array(g*F*4);y.readPixels(0,0,g,F,y.RGBA,y.UNSIGNED_BYTE,L),_.width=m,_.height=l,d(y,L,0,0,g,F)})}var b=Object.freeze({__proto__:null,withWebGLContext:v,renderImageData:d,resizeWebGLCanvasWithoutClearing:p});function V(_,m,l,g,F,w){w===void 0&&(w=1);var y=new Uint8Array(_*m),L=g[2]-g[0],E=g[3]-g[1],D=[];n(l,function(X,J,tt,O){D.push({x1:X,y1:J,x2:tt,y2:O,minX:Math.min(X,tt),minY:Math.min(J,O),maxX:Math.max(X,tt),maxY:Math.max(J,O)})}),D.sort(function(X,J){return X.maxX-J.maxX});for(var B=0;B<_;B++)for(var st=0;st<m;st++){var nt=dt(g[0]+L*(B+.5)/_,g[1]+E*(st+.5)/m),P=Math.pow(1-Math.abs(nt)/F,w)/2;nt<0&&(P=1-P),P=Math.max(0,Math.min(255,Math.round(P*255))),y[st*_+B]=P}return y;function dt(X,J){for(var tt=1/0,O=1/0,Y=D.length;Y--;){var N=D[Y];if(N.maxX+O<=X)break;if(X+O>N.minX&&J-O<N.maxY&&J+O>N.minY){var T=q(X,J,N.x1,N.y1,N.x2,N.y2);T<tt&&(tt=T,O=Math.sqrt(tt))}}return Ot(X,J)&&(O=-O),O}function Ot(X,J){for(var tt=0,O=D.length;O--;){var Y=D[O];if(Y.maxX<=X)break;var N=Y.y1>J!=Y.y2>J&&X<(Y.x2-Y.x1)*(J-Y.y1)/(Y.y2-Y.y1)+Y.x1;N&&(tt+=Y.y1<Y.y2?1:-1)}return tt!==0}}function z(_,m,l,g,F,w,y,L,E,D){w===void 0&&(w=1),L===void 0&&(L=0),E===void 0&&(E=0),D===void 0&&(D=0),Z(_,m,l,g,F,w,y,null,L,E,D)}function Z(_,m,l,g,F,w,y,L,E,D,B){w===void 0&&(w=1),E===void 0&&(E=0),D===void 0&&(D=0),B===void 0&&(B=0);for(var st=V(_,m,l,g,F,w),nt=new Uint8Array(st.length*4),P=0;P<st.length;P++)nt[P*4+B]=st[P];d(y,nt,E,D,_,m,1<<3-B,L)}function q(_,m,l,g,F,w){var y=F-l,L=w-g,E=y*y+L*L,D=E?Math.max(0,Math.min(1,((_-l)*y+(m-g)*L)/E)):0,B=_-(l+D*y),st=m-(g+D*L);return B*B+st*st}var K=Object.freeze({__proto__:null,generate:V,generateIntoCanvas:z,generateIntoFramebuffer:Z}),$="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",c="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",x="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",R=new Float32Array([0,0,2,0,0,2]),U=null,A=!1,M={},et=new WeakMap;function lt(_){if(!A&&!Ut(_))throw new Error("WebGL generation not supported")}function gt(_,m,l,g,F,w,y){if(w===void 0&&(w=1),y===void 0&&(y=null),!y&&(y=U,!y)){var L=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!L)throw new Error("OffscreenCanvas or DOM canvas not supported");y=U=L.getContext("webgl",{depth:!1})}lt(y);var E=new Uint8Array(_*m*4);v(y,function(nt){var P=nt.gl,dt=nt.withTexture,Ot=nt.withTextureFramebuffer;dt("readable",function(X,J){P.texImage2D(P.TEXTURE_2D,0,P.RGBA,_,m,0,P.RGBA,P.UNSIGNED_BYTE,null),Ot(X,J,function(tt){yt(_,m,l,g,F,w,P,tt,0,0,0),P.readPixels(0,0,_,m,P.RGBA,P.UNSIGNED_BYTE,E)})})});for(var D=new Uint8Array(_*m),B=0,st=0;B<E.length;B+=4)D[st++]=E[B];return D}function ht(_,m,l,g,F,w,y,L,E,D){w===void 0&&(w=1),L===void 0&&(L=0),E===void 0&&(E=0),D===void 0&&(D=0),yt(_,m,l,g,F,w,y,null,L,E,D)}function yt(_,m,l,g,F,w,y,L,E,D,B){w===void 0&&(w=1),E===void 0&&(E=0),D===void 0&&(D=0),B===void 0&&(B=0),lt(y);var st=[];n(l,function(nt,P,dt,Ot){st.push(nt,P,dt,Ot)}),st=new Float32Array(st),v(y,function(nt){var P=nt.gl,dt=nt.isWebGL2,Ot=nt.getExtension,X=nt.withProgram,J=nt.withTexture,tt=nt.withTextureFramebuffer,O=nt.handleContextLoss;if(J("rawDistances",function(Y,N){(_!==Y._lastWidth||m!==Y._lastHeight)&&P.texImage2D(P.TEXTURE_2D,0,P.RGBA,Y._lastWidth=_,Y._lastHeight=m,0,P.RGBA,P.UNSIGNED_BYTE,null),X("main",$,c,function(T){var ct=T.setAttribute,k=T.setUniform,W=!dt&&Ot("ANGLE_instanced_arrays"),H=!dt&&Ot("EXT_blend_minmax");ct("aUV",2,P.STATIC_DRAW,0,R),ct("aLineSegment",4,P.DYNAMIC_DRAW,1,st),k.apply(void 0,["4f","uGlyphBounds"].concat(g)),k("1f","uMaxDistance",F),k("1f","uExponent",w),tt(Y,N,function(ut){P.enable(P.BLEND),P.colorMask(!0,!0,!0,!0),P.viewport(0,0,_,m),P.scissor(0,0,_,m),P.blendFunc(P.ONE,P.ONE),P.blendEquationSeparate(P.FUNC_ADD,dt?P.MAX:H.MAX_EXT),P.clear(P.COLOR_BUFFER_BIT),dt?P.drawArraysInstanced(P.TRIANGLES,0,3,st.length/4):W.drawArraysInstancedANGLE(P.TRIANGLES,0,3,st.length/4)})}),X("post",h,x,function(T){T.setAttribute("aUV",2,P.STATIC_DRAW,0,R),T.setUniform("1i","tex",N),P.bindFramebuffer(P.FRAMEBUFFER,L),P.disable(P.BLEND),P.colorMask(B===0,B===1,B===2,B===3),P.viewport(E,D,_,m),P.scissor(E,D,_,m),P.drawArrays(P.TRIANGLES,0,3)})}),P.isContextLost())throw O(),new Error("webgl context lost")})}function Ut(_){var m=!_||_===U?M:_.canvas||_,l=et.get(m);if(l===void 0){A=!0;var g=null;try{var F=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],w=gt(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,_);l=w&&F.length===w.length&&w.every(function(y,L){return y===F[L]}),l||(g="bad trial run results",console.info(F,w))}catch(y){l=!1,g=y.message}g&&console.warn("WebGL SDF generation not supported:",g),A=!1,et.set(m,l)}return l}var Et=Object.freeze({__proto__:null,generate:gt,generateIntoCanvas:ht,generateIntoFramebuffer:yt,isSupported:Ut});function Bt(_,m,l,g,F,w){F===void 0&&(F=Math.max(g[2]-g[0],g[3]-g[1])/2),w===void 0&&(w=1);try{return gt.apply(Et,arguments)}catch(y){return console.info("WebGL SDF generation failed, falling back to JS",y),V.apply(K,arguments)}}function C(_,m,l,g,F,w,y,L,E,D){F===void 0&&(F=Math.max(g[2]-g[0],g[3]-g[1])/2),w===void 0&&(w=1),L===void 0&&(L=0),E===void 0&&(E=0),D===void 0&&(D=0);try{return ht.apply(Et,arguments)}catch(B){return console.info("WebGL SDF generation failed, falling back to JS",B),z.apply(K,arguments)}}return t.forEachPathCommand=s,t.generate=Bt,t.generateIntoCanvas=C,t.javascript=K,t.pathToLineSegments=n,t.webgl=Et,t.webglUtils=b,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return r}function Ss(){var r=function(t){var i={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},e={},s={};e.L=1,s[1]="L",Object.keys(i).forEach(function(O,Y){e[O]=1<<Y+1,s[e[O]]=O}),Object.freeze(e);var n=e.LRI|e.RLI|e.FSI,h=e.L|e.R|e.AL,f=e.B|e.S|e.WS|e.ON|e.FSI|e.LRI|e.RLI|e.PDI,o=e.BN|e.RLE|e.LRE|e.RLO|e.LRO|e.PDF,a=e.S|e.WS|e.B|n|e.PDI|o,v=null;function d(){if(!v){v=new Map;var O=function(N){if(i.hasOwnProperty(N)){var T=0;i[N].split(",").forEach(function(ct){var k=ct.split("+"),W=k[0],H=k[1];W=parseInt(W,36),H=H?parseInt(H,36):0,v.set(T+=W,e[N]);for(var ut=0;ut<H;ut++)v.set(++T,e[N])})}};for(var Y in i)O(Y)}}function p(O){return d(),v.get(O.codePointAt(0))||e.L}function b(O){return s[p(O)]}var V={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function z(O,Y){var N=36,T=0,ct=new Map,k=Y&&new Map,W;return O.split(",").forEach(function H(ut){if(ut.indexOf("+")!==-1)for(var mt=+ut;mt--;)H(W);else{W=ut;var Q=ut.split(">"),ft=Q[0],Tt=Q[1];ft=String.fromCodePoint(T+=parseInt(ft,N)),Tt=String.fromCodePoint(T+=parseInt(Tt,N)),ct.set(ft,Tt),Y&&k.set(Tt,ft)}}),{map:ct,reverseMap:k}}var Z,q,K;function $(){if(!Z){var O=z(V.pairs,!0),Y=O.map,N=O.reverseMap;Z=Y,q=N,K=z(V.canonical,!1).map}}function c(O){return $(),Z.get(O)||null}function x(O){return $(),q.get(O)||null}function R(O){return $(),K.get(O)||null}var U=e.L,A=e.R,M=e.EN,et=e.ES,lt=e.ET,gt=e.AN,ht=e.CS,yt=e.B,Ut=e.S,Et=e.ON,Bt=e.BN,C=e.NSM,_=e.AL,m=e.LRO,l=e.RLO,g=e.LRE,F=e.RLE,w=e.PDF,y=e.LRI,L=e.RLI,E=e.FSI,D=e.PDI;function B(O,Y){for(var N=125,T=new Uint32Array(O.length),ct=0;ct<O.length;ct++)T[ct]=p(O[ct]);var k=new Map;function W(Ct,Rt){var Lt=T[Ct];T[Ct]=Rt,k.set(Lt,k.get(Lt)-1),Lt&f&&k.set(f,k.get(f)-1),k.set(Rt,(k.get(Rt)||0)+1),Rt&f&&k.set(f,(k.get(f)||0)+1)}for(var H=new Uint8Array(O.length),ut=new Map,mt=[],Q=null,ft=0;ft<O.length;ft++)Q||mt.push(Q={start:ft,end:O.length-1,level:Y==="rtl"?1:Y==="ltr"?0:cr(ft,!1)}),T[ft]&yt&&(Q.end=ft,Q=null);for(var Tt=F|g|l|m|n|D|w|yt,jt=function(Ct){return Ct+(Ct&1?1:2)},Nt=function(Ct){return Ct+(Ct&1?2:1)},Ht=0;Ht<mt.length;Ht++){Q=mt[Ht];var ot=[{_level:Q.level,_override:0,_isolate:0}],pt=void 0,Yt=0,Vt=0,ti=0;k.clear();for(var wt=Q.start;wt<=Q.end;wt++){var bt=T[wt];if(pt=ot[ot.length-1],k.set(bt,(k.get(bt)||0)+1),bt&f&&k.set(f,(k.get(f)||0)+1),bt&Tt)if(bt&(F|g)){H[wt]=pt._level;var Yi=(bt===F?Nt:jt)(pt._level);Yi<=N&&!Yt&&!Vt?ot.push({_level:Yi,_override:0,_isolate:0}):Yt||Vt++}else if(bt&(l|m)){H[wt]=pt._level;var Ni=(bt===l?Nt:jt)(pt._level);Ni<=N&&!Yt&&!Vt?ot.push({_level:Ni,_override:bt&l?A:U,_isolate:0}):Yt||Vt++}else if(bt&n){bt&E&&(bt=cr(wt+1,!0)===1?L:y),H[wt]=pt._level,pt._override&&W(wt,pt._override);var Hi=(bt===L?Nt:jt)(pt._level);Hi<=N&&Yt===0&&Vt===0?(ti++,ot.push({_level:Hi,_override:0,_isolate:1,_isolInitIndex:wt})):Yt++}else if(bt&D){if(Yt>0)Yt--;else if(ti>0){for(Vt=0;!ot[ot.length-1]._isolate;)ot.pop();var ei=ot[ot.length-1]._isolInitIndex;ei!=null&&(ut.set(ei,wt),ut.set(wt,ei)),ot.pop(),ti--}pt=ot[ot.length-1],H[wt]=pt._level,pt._override&&W(wt,pt._override)}else bt&w?(Yt===0&&(Vt>0?Vt--:!pt._isolate&&ot.length>1&&(ot.pop(),pt=ot[ot.length-1])),H[wt]=pt._level):bt&yt&&(H[wt]=Q.level);else H[wt]=pt._level,pt._override&&bt!==Bt&&W(wt,pt._override)}for(var $t=[],zt=null,Qt=Q.start;Qt<=Q.end;Qt++){var ii=T[Qt];if(!(ii&o)){var Vi=H[Qt],Zi=ii&n,Yr=ii===D;zt&&Vi===zt._level?(zt._end=Qt,zt._endsWithIsolInit=Zi):$t.push(zt={_start:Qt,_end:Qt,_level:Vi,_startsWithPDI:Yr,_endsWithIsolInit:Zi})}}for(var ri=[],Pe=0;Pe<$t.length;Pe++){var xe=$t[Pe];if(!xe._startsWithPDI||xe._startsWithPDI&&!ut.has(xe._start)){for(var si=[zt=xe],Gi=void 0;zt&&zt._endsWithIsolInit&&(Gi=ut.get(zt._end))!=null;)for(var Me=Pe+1;Me<$t.length;Me++)if($t[Me]._start===Gi){si.push(zt=$t[Me]);break}for(var te=[],ni=0;ni<si.length;ni++)for(var Xi=si[ni],oi=Xi._start;oi<=Xi._end;oi++)te.push(oi);for(var Nr=H[te[0]],Wi=Q.level,Re=te[0]-1;Re>=0;Re--)if(!(T[Re]&o)){Wi=H[Re];break}var ai=te[te.length-1],Hr=H[ai],Ki=Q.level;if(!(T[ai]&n)){for(var Fe=ai+1;Fe<=Q.end;Fe++)if(!(T[Fe]&o)){Ki=H[Fe];break}}ri.push({_seqIndices:te,_sosType:Math.max(Wi,Nr)%2?A:U,_eosType:Math.max(Ki,Hr)%2?A:U})}}for(var li=0;li<ri.length;li++){var hi=ri[li],S=hi._seqIndices,he=hi._sosType,Vr=hi._eosType;if(k.get(C))for(var Se=0;Se<S.length;Se++){var ji=S[Se];if(T[ji]&C){for(var ci=he,ze=Se-1;ze>=0;ze--)if(!(T[S[ze]]&o)){ci=T[S[ze]];break}W(ji,ci&(n|D)?Et:ci)}}if(k.get(M))for(var ke=0;ke<S.length;ke++){var Qi=S[ke];if(T[Qi]&M)for(var Ie=ke-1;Ie>=-1;Ie--){var Ji=Ie===-1?he:T[S[Ie]];if(Ji&h){Ji===_&&W(Qi,gt);break}}}if(k.get(_))for(var ui=0;ui<S.length;ui++){var qi=S[ui];T[qi]&_&&W(qi,A)}if(k.get(et)||k.get(ht))for(var ce=1;ce<S.length-1;ce++){var fi=S[ce];if(T[fi]&(et|ht)){for(var ee=0,_i=0,di=ce-1;di>=0&&(ee=T[S[di]],!!(ee&o));di--);for(var mi=ce+1;mi<S.length&&(_i=T[S[mi]],!!(_i&o));mi++);ee===_i&&(T[fi]===et?ee===M:ee&(M|gt))&&W(fi,ee)}}if(k.get(M))for(var ue=0;ue<S.length;ue++){var Zr=S[ue];if(T[Zr]&M){for(var Be=ue-1;Be>=0&&T[S[Be]]&(lt|o);Be--)W(S[Be],M);for(var Ye=ue+1;Ye<S.length&&T[S[Ye]]&(lt|o);Ye++)W(S[Ye],M)}}if(k.get(lt)||k.get(et)||k.get(ht))for(var fe=0;fe<S.length;fe++){var $i=S[fe];if(T[$i]&(lt|et|ht)){W($i,Et);for(var Ne=fe-1;Ne>=0&&T[S[Ne]]&o;Ne--)W(S[Ne],Et);for(var He=fe+1;He<S.length&&T[S[He]]&o;He++)W(S[He],Et)}}if(k.get(M))for(var pi=0,tr=he;pi<S.length;pi++){var er=S[pi],vi=T[er];vi&M?tr===U&&W(er,U):vi&h&&(tr=vi)}if(k.get(f)){var _e=A|M|gt,ir=_e|U,Ve=[];{for(var ie=[],re=0;re<S.length;re++)if(T[S[re]]&f){var de=O[S[re]],rr=void 0;if(c(de)!==null)if(ie.length<63)ie.push({char:de,seqIndex:re});else break;else if((rr=x(de))!==null)for(var me=ie.length-1;me>=0;me--){var gi=ie[me].char;if(gi===rr||gi===x(R(de))||c(R(gi))===de){Ve.push([ie[me].seqIndex,re]),ie.length=me;break}}}Ve.sort(function(Ct,Rt){return Ct[0]-Rt[0]})}for(var Ei=0;Ei<Ve.length;Ei++){for(var sr=Ve[Ei],pe=sr[0],Ze=sr[1],nr=!1,Mt=0,yi=pe+1;yi<Ze;yi++){var Ti=S[yi];if(T[Ti]&ir){nr=!0;var or=T[Ti]&_e?A:U;if(or===se(Ti)){Mt=or;break}}}if(nr&&!Mt){Mt=he;for(var Oi=pe-1;Oi>=0;Oi--){var Ge=S[Oi];if(T[Ge]&ir){var ar=T[Ge]&_e?A:U;ar!==se(Ge)?Mt=ar:Mt=se(Ge);break}}}if(Mt){if(T[S[pe]]=T[S[Ze]]=Mt,Mt!==se(S[pe])){for(var ve=pe+1;ve<S.length;ve++)if(!(T[S[ve]]&o)){p(O[S[ve]])&C&&(T[S[ve]]=Mt);break}}if(Mt!==se(S[Ze])){for(var ge=Ze+1;ge<S.length;ge++)if(!(T[S[ge]]&o)){p(O[S[ge]])&C&&(T[S[ge]]=Mt);break}}}}for(var Zt=0;Zt<S.length;Zt++)if(T[S[Zt]]&f){for(var lr=Zt,wi=Zt,bi=he,Ee=Zt-1;Ee>=0;Ee--)if(T[S[Ee]]&o)lr=Ee;else{bi=T[S[Ee]]&_e?A:U;break}for(var hr=Vr,ye=Zt+1;ye<S.length;ye++)if(T[S[ye]]&(f|o))wi=ye;else{hr=T[S[ye]]&_e?A:U;break}for(var Xe=lr;Xe<=wi;Xe++)T[S[Xe]]=bi===hr?bi:se(S[Xe]);Zt=wi}}}for(var At=Q.start;At<=Q.end;At++){var Gr=H[At],We=T[At];if(Gr&1?We&(U|M|gt)&&H[At]++:We&A?H[At]++:We&(gt|M)&&(H[At]+=2),We&o&&(H[At]=At===0?Q.level:H[At-1]),At===Q.end||p(O[At])&(Ut|yt))for(var Ke=At;Ke>=0&&p(O[Ke])&a;Ke--)H[Ke]=Q.level}}return{levels:H,paragraphs:mt};function cr(Ct,Rt){for(var Lt=Ct;Lt<O.length;Lt++){var Gt=T[Lt];if(Gt&(A|_))return 1;if(Gt&(yt|U)||Rt&&Gt===D)return 0;if(Gt&n){var ur=Xr(Lt);Lt=ur===-1?O.length:ur}}return 0}function Xr(Ct){for(var Rt=1,Lt=Ct+1;Lt<O.length;Lt++){var Gt=T[Lt];if(Gt&yt)break;if(Gt&D){if(--Rt===0)return Lt}else Gt&n&&Rt++}return-1}function se(Ct){return H[Ct]&1?A:U}}var st="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",nt;function P(){if(!nt){var O=z(st,!0),Y=O.map,N=O.reverseMap;N.forEach(function(T,ct){Y.set(ct,T)}),nt=Y}}function dt(O){return P(),nt.get(O)||null}function Ot(O,Y,N,T){var ct=O.length;N=Math.max(0,N==null?0:+N),T=Math.min(ct-1,T==null?ct-1:+T);for(var k=new Map,W=N;W<=T;W++)if(Y[W]&1){var H=dt(O[W]);H!==null&&k.set(W,H)}return k}function X(O,Y,N,T){var ct=O.length;N=Math.max(0,N==null?0:+N),T=Math.min(ct-1,T==null?ct-1:+T);var k=[];return Y.paragraphs.forEach(function(W){var H=Math.max(N,W.start),ut=Math.min(T,W.end);if(H<ut){for(var mt=Y.levels.slice(H,ut+1),Q=ut;Q>=H&&p(O[Q])&a;Q--)mt[Q]=W.level;for(var ft=W.level,Tt=1/0,jt=0;jt<mt.length;jt++){var Nt=mt[jt];Nt>ft&&(ft=Nt),Nt<Tt&&(Tt=Nt|1)}for(var Ht=ft;Ht>=Tt;Ht--)for(var ot=0;ot<mt.length;ot++)if(mt[ot]>=Ht){for(var pt=ot;ot+1<mt.length&&mt[ot+1]>=Ht;)ot++;ot>pt&&k.push([pt+N,ot+N])}}}),k}function J(O,Y,N,T){var ct=tt(O,Y,N,T),k=[].concat(O);return ct.forEach(function(W,H){k[H]=(Y.levels[W]&1?dt(O[W]):null)||O[W]}),k.join("")}function tt(O,Y,N,T){for(var ct=X(O,Y,N,T),k=[],W=0;W<O.length;W++)k[W]=W;return ct.forEach(function(H){for(var ut=H[0],mt=H[1],Q=k.slice(ut,mt+1),ft=Q.length;ft--;)k[mt-ft]=Q[ft]}),k}return t.closingToOpeningBracket=x,t.getBidiCharType=p,t.getBidiCharTypeName=b,t.getCanonicalBracket=R,t.getEmbeddingLevels=B,t.getMirroredCharacter=dt,t.getMirroredCharactersMap=Ot,t.getReorderSegments=X,t.getReorderedIndices=tt,t.getReorderedString=J,t.openingToClosingBracket=c,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return r}/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const G={LEFT:1,RIGHT:2,MIDDLE:4},u=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),ne={NONE:0,IN:1,OUT:-1};function Jt(r){return r.isPerspectiveCamera}function Wt(r){return r.isOrthographicCamera}const oe=Math.PI*2,yr=Math.PI/2,Ir=1e-5,Te=Math.PI/180;function St(r,t,i){return Math.max(t,Math.min(i,r))}function at(r,t=Ir){return Math.abs(r)<t}function rt(r,t,i=Ir){return at(r-t,i)}function Tr(r,t){return Math.round(r/t)*t}function Oe(r){return isFinite(r)?r:r<0?-Number.MAX_VALUE:Number.MAX_VALUE}function we(r){return Math.abs(r)<Number.MAX_VALUE?r:r*(1/0)}function je(r,t,i,e,s=1/0,n){e=Math.max(1e-4,e);const h=2/e,f=h*n,o=1/(1+f+.48*f*f+.235*f*f*f);let a=r-t;const v=t,d=s*e;a=St(a,-d,d),t=r-a;const p=(i.value+h*a)*n;i.value=(i.value-h*p)*o;let b=t+(a+p)*o;return v-r>0==b>v&&(b=v,i.value=(b-v)/n),b}function Or(r,t,i,e,s=1/0,n,h){e=Math.max(1e-4,e);const f=2/e,o=f*n,a=1/(1+o+.48*o*o+.235*o*o*o);let v=t.x,d=t.y,p=t.z,b=r.x-v,V=r.y-d,z=r.z-p;const Z=v,q=d,K=p,$=s*e,c=$*$,x=b*b+V*V+z*z;if(x>c){const Ut=Math.sqrt(x);b=b/Ut*$,V=V/Ut*$,z=z/Ut*$}v=r.x-b,d=r.y-V,p=r.z-z;const R=(i.x+f*b)*n,U=(i.y+f*V)*n,A=(i.z+f*z)*n;i.x=(i.x-f*R)*a,i.y=(i.y-f*U)*a,i.z=(i.z-f*A)*a,h.x=v+(b+R)*a,h.y=d+(V+U)*a,h.z=p+(z+A)*a;const M=Z-r.x,et=q-r.y,lt=K-r.z,gt=h.x-Z,ht=h.y-q,yt=h.z-K;return M*gt+et*ht+lt*yt>0&&(h.x=Z,h.y=q,h.z=K,i.x=(h.x-Z)/n,i.y=(h.y-q)/n,i.z=(h.z-K)/n),h}function Ui(r,t){t.set(0,0),r.forEach(i=>{t.x+=i.clientX,t.y+=i.clientY}),t.x/=r.length,t.y/=r.length}function Ai(r,t){return Wt(r)?(console.warn(`${t} is not supported in OrthographicCamera`),!0):!1}class bs{constructor(){this._listeners={}}addEventListener(t,i){const e=this._listeners;e[t]===void 0&&(e[t]=[]),e[t].indexOf(i)===-1&&e[t].push(i)}hasEventListener(t,i){const e=this._listeners;return e[t]!==void 0&&e[t].indexOf(i)!==-1}removeEventListener(t,i){const s=this._listeners[t];if(s!==void 0){const n=s.indexOf(i);n!==-1&&s.splice(n,1)}}removeAllEventListeners(t){if(!t){this._listeners={};return}Array.isArray(this._listeners[t])&&(this._listeners[t].length=0)}dispatchEvent(t){const e=this._listeners[t.type];if(e!==void 0){t.target=this;const s=e.slice(0);for(let n=0,h=s.length;n<h;n++)s[n].call(this,t)}}}const Cs="2.7.2",Qe=1/8,Br=typeof window<"u",Ls=Br&&/Mac/.test(navigator.platform),Ds=!(Br&&"PointerEvent"in window);let I,wr,Je,Pi,Dt,j,it,ae,be,kt,It,qt,br,Cr,Pt,Ce,le,Lr,xi,Dr,Mi,Ri,qe;class Ii extends bs{static install(t){I=t.THREE,wr=Object.freeze(new I.Vector3(0,0,0)),Je=Object.freeze(new I.Vector3(0,1,0)),Pi=Object.freeze(new I.Vector3(0,0,1)),Dt=new I.Vector2,j=new I.Vector3,it=new I.Vector3,ae=new I.Vector3,be=new I.Vector3,kt=new I.Vector3,It=new I.Vector3,qt=new I.Vector3,br=new I.Vector3,Cr=new I.Vector3,Pt=new I.Spherical,Ce=new I.Spherical,le=new I.Box3,Lr=new I.Box3,xi=new I.Sphere,Dr=new I.Quaternion,Mi=new I.Quaternion,Ri=new I.Matrix4,qe=new I.Raycaster}static get ACTION(){return u}constructor(t,i){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=u.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=ne.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new I.Vector3,this._focalOffsetVelocity=new I.Vector3,this._zoomVelocity={value:0},this._truckInternal=(c,x,R)=>{let U,A;if(Jt(this._camera)){const M=j.copy(this._camera.position).sub(this._target),et=this._camera.getEffectiveFOV()*Te,lt=M.length()*Math.tan(et*.5);U=this.truckSpeed*c*lt/this._elementRect.height,A=this.truckSpeed*x*lt/this._elementRect.height}else if(Wt(this._camera)){const M=this._camera;U=c*(M.right-M.left)/M.zoom/this._elementRect.width,A=x*(M.top-M.bottom)/M.zoom/this._elementRect.height}else return;this.verticalDragToForward?(R?this.setFocalOffset(this._focalOffsetEnd.x+U,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(U,0,!0),this.forward(-A,!0)):R?this.setFocalOffset(this._focalOffsetEnd.x+U,this._focalOffsetEnd.y+A,this._focalOffsetEnd.z,!0):this.truck(U,A,!0)},this._rotateInternal=(c,x)=>{const R=oe*this.azimuthRotateSpeed*c/this._elementRect.height,U=oe*this.polarRotateSpeed*x/this._elementRect.height;this.rotate(R,U,!0)},this._dollyInternal=(c,x,R)=>{const U=Math.pow(.95,-c*this.dollySpeed),A=this._sphericalEnd.radius,M=this._sphericalEnd.radius*U,et=St(M,this.minDistance,this.maxDistance),lt=et-M;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(M,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(lt,!0),this._dollyToNoClamp(et,!0)):this._dollyToNoClamp(et,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?M:et)-A,this._dollyControlCoord.set(x,R)),this._lastDollyDirection=Math.sign(-c)},this._zoomInternal=(c,x,R)=>{const U=Math.pow(.95,c*this.dollySpeed),A=this._zoom,M=this._zoom*U;this.zoomTo(M,!0),this.dollyToCursor&&(this._changedZoom+=M-A,this._dollyControlCoord.set(x,R))},typeof I>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=t,this._yAxisUpSpace=new I.Quaternion().setFromUnitVectors(this._camera.up,Je),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=u.NONE,this._target=new I.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new I.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new I.Spherical().setFromVector3(j.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new I.Vector3,new I.Vector3,new I.Vector3,new I.Vector3],this._updateNearPlaneCorners(),this._boundary=new I.Box3(new I.Vector3(-1/0,-1/0,-1/0),new I.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new I.Vector2,this.mouseButtons={left:u.ROTATE,middle:u.DOLLY,right:u.TRUCK,wheel:Jt(this._camera)?u.DOLLY:Wt(this._camera)?u.ZOOM:u.NONE},this.touches={one:u.TOUCH_ROTATE,two:Jt(this._camera)?u.TOUCH_DOLLY_TRUCK:Wt(this._camera)?u.TOUCH_ZOOM_TRUCK:u.NONE,three:u.TOUCH_TRUCK};const e=new I.Vector2,s=new I.Vector2,n=new I.Vector2,h=c=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const U=this._domElement.getBoundingClientRect(),A=c.clientX/U.width,M=c.clientY/U.height;if(A<this._interactiveArea.left||A>this._interactiveArea.right||M<this._interactiveArea.top||M>this._interactiveArea.bottom)return}const x=c.pointerType!=="mouse"?null:(c.buttons&G.LEFT)===G.LEFT?G.LEFT:(c.buttons&G.MIDDLE)===G.MIDDLE?G.MIDDLE:(c.buttons&G.RIGHT)===G.RIGHT?G.RIGHT:null;if(x!==null){const U=this._findPointerByMouseButton(x);U&&this._disposePointer(U)}if((c.buttons&G.LEFT)===G.LEFT&&this._lockedPointer)return;const R={pointerId:c.pointerId,clientX:c.clientX,clientY:c.clientY,deltaX:0,deltaY:0,mouseButton:x};this._activePointers.push(R),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",v),this._domElement.ownerDocument.addEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",v),this._isDragging=!0,z(c)},f=c=>{if(!this._enabled||!this._domElement||this._lockedPointer)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const U=this._domElement.getBoundingClientRect(),A=c.clientX/U.width,M=c.clientY/U.height;if(A<this._interactiveArea.left||A>this._interactiveArea.right||M<this._interactiveArea.top||M>this._interactiveArea.bottom)return}const x=(c.buttons&G.LEFT)===G.LEFT?G.LEFT:(c.buttons&G.MIDDLE)===G.MIDDLE?G.MIDDLE:(c.buttons&G.RIGHT)===G.RIGHT?G.RIGHT:null;if(x!==null){const U=this._findPointerByMouseButton(x);U&&this._disposePointer(U)}const R={pointerId:1,clientX:c.clientX,clientY:c.clientY,deltaX:0,deltaY:0,mouseButton:(c.buttons&G.LEFT)===G.LEFT?G.LEFT:(c.buttons&G.MIDDLE)===G.LEFT?G.MIDDLE:(c.buttons&G.RIGHT)===G.LEFT?G.RIGHT:null};this._activePointers.push(R),this._domElement.ownerDocument.removeEventListener("mousemove",a),this._domElement.ownerDocument.removeEventListener("mouseup",d),this._domElement.ownerDocument.addEventListener("mousemove",a),this._domElement.ownerDocument.addEventListener("mouseup",d),this._isDragging=!0,z(c)},o=c=>{c.cancelable&&c.preventDefault();const x=c.pointerId,R=this._lockedPointer||this._findPointerById(x);if(R){if(R.clientX=c.clientX,R.clientY=c.clientY,R.deltaX=c.movementX,R.deltaY=c.movementY,this._state=0,c.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(c.buttons&G.LEFT)===G.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(c.buttons&G.MIDDLE)===G.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(c.buttons&G.RIGHT)===G.RIGHT&&(this._state=this._state|this.mouseButtons.right);Z()}},a=c=>{const x=this._lockedPointer||this._findPointerById(1);x&&(x.clientX=c.clientX,x.clientY=c.clientY,x.deltaX=c.movementX,x.deltaY=c.movementY,this._state=0,(this._lockedPointer||(c.buttons&G.LEFT)===G.LEFT)&&(this._state=this._state|this.mouseButtons.left),(c.buttons&G.MIDDLE)===G.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(c.buttons&G.RIGHT)===G.RIGHT&&(this._state=this._state|this.mouseButtons.right),Z())},v=c=>{const x=this._findPointerById(c.pointerId);if(!(x&&x===this._lockedPointer)){if(x&&this._disposePointer(x),c.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=u.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=u.NONE;q()}},d=()=>{const c=this._findPointerById(1);c&&c===this._lockedPointer||(c&&this._disposePointer(c),this._state=u.NONE,q())};let p=-1;const b=c=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===u.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const M=this._domElement.getBoundingClientRect(),et=c.clientX/M.width,lt=c.clientY/M.height;if(et<this._interactiveArea.left||et>this._interactiveArea.right||lt<this._interactiveArea.top||lt>this._interactiveArea.bottom)return}if(c.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===u.ROTATE||this.mouseButtons.wheel===u.TRUCK){const M=performance.now();p-M<1e3&&this._getClientRect(this._elementRect),p=M}const x=Ls?-1:-3,R=c.deltaMode===1?c.deltaY/x:c.deltaY/(x*10),U=this.dollyToCursor?(c.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,A=this.dollyToCursor?(c.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case u.ROTATE:{this._rotateInternal(c.deltaX,c.deltaY),this._isUserControllingRotate=!0;break}case u.TRUCK:{this._truckInternal(c.deltaX,c.deltaY,!1),this._isUserControllingTruck=!0;break}case u.OFFSET:{this._truckInternal(c.deltaX,c.deltaY,!0),this._isUserControllingOffset=!0;break}case u.DOLLY:{this._dollyInternal(-R,U,A),this._isUserControllingDolly=!0;break}case u.ZOOM:{this._zoomInternal(-R,U,A),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},V=c=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===Ii.ACTION.NONE){const x=c instanceof PointerEvent?c.pointerId:(c instanceof MouseEvent,0),R=this._findPointerById(x);R&&this._disposePointer(R),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",v),this._domElement.ownerDocument.removeEventListener("mousemove",a),this._domElement.ownerDocument.removeEventListener("mouseup",d);return}c.preventDefault()}},z=c=>{if(!this._enabled)return;if(Ui(this._activePointers,Dt),this._getClientRect(this._elementRect),e.copy(Dt),s.copy(Dt),this._activePointers.length>=2){const R=Dt.x-this._activePointers[1].clientX,U=Dt.y-this._activePointers[1].clientY,A=Math.sqrt(R*R+U*U);n.set(0,A);const M=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,et=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;s.set(M,et)}if(this._state=0,!c)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in c&&c.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(c.buttons&G.LEFT)===G.LEFT&&(this._state=this._state|this.mouseButtons.left),(c.buttons&G.MIDDLE)===G.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(c.buttons&G.RIGHT)===G.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&u.ROTATE)===u.ROTATE||(this._state&u.TOUCH_ROTATE)===u.TOUCH_ROTATE||(this._state&u.TOUCH_DOLLY_ROTATE)===u.TOUCH_DOLLY_ROTATE||(this._state&u.TOUCH_ZOOM_ROTATE)===u.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&u.TRUCK)===u.TRUCK||(this._state&u.TOUCH_TRUCK)===u.TOUCH_TRUCK||(this._state&u.TOUCH_DOLLY_TRUCK)===u.TOUCH_DOLLY_TRUCK||(this._state&u.TOUCH_ZOOM_TRUCK)===u.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&u.DOLLY)===u.DOLLY||(this._state&u.TOUCH_DOLLY)===u.TOUCH_DOLLY||(this._state&u.TOUCH_DOLLY_TRUCK)===u.TOUCH_DOLLY_TRUCK||(this._state&u.TOUCH_DOLLY_OFFSET)===u.TOUCH_DOLLY_OFFSET||(this._state&u.TOUCH_DOLLY_ROTATE)===u.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&u.ZOOM)===u.ZOOM||(this._state&u.TOUCH_ZOOM)===u.TOUCH_ZOOM||(this._state&u.TOUCH_ZOOM_TRUCK)===u.TOUCH_ZOOM_TRUCK||(this._state&u.TOUCH_ZOOM_OFFSET)===u.TOUCH_ZOOM_OFFSET||(this._state&u.TOUCH_ZOOM_ROTATE)===u.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&u.OFFSET)===u.OFFSET||(this._state&u.TOUCH_OFFSET)===u.TOUCH_OFFSET||(this._state&u.TOUCH_DOLLY_OFFSET)===u.TOUCH_DOLLY_OFFSET||(this._state&u.TOUCH_ZOOM_OFFSET)===u.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},Z=()=>{if(!this._enabled)return;Ui(this._activePointers,Dt);const x=this._domElement&&document.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,R=x?-x.deltaX:s.x-Dt.x,U=x?-x.deltaY:s.y-Dt.y;if(s.copy(Dt),((this._state&u.ROTATE)===u.ROTATE||(this._state&u.TOUCH_ROTATE)===u.TOUCH_ROTATE||(this._state&u.TOUCH_DOLLY_ROTATE)===u.TOUCH_DOLLY_ROTATE||(this._state&u.TOUCH_ZOOM_ROTATE)===u.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(R,U),this._isUserControllingRotate=!0),(this._state&u.DOLLY)===u.DOLLY||(this._state&u.ZOOM)===u.ZOOM){const A=this.dollyToCursor?(e.x-this._elementRect.x)/this._elementRect.width*2-1:0,M=this.dollyToCursor?(e.y-this._elementRect.y)/this._elementRect.height*-2+1:0,et=this.dollyDragInverted?-1:1;(this._state&u.DOLLY)===u.DOLLY?(this._dollyInternal(et*U*Qe,A,M),this._isUserControllingDolly=!0):(this._zoomInternal(et*U*Qe,A,M),this._isUserControllingZoom=!0)}if((this._state&u.TOUCH_DOLLY)===u.TOUCH_DOLLY||(this._state&u.TOUCH_ZOOM)===u.TOUCH_ZOOM||(this._state&u.TOUCH_DOLLY_TRUCK)===u.TOUCH_DOLLY_TRUCK||(this._state&u.TOUCH_ZOOM_TRUCK)===u.TOUCH_ZOOM_TRUCK||(this._state&u.TOUCH_DOLLY_OFFSET)===u.TOUCH_DOLLY_OFFSET||(this._state&u.TOUCH_ZOOM_OFFSET)===u.TOUCH_ZOOM_OFFSET||(this._state&u.TOUCH_DOLLY_ROTATE)===u.TOUCH_DOLLY_ROTATE||(this._state&u.TOUCH_ZOOM_ROTATE)===u.TOUCH_ZOOM_ROTATE){const A=Dt.x-this._activePointers[1].clientX,M=Dt.y-this._activePointers[1].clientY,et=Math.sqrt(A*A+M*M),lt=n.y-et;n.set(0,et);const gt=this.dollyToCursor?(s.x-this._elementRect.x)/this._elementRect.width*2-1:0,ht=this.dollyToCursor?(s.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&u.TOUCH_DOLLY)===u.TOUCH_DOLLY||(this._state&u.TOUCH_DOLLY_ROTATE)===u.TOUCH_DOLLY_ROTATE||(this._state&u.TOUCH_DOLLY_TRUCK)===u.TOUCH_DOLLY_TRUCK||(this._state&u.TOUCH_DOLLY_OFFSET)===u.TOUCH_DOLLY_OFFSET?(this._dollyInternal(lt*Qe,gt,ht),this._isUserControllingDolly=!0):(this._zoomInternal(lt*Qe,gt,ht),this._isUserControllingZoom=!0)}((this._state&u.TRUCK)===u.TRUCK||(this._state&u.TOUCH_TRUCK)===u.TOUCH_TRUCK||(this._state&u.TOUCH_DOLLY_TRUCK)===u.TOUCH_DOLLY_TRUCK||(this._state&u.TOUCH_ZOOM_TRUCK)===u.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(R,U,!1),this._isUserControllingTruck=!0),((this._state&u.OFFSET)===u.OFFSET||(this._state&u.TOUCH_OFFSET)===u.TOUCH_OFFSET||(this._state&u.TOUCH_DOLLY_OFFSET)===u.TOUCH_DOLLY_OFFSET||(this._state&u.TOUCH_ZOOM_OFFSET)===u.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(R,U,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},q=()=>{Ui(this._activePointers,Dt),s.copy(Dt),(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",a),this._domElement.ownerDocument.removeEventListener("pointerup",v),this._domElement.ownerDocument.removeEventListener("mouseup",d),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",v),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",K),this._domElement.ownerDocument.addEventListener("pointerlockerror",$),this._domElement.ownerDocument.addEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",v),z())},this.unlockPointer=()=>{this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),document.exitPointerLock(),this.cancel(),this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointerlockchange",K),this._domElement.ownerDocument.removeEventListener("pointerlockerror",$))};const K=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},$=()=>{this.unlockPointer()};this._addAllEventListeners=c=>{this._domElement=c,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",h),Ds&&this._domElement.addEventListener("mousedown",f),this._domElement.addEventListener("pointercancel",v),this._domElement.addEventListener("wheel",b,{passive:!1}),this._domElement.addEventListener("contextmenu",V)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",h),this._domElement.removeEventListener("mousedown",f),this._domElement.removeEventListener("pointercancel",v),this._domElement.removeEventListener("wheel",b,{passive:!1}),this._domElement.removeEventListener("contextmenu",V),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",a),this._domElement.ownerDocument.removeEventListener("pointerup",v),this._domElement.ownerDocument.removeEventListener("mouseup",d),this._domElement.ownerDocument.removeEventListener("pointerlockchange",K),this._domElement.ownerDocument.removeEventListener("pointerlockerror",$))},this.cancel=()=>{this._state!==u.NONE&&(this._state=u.NONE,this._activePointers.length=0,q())},i&&this.connect(i),this.update(0)}get camera(){return this._camera}set camera(t){this._camera=t,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._domElement&&(t?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(t){this._spherical.radius===t&&this._sphericalEnd.radius===t||(this._spherical.radius=t,this._sphericalEnd.radius=t,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(t){this._spherical.theta===t&&this._sphericalEnd.theta===t||(this._spherical.theta=t,this._sphericalEnd.theta=t,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(t){this._spherical.phi===t&&this._sphericalEnd.phi===t||(this._spherical.phi=t,this._sphericalEnd.phi=t,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(t){this._boundaryEnclosesCamera=t,this._needsUpdate=!0}set interactiveArea(t){this._interactiveArea.width=St(t.width,0,1),this._interactiveArea.height=St(t.height,0,1),this._interactiveArea.x=St(t.x,0,1-this._interactiveArea.width),this._interactiveArea.y=St(t.x,0,1-this._interactiveArea.height)}addEventListener(t,i){super.addEventListener(t,i)}removeEventListener(t,i){super.removeEventListener(t,i)}rotate(t,i,e=!1){return this.rotateTo(this._sphericalEnd.theta+t,this._sphericalEnd.phi+i,e)}rotateAzimuthTo(t,i=!1){return this.rotateTo(t,this._sphericalEnd.phi,i)}rotatePolarTo(t,i=!1){return this.rotateTo(this._sphericalEnd.theta,t,i)}rotateTo(t,i,e=!1){this._isUserControllingRotate=!1;const s=St(t,this.minAzimuthAngle,this.maxAzimuthAngle),n=St(i,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=s,this._sphericalEnd.phi=n,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,e||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const h=!e||rt(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&rt(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(h)}dolly(t,i=!1){return this.dollyTo(this._sphericalEnd.radius-t,i)}dollyTo(t,i=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=ne.NONE,this._changedDolly=0,this._dollyToNoClamp(St(t,this.minDistance,this.maxDistance),i)}_dollyToNoClamp(t,i=!1){const e=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const h=this._collisionTest(),f=rt(h,this._spherical.radius);if(!(e>t)&&f)return Promise.resolve();this._sphericalEnd.radius=Math.min(t,h)}else this._sphericalEnd.radius=t;this._needsUpdate=!0,i||(this._spherical.radius=this._sphericalEnd.radius);const n=!i||rt(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(n)}dollyInFixed(t,i=!1){this._targetEnd.add(this._getCameraDirection(be).multiplyScalar(t)),i||this._target.copy(this._targetEnd);const e=!i||rt(this._target.x,this._targetEnd.x,this.restThreshold)&&rt(this._target.y,this._targetEnd.y,this.restThreshold)&&rt(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(e)}zoom(t,i=!1){return this.zoomTo(this._zoomEnd+t,i)}zoomTo(t,i=!1){this._isUserControllingZoom=!1,this._zoomEnd=St(t,this.minZoom,this.maxZoom),this._needsUpdate=!0,i||(this._zoom=this._zoomEnd);const e=!i||rt(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(e)}pan(t,i,e=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(t,i,e)}truck(t,i,e=!1){this._camera.updateMatrix(),kt.setFromMatrixColumn(this._camera.matrix,0),It.setFromMatrixColumn(this._camera.matrix,1),kt.multiplyScalar(t),It.multiplyScalar(-i);const s=j.copy(kt).add(It),n=it.copy(this._targetEnd).add(s);return this.moveTo(n.x,n.y,n.z,e)}forward(t,i=!1){j.setFromMatrixColumn(this._camera.matrix,0),j.crossVectors(this._camera.up,j),j.multiplyScalar(t);const e=it.copy(this._targetEnd).add(j);return this.moveTo(e.x,e.y,e.z,i)}elevate(t,i=!1){return j.copy(this._camera.up).multiplyScalar(t),this.moveTo(this._targetEnd.x+j.x,this._targetEnd.y+j.y,this._targetEnd.z+j.z,i)}moveTo(t,i,e,s=!1){this._isUserControllingTruck=!1;const n=j.set(t,i,e).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,n,this.boundaryFriction),this._needsUpdate=!0,s||this._target.copy(this._targetEnd);const h=!s||rt(this._target.x,this._targetEnd.x,this.restThreshold)&&rt(this._target.y,this._targetEnd.y,this.restThreshold)&&rt(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(h)}lookInDirectionOf(t,i,e,s=!1){const f=j.set(t,i,e).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius);return this.setPosition(f.x,f.y,f.z,s)}fitToBox(t,i,{cover:e=!1,paddingLeft:s=0,paddingRight:n=0,paddingBottom:h=0,paddingTop:f=0}={}){const o=[],a=t.isBox3?le.copy(t):le.setFromObject(t);a.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const v=Tr(this._sphericalEnd.theta,yr),d=Tr(this._sphericalEnd.phi,yr);o.push(this.rotateTo(v,d,i));const p=j.setFromSpherical(this._sphericalEnd).normalize(),b=Dr.setFromUnitVectors(p,Pi),V=rt(Math.abs(p.y),1);V&&b.multiply(Mi.setFromAxisAngle(Je,v)),b.multiply(this._yAxisUpSpaceInverse);const z=Lr.makeEmpty();it.copy(a.min).applyQuaternion(b),z.expandByPoint(it),it.copy(a.min).setX(a.max.x).applyQuaternion(b),z.expandByPoint(it),it.copy(a.min).setY(a.max.y).applyQuaternion(b),z.expandByPoint(it),it.copy(a.max).setZ(a.min.z).applyQuaternion(b),z.expandByPoint(it),it.copy(a.min).setZ(a.max.z).applyQuaternion(b),z.expandByPoint(it),it.copy(a.max).setY(a.min.y).applyQuaternion(b),z.expandByPoint(it),it.copy(a.max).setX(a.min.x).applyQuaternion(b),z.expandByPoint(it),it.copy(a.max).applyQuaternion(b),z.expandByPoint(it),z.min.x-=s,z.min.y-=h,z.max.x+=n,z.max.y+=f,b.setFromUnitVectors(Pi,p),V&&b.premultiply(Mi.invert()),b.premultiply(this._yAxisUpSpace);const Z=z.getSize(j),q=z.getCenter(it).applyQuaternion(b);if(Jt(this._camera)){const K=this.getDistanceToFitBox(Z.x,Z.y,Z.z,e);o.push(this.moveTo(q.x,q.y,q.z,i)),o.push(this.dollyTo(K,i)),o.push(this.setFocalOffset(0,0,0,i))}else if(Wt(this._camera)){const K=this._camera,$=K.right-K.left,c=K.top-K.bottom,x=e?Math.max($/Z.x,c/Z.y):Math.min($/Z.x,c/Z.y);o.push(this.moveTo(q.x,q.y,q.z,i)),o.push(this.zoomTo(x,i)),o.push(this.setFocalOffset(0,0,0,i))}return Promise.all(o)}fitToSphere(t,i){const e=[],n=t instanceof I.Sphere?xi.copy(t):Ii.createBoundingSphere(t,xi);if(e.push(this.moveTo(n.center.x,n.center.y,n.center.z,i)),Jt(this._camera)){const h=this.getDistanceToFitSphere(n.radius);e.push(this.dollyTo(h,i))}else if(Wt(this._camera)){const h=this._camera.right-this._camera.left,f=this._camera.top-this._camera.bottom,o=2*n.radius,a=Math.min(h/o,f/o);e.push(this.zoomTo(a,i))}return e.push(this.setFocalOffset(0,0,0,i)),Promise.all(e)}setLookAt(t,i,e,s,n,h,f=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=ne.NONE,this._changedDolly=0;const o=it.set(s,n,h),a=j.set(t,i,e);this._targetEnd.copy(o),this._sphericalEnd.setFromVector3(a.sub(o).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,f||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const v=!f||rt(this._target.x,this._targetEnd.x,this.restThreshold)&&rt(this._target.y,this._targetEnd.y,this.restThreshold)&&rt(this._target.z,this._targetEnd.z,this.restThreshold)&&rt(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&rt(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&rt(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(v)}lerpLookAt(t,i,e,s,n,h,f,o,a,v,d,p,b,V=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=ne.NONE,this._changedDolly=0;const z=j.set(s,n,h),Z=it.set(t,i,e);Pt.setFromVector3(Z.sub(z).applyQuaternion(this._yAxisUpSpace));const q=ae.set(v,d,p),K=it.set(f,o,a);Ce.setFromVector3(K.sub(q).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(z.lerp(q,b));const $=Ce.theta-Pt.theta,c=Ce.phi-Pt.phi,x=Ce.radius-Pt.radius;this._sphericalEnd.set(Pt.radius+x*b,Pt.phi+c*b,Pt.theta+$*b),this.normalizeRotations(),this._needsUpdate=!0,V||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const R=!V||rt(this._target.x,this._targetEnd.x,this.restThreshold)&&rt(this._target.y,this._targetEnd.y,this.restThreshold)&&rt(this._target.z,this._targetEnd.z,this.restThreshold)&&rt(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&rt(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&rt(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(R)}setPosition(t,i,e,s=!1){return this.setLookAt(t,i,e,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,s)}setTarget(t,i,e,s=!1){const n=this.getPosition(j),h=this.setLookAt(n.x,n.y,n.z,t,i,e,s);return this._sphericalEnd.phi=St(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),h}setFocalOffset(t,i,e,s=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(t,i,e),this._needsUpdate=!0,s||this._focalOffset.copy(this._focalOffsetEnd);const n=!s||rt(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&rt(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&rt(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(n)}setOrbitPoint(t,i,e){this._camera.updateMatrixWorld(),kt.setFromMatrixColumn(this._camera.matrixWorldInverse,0),It.setFromMatrixColumn(this._camera.matrixWorldInverse,1),qt.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const s=j.set(t,i,e),n=s.distanceTo(this._camera.position),h=s.sub(this._camera.position);kt.multiplyScalar(h.x),It.multiplyScalar(h.y),qt.multiplyScalar(h.z),j.copy(kt).add(It).add(qt),j.z=j.z+n,this.dollyTo(n,!1),this.setFocalOffset(-j.x,j.y,-j.z,!1),this.moveTo(t,i,e,!1)}setBoundary(t){if(!t){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(t),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(t,i,e,s){if(t===null){this._viewport=null;return}this._viewport=this._viewport||new I.Vector4,typeof t=="number"?this._viewport.set(t,i,e,s):this._viewport.copy(t)}getDistanceToFitBox(t,i,e,s=!1){if(Ai(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const n=t/i,h=this._camera.getEffectiveFOV()*Te,f=this._camera.aspect;return((s?n>f:n<f)?i:t/f)*.5/Math.tan(h*.5)+e*.5}getDistanceToFitSphere(t){if(Ai(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const i=this._camera.getEffectiveFOV()*Te,e=Math.atan(Math.tan(i*.5)*this._camera.aspect)*2,s=1<this._camera.aspect?i:e;return t/Math.sin(s*.5)}getTarget(t,i=!0){return(t&&t.isVector3?t:new I.Vector3).copy(i?this._targetEnd:this._target)}getPosition(t,i=!0){return(t&&t.isVector3?t:new I.Vector3).setFromSpherical(i?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(i?this._targetEnd:this._target)}getSpherical(t,i=!0){return(t&&t instanceof I.Spherical?t:new I.Spherical).copy(i?this._sphericalEnd:this._spherical)}getFocalOffset(t,i=!0){return(t&&t.isVector3?t:new I.Vector3).copy(i?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%oe,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=oe),this._spherical.theta+=oe*Math.round((this._sphericalEnd.theta-this._spherical.theta)/oe)}reset(t=!1){if(!rt(this._camera.up.x,this._cameraUp0.x)||!rt(this._camera.up.y,this._cameraUp0.y)||!rt(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const e=this.getPosition(j);this.updateCameraUp(),this.setPosition(e.x,e.y,e.z)}const i=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,t),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,t),this.zoomTo(this._zoom0,t)];return Promise.all(i)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,Je),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const t=j.subVectors(this._target,this._camera.position).normalize(),i=it.crossVectors(t,this._camera.up);this._camera.up.crossVectors(i,t).normalize(),this._camera.updateMatrixWorld();const e=this.getPosition(j);this.updateCameraUp(),this.setPosition(e.x,e.y,e.z)}update(t){const i=this._sphericalEnd.theta-this._spherical.theta,e=this._sphericalEnd.phi-this._spherical.phi,s=this._sphericalEnd.radius-this._spherical.radius,n=br.subVectors(this._targetEnd,this._target),h=Cr.subVectors(this._focalOffsetEnd,this._focalOffset),f=this._zoomEnd-this._zoom;if(at(i))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const d=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=je(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,d,1/0,t),this._needsUpdate=!0}if(at(e))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const d=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=je(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,d,1/0,t),this._needsUpdate=!0}if(at(s))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const d=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=je(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,d,this.maxSpeed,t),this._needsUpdate=!0}if(at(n.x)&&at(n.y)&&at(n.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const d=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;Or(this._target,this._targetEnd,this._targetVelocity,d,this.maxSpeed,t,this._target),this._needsUpdate=!0}if(at(h.x)&&at(h.y)&&at(h.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const d=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;Or(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,d,this.maxSpeed,t,this._focalOffset),this._needsUpdate=!0}if(at(f))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const d=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=je(this._zoom,this._zoomEnd,this._zoomVelocity,d,1/0,t)}if(this.dollyToCursor){if(Jt(this._camera)&&this._changedDolly!==0){const d=this._spherical.radius-this._lastDistance,p=this._camera,b=this._getCameraDirection(be),V=j.copy(b).cross(p.up).normalize();V.lengthSq()===0&&(V.x=1);const z=it.crossVectors(V,b),Z=this._sphericalEnd.radius*Math.tan(p.getEffectiveFOV()*Te*.5),K=(this._sphericalEnd.radius-d-this._sphericalEnd.radius)/this._sphericalEnd.radius,$=ae.copy(this._targetEnd).add(V.multiplyScalar(this._dollyControlCoord.x*Z*p.aspect)).add(z.multiplyScalar(this._dollyControlCoord.y*Z)),c=j.copy(this._targetEnd).lerp($,K),x=this._lastDollyDirection===ne.IN&&this._spherical.radius<=this.minDistance,R=this._lastDollyDirection===ne.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(x||R)){this._sphericalEnd.radius-=d,this._spherical.radius-=d;const A=it.copy(b).multiplyScalar(-d);c.add(A)}this._boundary.clampPoint(c,c);const U=it.subVectors(c,this._targetEnd);this._targetEnd.copy(c),this._target.add(U),this._changedDolly-=d,at(this._changedDolly)&&(this._changedDolly=0)}else if(Wt(this._camera)&&this._changedZoom!==0){const d=this._zoom-this._lastZoom,p=this._camera,b=j.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(p.near+p.far)/(p.near-p.far)).unproject(p),V=it.set(0,0,-1).applyQuaternion(p.quaternion),z=ae.copy(b).add(V.multiplyScalar(-b.dot(p.up))),q=-(this._zoom-d-this._zoom)/this._zoom,K=this._getCameraDirection(be),$=this._targetEnd.dot(K),c=j.copy(this._targetEnd).lerp(z,q),x=c.dot(K),R=K.multiplyScalar(x-$);c.sub(R),this._boundary.clampPoint(c,c);const U=it.subVectors(c,this._targetEnd);this._targetEnd.copy(c),this._target.add(U),this._changedZoom-=d,at(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);const o=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,o),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!at(this._focalOffset.x)||!at(this._focalOffset.y)||!at(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),kt.setFromMatrixColumn(this._camera.matrix,0),It.setFromMatrixColumn(this._camera.matrix,1),qt.setFromMatrixColumn(this._camera.matrix,2),kt.multiplyScalar(this._focalOffset.x),It.multiplyScalar(-this._focalOffset.y),qt.multiplyScalar(this._focalOffset.z),j.copy(kt).add(It).add(qt),this._camera.position.add(j)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),j.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const v=this._needsUpdate;return v&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):v?(this.dispatchEvent({type:"update"}),at(i,this.restThreshold)&&at(e,this.restThreshold)&&at(s,this.restThreshold)&&at(n.x,this.restThreshold)&&at(n.y,this.restThreshold)&&at(n.z,this.restThreshold)&&at(h.x,this.restThreshold)&&at(h.y,this.restThreshold)&&at(h.z,this.restThreshold)&&at(f,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!v&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=v,this._needsUpdate=!1,v}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:Oe(this.maxDistance),minZoom:this.minZoom,maxZoom:Oe(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:Oe(this.maxPolarAngle),minAzimuthAngle:Oe(this.minAzimuthAngle),maxAzimuthAngle:Oe(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:j.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(t,i=!1){const e=JSON.parse(t);this.enabled=e.enabled,this.minDistance=e.minDistance,this.maxDistance=we(e.maxDistance),this.minZoom=e.minZoom,this.maxZoom=we(e.maxZoom),this.minPolarAngle=e.minPolarAngle,this.maxPolarAngle=we(e.maxPolarAngle),this.minAzimuthAngle=we(e.minAzimuthAngle),this.maxAzimuthAngle=we(e.maxAzimuthAngle),this.smoothTime=e.smoothTime,this.draggingSmoothTime=e.draggingSmoothTime,this.dollySpeed=e.dollySpeed,this.truckSpeed=e.truckSpeed,this.dollyToCursor=e.dollyToCursor,this.verticalDragToForward=e.verticalDragToForward,this._target0.fromArray(e.target0),this._position0.fromArray(e.position0),this._zoom0=e.zoom0,this._focalOffset0.fromArray(e.focalOffset0),this.moveTo(e.target[0],e.target[1],e.target[2],i),Pt.setFromVector3(j.fromArray(e.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(Pt.theta,Pt.phi,i),this.dollyTo(Pt.radius,i),this.zoomTo(e.zoom,i),this.setFocalOffset(e.focalOffset[0],e.focalOffset[1],e.focalOffset[2],i),this._needsUpdate=!0}connect(t){if(this._domElement){console.warn("camera-controls is already connected.");return}t.setAttribute("data-camera-controls-version",Cs),this._addAllEventListeners(t),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(t){return t.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(t){return this._getTargetDirection(t).negate()}_findPointerById(t){return this._activePointers.find(i=>i.pointerId===t)}_findPointerByMouseButton(t){return this._activePointers.find(i=>i.mouseButton===t)}_disposePointer(t){this._activePointers.splice(this._activePointers.indexOf(t),1)}_encloseToBoundary(t,i,e){const s=i.lengthSq();if(s===0)return t;const n=it.copy(i).add(t),f=this._boundary.clampPoint(n,ae).sub(n),o=f.lengthSq();if(o===0)return t.add(i);if(o===s)return t;if(e===0)return t.add(i).add(f);{const a=1+e*o/i.dot(f);return t.add(it.copy(i).multiplyScalar(a)).add(f.multiplyScalar(1-e))}}_updateNearPlaneCorners(){if(Jt(this._camera)){const t=this._camera,i=t.near,e=t.getEffectiveFOV()*Te,s=Math.tan(e*.5)*i,n=s*t.aspect;this._nearPlaneCorners[0].set(-n,-s,0),this._nearPlaneCorners[1].set(n,-s,0),this._nearPlaneCorners[2].set(n,s,0),this._nearPlaneCorners[3].set(-n,s,0)}else if(Wt(this._camera)){const t=this._camera,i=1/t.zoom,e=t.left*i,s=t.right*i,n=t.top*i,h=t.bottom*i;this._nearPlaneCorners[0].set(e,n,0),this._nearPlaneCorners[1].set(s,n,0),this._nearPlaneCorners[2].set(s,h,0),this._nearPlaneCorners[3].set(e,h,0)}}_collisionTest(){let t=1/0;if(!(this.colliderMeshes.length>=1)||Ai(this._camera,"_collisionTest"))return t;const e=this._getTargetDirection(be);Ri.lookAt(wr,e,this._camera.up);for(let s=0;s<4;s++){const n=it.copy(this._nearPlaneCorners[s]);n.applyMatrix4(Ri);const h=ae.addVectors(this._target,n);qe.set(h,e),qe.far=this._spherical.radius+1;const f=qe.intersectObjects(this.colliderMeshes);f.length!==0&&f[0].distance<t&&(t=f[0].distance)}return t}_getClientRect(t){if(!this._domElement)return;const i=this._domElement.getBoundingClientRect();return t.x=i.left,t.y=i.top,this._viewport?(t.x+=this._viewport.x,t.y+=i.height-this._viewport.w-this._viewport.y,t.width=this._viewport.z,t.height=this._viewport.w):(t.width=i.width,t.height=i.height),t}_createOnRestPromise(t){return t?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(i=>{const e=()=>{this.removeEventListener("rest",e),i()};this.addEventListener("rest",e)}))}_addAllEventListeners(t){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(t){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(t){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(t,i=new I.Sphere){const e=i,s=e.center;le.makeEmpty(),t.traverseVisible(h=>{h.isMesh&&le.expandByObject(h)}),le.getCenter(s);let n=0;return t.traverseVisible(h=>{if(!h.isMesh)return;const f=h,o=f.geometry.clone();o.applyMatrix4(f.matrixWorld);const v=o.attributes.position;for(let d=0,p=v.count;d<p;d++)j.fromBufferAttribute(v,d),n=Math.max(n,s.distanceToSquared(j))}),e.radius=Math.sqrt(n),e}}export{Ii as C,is as F,Fs as S,Ms as a,Os as b,As as c,Ps as d,Ss as e,_r as s,Rs as t,xs as u};
