import{j as M,r as n,b as G,d as Y}from"./react-vendor-628b8af5.js";import{BrowserRouter as X,Routes as K,Route as O,Navigate as P}from"react-router-dom";import{u as E,a as V,b as J,M as F,C as Q,E as Z,c as ee,T as te,L as oe,d as ne}from"./three-vendor-47e67a30.js";import"./vendor-4df47e73.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const h of r.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}})();const D=M.Fragment,e=M.jsx,i=M.jsxs,re="_carousel_gry1r_1",se="_carouselContainer_gry1r_13",ae="_carouselItem_gry1r_21",ie="_active_gry1r_31",le="_quote_gry1r_35",ce="_author_gry1r_42",ue="_carouselControls_gry1r_47",_={carousel:re,carouselContainer:se,carouselItem:ae,active:ie,quote:le,author:ce,carouselControls:ue},he=()=>{const[a,t]=n.useState(0),s=[{quote:"MindChat has been a game-changer for my mental health. It's like having a supportive friend available 24/7.",author:"Sarah K."},{quote:"The personalized strategies have helped me cope with anxiety in ways I never thought possible.",author:"Michael R."},{quote:"As a therapist, I recommend MindChat to my clients for additional support between sessions. It's an invaluable tool.",author:"Dr. Emily Chen"}],l=()=>{t(r=>(r+1)%s.length)},o=()=>{t(r=>(r-1+s.length)%s.length)};return i("section",{id:"testimonials",className:_.carousel,children:[e("h2",{children:"What Our Users Say"}),e("div",{className:_.carouselContainer,children:s.map((r,h)=>i("div",{className:`${_.carouselItem} ${h===a?_.active:""}`,children:[i("p",{className:_.quote,children:['"',r.quote,'"']}),i("p",{className:_.author,children:["- ",r.author]})]},h))}),i("div",{className:_.carouselControls,children:[e("button",{onClick:o,children:"<"}),e("button",{onClick:l,children:">"})]})]})},de="_features_1hujf_1",fe="_featureGrid_1hujf_13",me="_featureCard_1hujf_19",ge="_icon_1hujf_32",L={features:de,featureGrid:fe,featureCard:me,icon:ge},pe=()=>{const a=[{title:"24/7 Support",description:"Access our AI chatbot anytime, anywhere for immediate mental health support.",icon:"ðŸ•’"},{title:"Personalized Strategies",description:"Receive tailored coping mechanisms based on your unique needs and experiences.",icon:"ðŸŽ¯"},{title:"Progress Tracking",description:"Monitor your mental health journey with insightful analytics and mood tracking.",icon:"ðŸ“Š"},{title:"Expert-Backed Content",description:"Benefit from resources and techniques developed by mental health professionals.",icon:"ðŸ§ "}];return i("section",{id:"features",className:L.features,children:[e("h2",{children:"Why Choose MindChat?"}),e("div",{className:L.featureGrid,children:a.map((t,s)=>i("div",{className:L.featureCard,children:[e("div",{className:L.icon,children:t.icon}),e("h3",{children:t.title}),e("p",{children:t.description})]},s))})]})},ye="_footer_iz2h7_1",_e="_content_iz2h7_7",ve="_logo_iz2h7_15",be="_footerNav_iz2h7_20",we="_social_iz2h7_26",ke="_copyright_iz2h7_32",k={footer:ye,content:_e,logo:ve,footerNav:be,social:we,copyright:ke},xe=()=>i("footer",{className:k.footer,children:[i("div",{className:k.content,children:[e("div",{className:k.logo,children:"MindChat"}),i("nav",{className:k.footerNav,children:[e("a",{href:"#features",children:"Features"}),e("a",{href:"#testimonials",children:"Testimonials"}),e("a",{href:"#privacy",children:"Privacy Policy"}),e("a",{href:"#terms",children:"Terms of Service"})]}),i("div",{className:k.social,children:[e("a",{href:"#","aria-label":"Facebook",children:"FB"}),e("a",{href:"#","aria-label":"Twitter",children:"TW"}),e("a",{href:"#","aria-label":"Instagram",children:"IG"})]})]}),e("div",{className:k.copyright,children:"Made by Swastik "})]}),Se="_header_1x4xq_1",Ce="_logo_1x4xq_10",De="_navList_1x4xq_16",N={header:Se,logo:Ce,navList:De},Te=()=>{window.location.href="http://localhost:3000/auth/google"},Le=()=>i("header",{className:N.header,children:[e("div",{className:N.logo,children:"MindChat"}),e("nav",{children:i("ul",{className:N.navList,children:[e("li",{className:"mt-2",children:e("a",{href:"#features",children:"Features"})}),e("li",{className:"mt-2",children:e("a",{href:"#testimonials",children:"Testimonials"})}),e("button",{onClick:Te,className:"ml-4 bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg",children:"Sign in with Google"})]})})]}),Ee="_hero_1ufv1_1",Ne="_content_1ufv1_13",Ie="_cta_1ufv1_53",Me="_imageWrapper_1ufv1_83",We="_heroImage_1ufv1_93",C={hero:Ee,content:Ne,cta:Ie,imageWrapper:Me,heroImage:We},Re=()=>{const[a,t]=n.useState(0),s=10,l=250;n.useEffect(()=>{const h=()=>t(window.scrollY);return window.addEventListener("scroll",h),()=>window.removeEventListener("scroll",h)},[]);const o=Math.max(0,1-(a-s)/(l-s)),r=Math.min(500,(a-s)/2);return i("section",{className:C.hero,children:[i("div",{className:C.content,style:{transform:`translateX(${r}px)`,transition:"transform 0.4s ease-out"},children:[e("h1",{children:"Your Personal Mental Health Companion"}),e("p",{children:"Experience 24/7 support, guided self-reflection, and personalized coping strategies with MindChat."}),e("button",{className:C.cta,onClick:()=>window.open("https://github.com/Swastik19Nit/Mind-Mate","_blank"),children:"Explore the Github Project"})]}),e("div",{className:C.imageWrapper,style:{transform:`translateY(${a*.5}px)`,opacity:o,transition:"opacity 0.4s ease-out, transform 0.4s ease-out"},children:e("img",{src:"/img.png",alt:"MindChat Interface",className:C.heroImage})})]})},je=()=>i(D,{children:[e(Le,{}),e(Re,{}),e(pe,{}),e(he,{}),e(xe,{})]}),Oe="http://localhost:3000",q=n.createContext(),Pe=({children:a})=>{const t=async g=>{m(!0);const y=(await(await fetch(`${Oe}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:g})})).json()).messages;l(S=>[...S,...y]),m(!1)},[s,l]=n.useState([]),[o,r]=n.useState(),[h,m]=n.useState(!1),v=()=>{l(g=>g.slice(1))};return n.useEffect(()=>{s.length>0?r(s[0]):r(null)},[s]),e(q.Provider,{value:{chat:t,message:o,onMessagePlayed:v,loading:h},children:a})},W=()=>{const a=n.useContext(q);if(!a)throw new Error("useChat must be used within a ChatProvider");return a},Fe={default:{},smile:{browInnerUp:.17,eyeSquintLeft:.4,eyeSquintRight:.44,noseSneerLeft:.1700000727403593,noseSneerRight:.14000002836874015,mouthPressLeft:.61,mouthPressRight:.41000000000000003},sad:{mouthFrownLeft:1,mouthFrownRight:1,mouthShrugLower:.78341,browInnerUp:.452,eyeSquintLeft:.72,eyeSquintRight:.75,eyeLookDownLeft:.5,eyeLookDownRight:.5,jawForward:1},angry:{browDownLeft:1,browDownRight:1,eyeSquintLeft:1,eyeSquintRight:1,jawForward:1,jawLeft:1,mouthShrugLower:1,noseSneerLeft:1,noseSneerRight:.42,eyeLookDownLeft:.16,eyeLookDownRight:.16,cheekSquintLeft:1,cheekSquintRight:1,mouthClose:.23,mouthFunnel:.63,mouthDimpleRight:1}},I={A:"viseme_PP",B:"viseme_kk",C:"viseme_I",D:"viseme_AA",E:"viseme_O",F:"viseme_U",G:"viseme_FF",H:"viseme_TH",X:"viseme_PP"};function qe(a){const{nodes:t,materials:s,scene:l}=E("/models/64f1a714fe61576b46f27ca2.glb"),{message:o,onMessagePlayed:r,chat:h}=W(),[m,v]=n.useState();n.useEffect(()=>{if(console.log(o),!o){c("Idle");return}c(o.animation),z(o.facialExpression),v(o.lipsync);const d=new Audio("data:audio/mp3;base64,"+o.audio);d.play(),$(d),d.onended=r},[o]);const{animations:g}=E("/models/animations.glb"),x=n.useRef(),{actions:y,mixer:S}=V(g,x),[b,c]=n.useState(g.find(d=>d.name==="Idle")?"Idle":g[0].name);n.useEffect(()=>(y[b].reset().fadeIn(S.stats.actions.inUse===0?0:.5).play(),()=>y[b].fadeOut(.5)),[b]);const w=(d,u,p=.1)=>{l.traverse(f=>{if(f.isSkinnedMesh&&f.morphTargetDictionary){const T=f.morphTargetDictionary[d];if(T===void 0||f.morphTargetInfluences[T]===void 0)return;f.morphTargetInfluences[T]=F.lerp(f.morphTargetInfluences[T],u,p);try{set({[d]:u})}catch{}}})},[R,j]=n.useState(!1),[B,Ge]=n.useState(!1),[A,Ye]=n.useState(!1),[H,z]=n.useState(""),[U,$]=n.useState();return J(()=>{Object.keys(t.EyeLeft.morphTargetDictionary).forEach(u=>{const p=Fe[H];u==="eyeBlinkLeft"||u==="eyeBlinkRight"||(p&&p[u]?w(u,p[u],.1):w(u,0,.1))}),w("eyeBlinkLeft",R||B?1:0,.5),w("eyeBlinkRight",R||A?1:0,.5);const d=[];if(o&&m){const u=U.currentTime;for(let p=0;p<m.mouthCues.length;p++){const f=m.mouthCues[p];if(u>=f.start&&u<=f.end){d.push(I[f.value]),w(I[f.value],1,.2);break}}}Object.values(I).forEach(u=>{d.includes(u)||w(u,0,.1)})}),n.useEffect(()=>{let d;const u=()=>{d=setTimeout(()=>{j(!0),setTimeout(()=>{j(!1),u()},200)},F.randInt(1e3,5e3))};return u(),()=>clearTimeout(d)},[]),i("group",{...a,dispose:null,ref:x,children:[e("primitive",{object:t.Hips}),e("skinnedMesh",{name:"Wolf3D_Body",geometry:t.Wolf3D_Body.geometry,material:s.Wolf3D_Body,skeleton:t.Wolf3D_Body.skeleton}),e("skinnedMesh",{name:"Wolf3D_Outfit_Bottom",geometry:t.Wolf3D_Outfit_Bottom.geometry,material:s.Wolf3D_Outfit_Bottom,skeleton:t.Wolf3D_Outfit_Bottom.skeleton}),e("skinnedMesh",{name:"Wolf3D_Outfit_Footwear",geometry:t.Wolf3D_Outfit_Footwear.geometry,material:s.Wolf3D_Outfit_Footwear,skeleton:t.Wolf3D_Outfit_Footwear.skeleton}),e("skinnedMesh",{name:"Wolf3D_Outfit_Top",geometry:t.Wolf3D_Outfit_Top.geometry,material:s.Wolf3D_Outfit_Top,skeleton:t.Wolf3D_Outfit_Top.skeleton}),e("skinnedMesh",{name:"Wolf3D_Hair",geometry:t.Wolf3D_Hair.geometry,material:s.Wolf3D_Hair,skeleton:t.Wolf3D_Hair.skeleton}),e("skinnedMesh",{name:"EyeLeft",geometry:t.EyeLeft.geometry,material:s.Wolf3D_Eye,skeleton:t.EyeLeft.skeleton,morphTargetDictionary:t.EyeLeft.morphTargetDictionary,morphTargetInfluences:t.EyeLeft.morphTargetInfluences}),e("skinnedMesh",{name:"EyeRight",geometry:t.EyeRight.geometry,material:s.Wolf3D_Eye,skeleton:t.EyeRight.skeleton,morphTargetDictionary:t.EyeRight.morphTargetDictionary,morphTargetInfluences:t.EyeRight.morphTargetInfluences}),e("skinnedMesh",{name:"Wolf3D_Head",geometry:t.Wolf3D_Head.geometry,material:s.Wolf3D_Skin,skeleton:t.Wolf3D_Head.skeleton,morphTargetDictionary:t.Wolf3D_Head.morphTargetDictionary,morphTargetInfluences:t.Wolf3D_Head.morphTargetInfluences}),e("skinnedMesh",{name:"Wolf3D_Teeth",geometry:t.Wolf3D_Teeth.geometry,material:s.Wolf3D_Teeth,skeleton:t.Wolf3D_Teeth.skeleton,morphTargetDictionary:t.Wolf3D_Teeth.morphTargetDictionary,morphTargetInfluences:t.Wolf3D_Teeth.morphTargetInfluences})]})}E.preload("/models/64f1a714fe61576b46f27ca2.glb");E.preload("/models/animations.glb");const Be=a=>{const{loading:t}=W(),[s,l]=n.useState("");return n.useEffect(()=>{if(t){const o=setInterval(()=>{l(r=>r.length>2?".":r+".")},800);return()=>clearInterval(o)}else l("")},[t]),t?e("group",{...a,children:i(te,{fontSize:.14,anchorX:"left",anchorY:"bottom",children:[s,e("meshBasicMaterial",{attach:"material",color:"black"})]})}):null},Ae=()=>{const a=n.useRef();return n.useEffect(()=>{a.current.setLookAt(0,2,5,0,1.5,0,!1)},[]),i(D,{children:[e(Q,{ref:a}),e(Z,{preset:"sunset"}),e(n.Suspense,{children:e(Be,{"position-y":1.75,"position-x":-.02})}),e(qe,{}),e(ee,{opacity:.7})]})},He=()=>{const a=n.useRef();return n.useEffect(()=>{const s={video:!0};async function l(){try{const o=await navigator.mediaDevices.getUserMedia(s);a.current&&(a.current.srcObject=o)}catch(o){console.error("Error accessing user media:",o)}}return l(),()=>{a.current.srcObject&&a.current.srcObject.getTracks().forEach(h=>{h.stop()})}},[]),i(D,{children:[e("video",{ref:a,autoPlay:!0,playsInline:!0}),e("h1",{style:{textAlign:"center",color:"white"},children:"Happy"})]})},ze=({hidden:a})=>{const t=n.useRef(),{chat:s,loading:l,message:o}=W(),[r,h]=n.useState(null),[m,v]=n.useState(!1),g=()=>{const c=t.current.value;!l&&!o&&(s(c),t.current.value="")};if(a)return null;const x=()=>{localStorage.removeItem("user"),h(null),fetch("http://localhost:3000/logout",{credentials:"include"}).then(()=>{window.location.reload()}).catch(c=>console.error("Logout failed:",c))},[y,S]=n.useState(!1),b=n.useRef();return n.useEffect(()=>{fetch("http://localhost:3000/user",{credentials:"include"}).then(c=>c.json()).then(c=>{h(c)}).catch(c=>console.error("Error fetching user:",c))},[]),i(D,{children:[i("div",{className:"fixed top-0 left-0 right-0 bottom-0 z-10 flex justify-between p-4 flex-col pointer-events-none",children:[i("div",{className:"self-start backdrop-blur-md bg-white bg-opacity-50 p-4 rounded-lg flex items-center justify-between",children:[i("div",{children:[e("h1",{className:"font-black text-xl",children:"Mental Health Counselor"}),e("p",{children:"Your Path to Mental Wellness"})]}),r&&i("div",{className:"relative ml-4 pointer-events-auto",children:[" ",r.picture?e("img",{src:r.picture,alt:"Profile",className:"z-10 w-10 h-10 rounded-full cursor-pointer",onClick:()=>v(!m),onError:c=>{c.target.onerror=null,c.target.src=""}}):e("div",{className:"w-10 h-10 flex items-center justify-center bg-gray-300 text-white rounded-full cursor-pointer",onClick:()=>v(!m),children:r.name?r.name.charAt(0).toUpperCase():"?"}),m&&e("div",{className:"absolute right-0 mt-2 w-32 bg-white border rounded-lg shadow-lg z-50",children:e("button",{onClick:x,className:"block w-full px-4 py-2 text-left hover:bg-gray-200",children:"Logout"})})]})]}),e("div",{className:"w-full flex flex-col items-end justify-center gap-4",children:e("button",{onClick:()=>{const c=b.current;c.style.display=y?"none":"block",S(!y)},className:"pointer-events-auto bg-pink-500 hover:bg-pink-600 text-white p-4 rounded-md",children:"ðŸ“· Toggle Camera"})}),i("div",{className:"flex items-center gap-2 pointer-events-auto max-w-screen-sm w-full mx-auto",children:[e("input",{className:"w-full placeholder:text-gray-800 placeholder:italic p-4 rounded-md bg-opacity-100 bg-white",placeholder:"Type a message...",ref:t,onKeyDown:c=>{c.key==="Enter"&&g()}}),e("button",{disabled:l||o,onClick:g,className:`bg-blue-500 hover:bg-blue-600 text-white p-4 px-10 font-semibold uppercase rounded-md ${l||o?"cursor-not-allowed opacity-30":""}`,children:"Send"})]})]}),e("div",{id:"Vid",ref:b,children:e(He,{})})]})};function Ue(){return i(D,{children:[e(oe,{}),e(ze,{}),e(ne,{shadows:!0,camera:{position:[0,0,0],fov:12},children:e(Ae,{})})]})}function $e(){const[a,t]=n.useState(null),[s,l]=n.useState(!0);return n.useEffect(()=>{fetch("http://localhost:3000/auth/check",{credentials:"include"}).then(o=>o.json()).then(o=>{o.user&&t(o.user)}).catch(o=>console.error(o)).finally(()=>l(!1))},[]),s?e("div",{children:"Loading..."}):e(X,{children:i(K,{children:[e(O,{path:"/",element:a?e(P,{to:"/app"}):e(je,{})}),e(O,{path:"/app",element:a?e(Ue,{}):e(P,{to:"/"})})]})})}G.createRoot(document.getElementById("root")).render(e(Y.StrictMode,{children:e(Pe,{children:e($e,{})})}));
