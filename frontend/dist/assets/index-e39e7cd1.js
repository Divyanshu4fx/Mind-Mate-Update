import{r as a,u as N,a as X,b as K,M as P,C as J,E as V,c as Q,T as Z,L as ee,d as te,e as oe,R as re}from"./three-vendor-38ebdcda.js";import{BrowserRouter as ne,Routes as se,Route as F,Navigate as q}from"react-router-dom";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}})();var T={},ae={get exports(){return T},set exports(r){T=r}},I={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ie=a,le=Symbol.for("react.element"),ce=Symbol.for("react.fragment"),ue=Object.prototype.hasOwnProperty,he=ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,de={key:!0,ref:!0,__self:!0,__source:!0};function B(r,t,s){var i,o={},n=null,c=null;s!==void 0&&(n=""+s),t.key!==void 0&&(n=""+t.key),t.ref!==void 0&&(c=t.ref);for(i in t)ue.call(t,i)&&!de.hasOwnProperty(i)&&(o[i]=t[i]);if(r&&r.defaultProps)for(i in t=r.defaultProps,t)o[i]===void 0&&(o[i]=t[i]);return{$$typeof:le,type:r,key:n,ref:c,props:o,_owner:he.current}}I.Fragment=ce;I.jsx=B;I.jsxs=B;(function(r){r.exports=I})(ae);const D=T.Fragment,e=T.jsx,l=T.jsxs,fe="_carousel_gry1r_1",me="_carouselContainer_gry1r_13",pe="_carouselItem_gry1r_21",ge="_active_gry1r_31",ye="_quote_gry1r_35",_e="_author_gry1r_42",ve="_carouselControls_gry1r_47",_={carousel:fe,carouselContainer:me,carouselItem:pe,active:ge,quote:ye,author:_e,carouselControls:ve},be=()=>{const[r,t]=a.useState(0),s=[{quote:"MindChat has been a game-changer for my mental health. It's like having a supportive friend available 24/7.",author:"Sarah K."},{quote:"The personalized strategies have helped me cope with anxiety in ways I never thought possible.",author:"Michael R."},{quote:"As a therapist, I recommend MindChat to my clients for additional support between sessions. It's an invaluable tool.",author:"Dr. Emily Chen"}],i=()=>{t(n=>(n+1)%s.length)},o=()=>{t(n=>(n-1+s.length)%s.length)};return l("section",{id:"testimonials",className:_.carousel,children:[e("h2",{children:"What Our Users Say"}),e("div",{className:_.carouselContainer,children:s.map((n,c)=>l("div",{className:`${_.carouselItem} ${c===r?_.active:""}`,children:[l("p",{className:_.quote,children:['"',n.quote,'"']}),l("p",{className:_.author,children:["- ",n.author]})]},c))}),l("div",{className:_.carouselControls,children:[e("button",{onClick:o,children:"<"}),e("button",{onClick:i,children:">"})]})]})},we="_features_1hujf_1",ke="_featureGrid_1hujf_13",xe="_featureCard_1hujf_19",Se="_icon_1hujf_32",L={features:we,featureGrid:ke,featureCard:xe,icon:Se},Ce=()=>{const r=[{title:"24/7 Support",description:"Access our AI chatbot anytime, anywhere for immediate mental health support.",icon:"ðŸ•’"},{title:"Personalized Strategies",description:"Receive tailored coping mechanisms based on your unique needs and experiences.",icon:"ðŸŽ¯"},{title:"Progress Tracking",description:"Monitor your mental health journey with insightful analytics and mood tracking.",icon:"ðŸ“Š"},{title:"Expert-Backed Content",description:"Benefit from resources and techniques developed by mental health professionals.",icon:"ðŸ§ "}];return l("section",{id:"features",className:L.features,children:[e("h2",{children:"Why Choose MindChat?"}),e("div",{className:L.featureGrid,children:r.map((t,s)=>l("div",{className:L.featureCard,children:[e("div",{className:L.icon,children:t.icon}),e("h3",{children:t.title}),e("p",{children:t.description})]},s))})]})},Te="_footer_iz2h7_1",De="_content_iz2h7_7",Ee="_logo_iz2h7_15",Le="_footerNav_iz2h7_20",Ne="_social_iz2h7_26",Ie="_copyright_iz2h7_32",k={footer:Te,content:De,logo:Ee,footerNav:Le,social:Ne,copyright:Ie},We=()=>l("footer",{className:k.footer,children:[l("div",{className:k.content,children:[e("div",{className:k.logo,children:"MindChat"}),l("nav",{className:k.footerNav,children:[e("a",{href:"#features",children:"Features"}),e("a",{href:"#testimonials",children:"Testimonials"}),e("a",{href:"#privacy",children:"Privacy Policy"}),e("a",{href:"#terms",children:"Terms of Service"})]}),l("div",{className:k.social,children:[e("a",{href:"#","aria-label":"Facebook",children:"FB"}),e("a",{href:"#","aria-label":"Twitter",children:"TW"}),e("a",{href:"#","aria-label":"Instagram",children:"IG"})]})]}),e("div",{className:k.copyright,children:"Made by Swastik "})]}),Me="_header_1x4xq_1",Re="_logo_1x4xq_10",Oe="_navList_1x4xq_16",W={header:Me,logo:Re,navList:Oe},je=()=>{window.location.href="http://localhost:3000/auth/google"},Pe=()=>l("header",{className:W.header,children:[e("div",{className:W.logo,children:"MindChat"}),e("nav",{children:l("ul",{className:W.navList,children:[e("li",{className:"mt-2",children:e("a",{href:"#features",children:"Features"})}),e("li",{className:"mt-2",children:e("a",{href:"#testimonials",children:"Testimonials"})}),e("button",{onClick:je,className:"ml-4 bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg",children:"Sign in with Google"})]})})]}),Fe="_hero_1ufv1_1",qe="_content_1ufv1_13",Be="_cta_1ufv1_53",Ae="_imageWrapper_1ufv1_83",He="_heroImage_1ufv1_93",C={hero:Fe,content:qe,cta:Be,imageWrapper:Ae,heroImage:He},Ue=()=>{const[r,t]=a.useState(0),s=10,i=250;a.useEffect(()=>{const c=()=>t(window.scrollY);return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[]);const o=Math.max(0,1-(r-s)/(i-s)),n=Math.min(500,(r-s)/2);return l("section",{className:C.hero,children:[l("div",{className:C.content,style:{transform:`translateX(${n}px)`,transition:"transform 0.4s ease-out"},children:[e("h1",{children:"Your Personal Mental Health Companion"}),e("p",{children:"Experience 24/7 support, guided self-reflection, and personalized coping strategies with MindChat."}),e("button",{className:C.cta,onClick:()=>window.open("https://github.com/Swastik19Nit/Mind-Mate","_blank"),children:"Explore the Github Project"})]}),e("div",{className:C.imageWrapper,style:{transform:`translateY(${r*.5}px)`,opacity:o,transition:"opacity 0.4s ease-out, transform 0.4s ease-out"},children:e("img",{src:"/img.png",alt:"MindChat Interface",className:C.heroImage})})]})},$e=()=>l(D,{children:[e(Pe,{}),e(Ue,{}),e(Ce,{}),e(be,{}),e(We,{})]}),ze="http://localhost:3000",A=a.createContext(),Ge=({children:r})=>{const t=async p=>{m(!0);const y=(await(await fetch(`${ze}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:p})})).json()).messages;i(S=>[...S,...y]),m(!1)},[s,i]=a.useState([]),[o,n]=a.useState(),[c,m]=a.useState(!1),v=()=>{i(p=>p.slice(1))};return a.useEffect(()=>{s.length>0?n(s[0]):n(null)},[s]),e(A.Provider,{value:{chat:t,message:o,onMessagePlayed:v,loading:c},children:r})},R=()=>{const r=a.useContext(A);if(!r)throw new Error("useChat must be used within a ChatProvider");return r},Ye={default:{},smile:{browInnerUp:.17,eyeSquintLeft:.4,eyeSquintRight:.44,noseSneerLeft:.1700000727403593,noseSneerRight:.14000002836874015,mouthPressLeft:.61,mouthPressRight:.41000000000000003},sad:{mouthFrownLeft:1,mouthFrownRight:1,mouthShrugLower:.78341,browInnerUp:.452,eyeSquintLeft:.72,eyeSquintRight:.75,eyeLookDownLeft:.5,eyeLookDownRight:.5,jawForward:1},angry:{browDownLeft:1,browDownRight:1,eyeSquintLeft:1,eyeSquintRight:1,jawForward:1,jawLeft:1,mouthShrugLower:1,noseSneerLeft:1,noseSneerRight:.42,eyeLookDownLeft:.16,eyeLookDownRight:.16,cheekSquintLeft:1,cheekSquintRight:1,mouthClose:.23,mouthFunnel:.63,mouthDimpleRight:1}},M={A:"viseme_PP",B:"viseme_kk",C:"viseme_I",D:"viseme_AA",E:"viseme_O",F:"viseme_U",G:"viseme_FF",H:"viseme_TH",X:"viseme_PP"};function Xe(r){const{nodes:t,materials:s,scene:i}=N("/models/64f1a714fe61576b46f27ca2.glb"),{message:o,onMessagePlayed:n,chat:c}=R(),[m,v]=a.useState();a.useEffect(()=>{if(console.log(o),!o){u("Idle");return}u(o.animation),z(o.facialExpression),v(o.lipsync);const d=new Audio("data:audio/mp3;base64,"+o.audio);d.play(),Y(d),d.onended=n},[o]);const{animations:p}=N("/models/animations.glb"),x=a.useRef(),{actions:y,mixer:S}=X(p,x),[b,u]=a.useState(p.find(d=>d.name==="Idle")?"Idle":p[0].name);a.useEffect(()=>(y[b].reset().fadeIn(S.stats.actions.inUse===0?0:.5).play(),()=>y[b].fadeOut(.5)),[b]);const w=(d,h,g=.1)=>{i.traverse(f=>{if(f.isSkinnedMesh&&f.morphTargetDictionary){const E=f.morphTargetDictionary[d];if(E===void 0||f.morphTargetInfluences[E]===void 0)return;f.morphTargetInfluences[E]=P.lerp(f.morphTargetInfluences[E],h,g);try{set({[d]:h})}catch{}}})},[O,j]=a.useState(!1),[H,tt]=a.useState(!1),[U,ot]=a.useState(!1),[$,z]=a.useState(""),[G,Y]=a.useState();return K(()=>{Object.keys(t.EyeLeft.morphTargetDictionary).forEach(h=>{const g=Ye[$];h==="eyeBlinkLeft"||h==="eyeBlinkRight"||(g&&g[h]?w(h,g[h],.1):w(h,0,.1))}),w("eyeBlinkLeft",O||H?1:0,.5),w("eyeBlinkRight",O||U?1:0,.5);const d=[];if(o&&m){const h=G.currentTime;for(let g=0;g<m.mouthCues.length;g++){const f=m.mouthCues[g];if(h>=f.start&&h<=f.end){d.push(M[f.value]),w(M[f.value],1,.2);break}}}Object.values(M).forEach(h=>{d.includes(h)||w(h,0,.1)})}),a.useEffect(()=>{let d;const h=()=>{d=setTimeout(()=>{j(!0),setTimeout(()=>{j(!1),h()},200)},P.randInt(1e3,5e3))};return h(),()=>clearTimeout(d)},[]),l("group",{...r,dispose:null,ref:x,children:[e("primitive",{object:t.Hips}),e("skinnedMesh",{name:"Wolf3D_Body",geometry:t.Wolf3D_Body.geometry,material:s.Wolf3D_Body,skeleton:t.Wolf3D_Body.skeleton}),e("skinnedMesh",{name:"Wolf3D_Outfit_Bottom",geometry:t.Wolf3D_Outfit_Bottom.geometry,material:s.Wolf3D_Outfit_Bottom,skeleton:t.Wolf3D_Outfit_Bottom.skeleton}),e("skinnedMesh",{name:"Wolf3D_Outfit_Footwear",geometry:t.Wolf3D_Outfit_Footwear.geometry,material:s.Wolf3D_Outfit_Footwear,skeleton:t.Wolf3D_Outfit_Footwear.skeleton}),e("skinnedMesh",{name:"Wolf3D_Outfit_Top",geometry:t.Wolf3D_Outfit_Top.geometry,material:s.Wolf3D_Outfit_Top,skeleton:t.Wolf3D_Outfit_Top.skeleton}),e("skinnedMesh",{name:"Wolf3D_Hair",geometry:t.Wolf3D_Hair.geometry,material:s.Wolf3D_Hair,skeleton:t.Wolf3D_Hair.skeleton}),e("skinnedMesh",{name:"EyeLeft",geometry:t.EyeLeft.geometry,material:s.Wolf3D_Eye,skeleton:t.EyeLeft.skeleton,morphTargetDictionary:t.EyeLeft.morphTargetDictionary,morphTargetInfluences:t.EyeLeft.morphTargetInfluences}),e("skinnedMesh",{name:"EyeRight",geometry:t.EyeRight.geometry,material:s.Wolf3D_Eye,skeleton:t.EyeRight.skeleton,morphTargetDictionary:t.EyeRight.morphTargetDictionary,morphTargetInfluences:t.EyeRight.morphTargetInfluences}),e("skinnedMesh",{name:"Wolf3D_Head",geometry:t.Wolf3D_Head.geometry,material:s.Wolf3D_Skin,skeleton:t.Wolf3D_Head.skeleton,morphTargetDictionary:t.Wolf3D_Head.morphTargetDictionary,morphTargetInfluences:t.Wolf3D_Head.morphTargetInfluences}),e("skinnedMesh",{name:"Wolf3D_Teeth",geometry:t.Wolf3D_Teeth.geometry,material:s.Wolf3D_Teeth,skeleton:t.Wolf3D_Teeth.skeleton,morphTargetDictionary:t.Wolf3D_Teeth.morphTargetDictionary,morphTargetInfluences:t.Wolf3D_Teeth.morphTargetInfluences})]})}N.preload("/models/64f1a714fe61576b46f27ca2.glb");N.preload("/models/animations.glb");const Ke=r=>{const{loading:t}=R(),[s,i]=a.useState("");return a.useEffect(()=>{if(t){const o=setInterval(()=>{i(n=>n.length>2?".":n+".")},800);return()=>clearInterval(o)}else i("")},[t]),t?e("group",{...r,children:l(Z,{fontSize:.14,anchorX:"left",anchorY:"bottom",children:[s,e("meshBasicMaterial",{attach:"material",color:"black"})]})}):null},Je=()=>{const r=a.useRef();return a.useEffect(()=>{r.current.setLookAt(0,2,5,0,1.5,0,!1)},[]),l(D,{children:[e(J,{ref:r}),e(V,{preset:"sunset"}),e(a.Suspense,{children:e(Ke,{"position-y":1.75,"position-x":-.02})}),e(Xe,{}),e(Q,{opacity:.7})]})},Ve=()=>{const r=a.useRef();return a.useEffect(()=>{const s={video:!0};async function i(){try{const o=await navigator.mediaDevices.getUserMedia(s);r.current&&(r.current.srcObject=o)}catch(o){console.error("Error accessing user media:",o)}}return i(),()=>{r.current.srcObject&&r.current.srcObject.getTracks().forEach(c=>{c.stop()})}},[]),l(D,{children:[e("video",{ref:r,autoPlay:!0,playsInline:!0}),e("h1",{style:{textAlign:"center",color:"white"},children:"Happy"})]})},Qe=({hidden:r})=>{const t=a.useRef(),{chat:s,loading:i,message:o}=R(),[n,c]=a.useState(null),[m,v]=a.useState(!1),p=()=>{const u=t.current.value;!i&&!o&&(s(u),t.current.value="")};if(r)return null;const x=()=>{localStorage.removeItem("user"),c(null),fetch("http://localhost:3000/logout",{credentials:"include"}).then(()=>{window.location.reload()}).catch(u=>console.error("Logout failed:",u))},[y,S]=a.useState(!1),b=a.useRef();return a.useEffect(()=>{fetch("http://localhost:3000/user",{credentials:"include"}).then(u=>u.json()).then(u=>{c(u)}).catch(u=>console.error("Error fetching user:",u))},[]),l(D,{children:[l("div",{className:"fixed top-0 left-0 right-0 bottom-0 z-10 flex justify-between p-4 flex-col pointer-events-none",children:[l("div",{className:"self-start backdrop-blur-md bg-white bg-opacity-50 p-4 rounded-lg flex items-center justify-between",children:[l("div",{children:[e("h1",{className:"font-black text-xl",children:"Mental Health Counselor"}),e("p",{children:"Your Path to Mental Wellness"})]}),n&&l("div",{className:"relative ml-4 pointer-events-auto",children:[" ",n.picture?e("img",{src:n.picture,alt:"Profile",className:"z-10 w-10 h-10 rounded-full cursor-pointer",onClick:()=>v(!m),onError:u=>{u.target.onerror=null,u.target.src=""}}):e("div",{className:"w-10 h-10 flex items-center justify-center bg-gray-300 text-white rounded-full cursor-pointer",onClick:()=>v(!m),children:n.name?n.name.charAt(0).toUpperCase():"?"}),m&&e("div",{className:"absolute right-0 mt-2 w-32 bg-white border rounded-lg shadow-lg z-50",children:e("button",{onClick:x,className:"block w-full px-4 py-2 text-left hover:bg-gray-200",children:"Logout"})})]})]}),e("div",{className:"w-full flex flex-col items-end justify-center gap-4",children:e("button",{onClick:()=>{const u=b.current;u.style.display=y?"none":"block",S(!y)},className:"pointer-events-auto bg-pink-500 hover:bg-pink-600 text-white p-4 rounded-md",children:"ðŸ“· Toggle Camera"})}),l("div",{className:"flex items-center gap-2 pointer-events-auto max-w-screen-sm w-full mx-auto",children:[e("input",{className:"w-full placeholder:text-gray-800 placeholder:italic p-4 rounded-md bg-opacity-100 bg-white",placeholder:"Type a message...",ref:t,onKeyDown:u=>{u.key==="Enter"&&p()}}),e("button",{disabled:i||o,onClick:p,className:`bg-blue-500 hover:bg-blue-600 text-white p-4 px-10 font-semibold uppercase rounded-md ${i||o?"cursor-not-allowed opacity-30":""}`,children:"Send"})]})]}),e("div",{id:"Vid",ref:b,children:e(Ve,{})})]})};function Ze(){return l(D,{children:[e(ee,{}),e(Qe,{}),e(te,{shadows:!0,camera:{position:[0,0,0],fov:12},children:e(Je,{})})]})}function et(){const[r,t]=a.useState(null),[s,i]=a.useState(!0);return a.useEffect(()=>{fetch("http://localhost:3000/auth/check",{credentials:"include"}).then(o=>o.json()).then(o=>{o.user&&t(o.user)}).catch(o=>console.error(o)).finally(()=>i(!1))},[]),s?e("div",{children:"Loading..."}):e(ne,{children:l(se,{children:[e(F,{path:"/",element:r?e(q,{to:"/app"}):e($e,{})}),e(F,{path:"/app",element:r?e(Ze,{}):e(q,{to:"/"})})]})})}oe.createRoot(document.getElementById("root")).render(e(re.StrictMode,{children:e(Ge,{children:e(et,{})})}));
