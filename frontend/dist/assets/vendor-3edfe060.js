import{r as vt}from"./react-vendor-7f006351.js";var Bi={};Object.defineProperty(Bi,"__esModule",{value:!0});Bi.parse=rn;Bi.serialize=nn;const Qr=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,Jr=/^[\u0021-\u003A\u003C-\u007E]*$/,qr=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,$r=/^[\u0020-\u003A\u003D-\u007E]*$/,tn=Object.prototype.toString,en=(()=>{const r=function(){};return r.prototype=Object.create(null),r})();function rn(r,t){const e=new en,i=r.length;if(i<2)return e;const n=(t==null?void 0:t.decode)||sn;let s=0;do{const l=r.indexOf("=",s);if(l===-1)break;const f=r.indexOf(";",s),o=f===-1?i:f;if(l>o){s=r.lastIndexOf(";",l-1)+1;continue}const a=_r(r,s,l),v=dr(r,l,a),d=r.slice(a,v);if(e[d]===void 0){let m=_r(r,l+1,o),w=dr(r,o,m);const I=n(r.slice(m,w));e[d]=I}s=o+1}while(s<i);return e}function _r(r,t,e){do{const i=r.charCodeAt(t);if(i!==32&&i!==9)return t}while(++t<e);return e}function dr(r,t,e){for(;t>e;){const i=r.charCodeAt(--t);if(i!==32&&i!==9)return t+1}return e}function nn(r,t,e){const i=(e==null?void 0:e.encode)||encodeURIComponent;if(!Qr.test(r))throw new TypeError(`argument name is invalid: ${r}`);const n=i(t);if(!Jr.test(n))throw new TypeError(`argument val is invalid: ${t}`);let s=r+"="+n;if(!e)return s;if(e.maxAge!==void 0){if(!Number.isInteger(e.maxAge))throw new TypeError(`option maxAge is invalid: ${e.maxAge}`);s+="; Max-Age="+e.maxAge}if(e.domain){if(!qr.test(e.domain))throw new TypeError(`option domain is invalid: ${e.domain}`);s+="; Domain="+e.domain}if(e.path){if(!$r.test(e.path))throw new TypeError(`option path is invalid: ${e.path}`);s+="; Path="+e.path}if(e.expires){if(!on(e.expires)||!Number.isFinite(e.expires.valueOf()))throw new TypeError(`option expires is invalid: ${e.expires}`);s+="; Expires="+e.expires.toUTCString()}if(e.httpOnly&&(s+="; HttpOnly"),e.secure&&(s+="; Secure"),e.partitioned&&(s+="; Partitioned"),e.priority)switch(typeof e.priority=="string"?e.priority.toLowerCase():void 0){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${e.priority}`)}if(e.sameSite)switch(typeof e.sameSite=="string"?e.sameSite.toLowerCase():e.sameSite){case!0:case"strict":s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"none":s+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${e.sameSite}`)}return s}function sn(r){if(r.indexOf("%")===-1)return r;try{return decodeURIComponent(r)}catch{return r}}function on(r){return tn.call(r)==="[object Date]"}function an(r){let t;const e=new Set,i=(a,v)=>{const d=typeof a=="function"?a(t):a;if(d!==t){const m=t;t=v?d:Object.assign({},t,d),e.forEach(w=>w(t,m))}},n=()=>t,s=(a,v=n,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let m=v(t);function w(){const I=v(t);if(!d(m,I)){const z=m;a(m=I,z)}}return e.add(w),()=>e.delete(w)},o={setState:i,getState:n,subscribe:(a,v,d)=>v||d?s(a,v,d):(e.add(a),()=>e.delete(a)),destroy:()=>e.clear()};return t=r(i,n,o),o}const ln=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),mr=ln?vt.useEffect:vt.useLayoutEffect;function Vn(r){const t=typeof r=="function"?an(r):r,e=(i=t.getState,n=Object.is)=>{const[,s]=vt.useReducer(Z=>Z+1,0),l=t.getState(),f=vt.useRef(l),o=vt.useRef(i),a=vt.useRef(n),v=vt.useRef(!1),d=vt.useRef();d.current===void 0&&(d.current=i(l));let m,w=!1;(f.current!==l||o.current!==i||a.current!==n||v.current)&&(m=i(l),w=!n(d.current,m)),mr(()=>{w&&(d.current=m),f.current=l,o.current=i,a.current=n,v.current=!1});const I=vt.useRef(l);mr(()=>{const Z=()=>{try{const j=t.getState(),$=o.current(j);a.current(d.current,$)||(f.current=j,d.current=$,s())}catch{v.current=!0,s()}},q=t.subscribe(Z);return t.getState()!==I.current&&Z(),q},[]);const z=w?m:d.current;return vt.useDebugValue(z),z};return Object.assign(e,t),e[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[e,t];return{next(){const n=i.length<=0;return{value:i.shift(),done:n}}}},e}var pr={},hn={get exports(){return pr},set exports(r){pr=r}},Pr={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function t(C,_){var p=C.length;C.push(_);t:for(;0<p;){var h=p-1>>>1,g=C[h];if(0<n(g,_))C[h]=_,C[p]=g,p=h;else break t}}function e(C){return C.length===0?null:C[0]}function i(C){if(C.length===0)return null;var _=C[0],p=C.pop();if(p!==_){C[0]=p;t:for(var h=0,g=C.length,R=g>>>1;h<R;){var b=2*(h+1)-1,y=C[b],L=b+1,E=C[L];if(0>n(y,p))L<g&&0>n(E,y)?(C[h]=E,C[L]=p,h=L):(C[h]=y,C[b]=p,h=b);else if(L<g&&0>n(E,p))C[h]=E,C[L]=p,h=L;else break t}}return _}function n(C,_){var p=C.sortIndex-_.sortIndex;return p!==0?p:C.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var l=Date,f=l.now();r.unstable_now=function(){return l.now()-f}}var o=[],a=[],v=1,d=null,m=3,w=!1,I=!1,z=!1,Z=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(C){for(var _=e(a);_!==null;){if(_.callback===null)i(a);else if(_.startTime<=C)i(a),_.sortIndex=_.expirationTime,t(o,_);else break;_=e(a)}}function c(C){if(z=!1,$(C),!I)if(e(o)!==null)I=!0,Et(P);else{var _=e(a);_!==null&&Bt(c,_.startTime-C)}}function P(C,_){I=!1,z&&(z=!1,q(U),U=-1),w=!0;var p=m;try{for($(_),d=e(o);d!==null&&(!(d.expirationTime>_)||C&&!lt());){var h=d.callback;if(typeof h=="function"){d.callback=null,m=d.priorityLevel;var g=h(d.expirationTime<=_);_=r.unstable_now(),typeof g=="function"?d.callback=g:d===e(o)&&i(o),$(_)}else i(o);d=e(o)}if(d!==null)var R=!0;else{var b=e(a);b!==null&&Bt(c,b.startTime-_),R=!1}return R}finally{d=null,m=p,w=!1}}var M=!1,A=null,U=-1,S=5,et=-1;function lt(){return!(r.unstable_now()-et<S)}function gt(){if(A!==null){var C=r.unstable_now();et=C;var _=!0;try{_=A(!0,C)}finally{_?ht():(M=!1,A=null)}}else M=!1}var ht;if(typeof j=="function")ht=function(){j(gt)};else if(typeof MessageChannel<"u"){var yt=new MessageChannel,At=yt.port2;yt.port1.onmessage=gt,ht=function(){At.postMessage(null)}}else ht=function(){Z(gt,0)};function Et(C){A=C,M||(M=!0,ht())}function Bt(C,_){U=Z(function(){C(r.unstable_now())},_)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(C){C.callback=null},r.unstable_continueExecution=function(){I||w||(I=!0,Et(P))},r.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<C?Math.floor(1e3/C):5},r.unstable_getCurrentPriorityLevel=function(){return m},r.unstable_getFirstCallbackNode=function(){return e(o)},r.unstable_next=function(C){switch(m){case 1:case 2:case 3:var _=3;break;default:_=m}var p=m;m=_;try{return C()}finally{m=p}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(C,_){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var p=m;m=C;try{return _()}finally{m=p}},r.unstable_scheduleCallback=function(C,_,p){var h=r.unstable_now();switch(typeof p=="object"&&p!==null?(p=p.delay,p=typeof p=="number"&&0<p?h+p:h):p=h,C){case 1:var g=-1;break;case 2:g=250;break;case 5:g=1073741823;break;case 4:g=1e4;break;default:g=5e3}return g=p+g,C={id:v++,callback:_,priorityLevel:C,startTime:p,expirationTime:g,sortIndex:-1},p>h?(C.sortIndex=p,t(a,C),e(o)===null&&C===e(a)&&(z?(q(U),U=-1):z=!0,Bt(c,p-h))):(C.sortIndex=g,t(o,C),I||w||(I=!0,Et(P))),C},r.unstable_shouldYield=lt,r.unstable_wrapCallback=function(C){var _=m;return function(){var p=m;m=_;try{return C.apply(this,arguments)}finally{m=p}}}})(Pr);(function(r){r.exports=Pr})(hn);function Ri(r,t,e){var i,n,s,l,f;t==null&&(t=100);function o(){var v=Date.now()-l;v<t&&v>=0?i=setTimeout(o,t-v):(i=null,e||(f=r.apply(s,n),s=n=null))}var a=function(){s=this,n=arguments,l=Date.now();var v=e&&!i;return i||(i=setTimeout(o,t)),v&&(f=r.apply(s,n),s=n=null),f};return a.clear=function(){i&&(clearTimeout(i),i=null)},a.flush=function(){i&&(f=r.apply(s,n),s=n=null,clearTimeout(i),i=null)},a}Ri.debounce=Ri;var Zn=Ri,cn=Object.defineProperty,un=Object.defineProperties,fn=Object.getOwnPropertyDescriptors,vr=Object.getOwnPropertySymbols,_n=Object.prototype.hasOwnProperty,dn=Object.prototype.propertyIsEnumerable,gr=(r,t,e)=>t in r?cn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,Er=(r,t)=>{for(var e in t||(t={}))_n.call(t,e)&&gr(r,e,t[e]);if(vr)for(var e of vr(t))dn.call(t,e)&&gr(r,e,t[e]);return r},mn=(r,t)=>un(r,fn(t));function Sr(r,t,e){if(!r)return;if(e(r)===!0)return r;let i=t?r.return:r.child;for(;i;){const n=Sr(i,t,e);if(n)return n;i=t?null:i.sibling}}function Mr(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const Ni=Mr(vt.createContext(null));class pn extends vt.Component{render(){return vt.createElement(Ni.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:yr,ReactCurrentDispatcher:Tr}=vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function vn(){const r=vt.useContext(Ni);if(r===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=vt.useId();return vt.useMemo(()=>{for(const i of[yr==null?void 0:yr.current,r,r==null?void 0:r.alternate]){if(!i)continue;const n=Sr(i,!1,s=>{let l=s.memoizedState;for(;l;){if(l.memoizedState===t)return!0;l=l.next}});if(n)return n}},[r,t])}function gn(){var r,t;const e=vn(),[i]=vt.useState(()=>new Map);i.clear();let n=e;for(;n;){const s=(r=n.type)==null?void 0:r._context;s&&s!==Ni&&!i.has(s)&&i.set(s,(t=Tr==null?void 0:Tr.current)==null?void 0:t.readContext(Mr(s))),n=n.return}return i}function Gn(){const r=gn();return vt.useMemo(()=>Array.from(r.keys()).reduce((t,e)=>i=>vt.createElement(t,null,vt.createElement(e.Provider,mn(Er({},i),{value:r.get(e)}))),t=>vt.createElement(pn,Er({},t))),[r])}var Pt=Uint8Array,jt=Uint16Array,Fi=Uint32Array,Rr=new Pt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Fr=new Pt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),En=new Pt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),zr=function(r,t){for(var e=new jt(31),i=0;i<31;++i)e[i]=t+=1<<r[i-1];for(var n=new Fi(e[30]),i=1;i<30;++i)for(var s=e[i];s<e[i+1];++s)n[s]=s-e[i]<<5|i;return[e,n]},kr=zr(Rr,2),Ir=kr[0],yn=kr[1];Ir[28]=258,yn[258]=28;var Tn=zr(Fr,0),On=Tn[0],zi=new jt(32768);for(var _t=0;_t<32768;++_t){var Xt=(_t&43690)>>>1|(_t&21845)<<1;Xt=(Xt&52428)>>>2|(Xt&13107)<<2,Xt=(Xt&61680)>>>4|(Xt&3855)<<4,zi[_t]=((Xt&65280)>>>8|(Xt&255)<<8)>>>1}var Le=function(r,t,e){for(var i=r.length,n=0,s=new jt(t);n<i;++n)++s[r[n]-1];var l=new jt(t);for(n=0;n<t;++n)l[n]=l[n-1]+s[n-1]<<1;var f;if(e){f=new jt(1<<t);var o=15-t;for(n=0;n<i;++n)if(r[n])for(var a=n<<4|r[n],v=t-r[n],d=l[r[n]-1]++<<v,m=d|(1<<v)-1;d<=m;++d)f[zi[d]>>>o]=a}else for(f=new jt(i),n=0;n<i;++n)r[n]&&(f[n]=zi[l[r[n]-1]++]>>>15-r[n]);return f},Ue=new Pt(288);for(var _t=0;_t<144;++_t)Ue[_t]=8;for(var _t=144;_t<256;++_t)Ue[_t]=9;for(var _t=256;_t<280;++_t)Ue[_t]=7;for(var _t=280;_t<288;++_t)Ue[_t]=8;var Br=new Pt(32);for(var _t=0;_t<32;++_t)Br[_t]=5;var wn=Le(Ue,9,1),bn=Le(Br,5,1),Ci=function(r){for(var t=r[0],e=1;e<r.length;++e)r[e]>t&&(t=r[e]);return t},Rt=function(r,t,e){var i=t/8|0;return(r[i]|r[i+1]<<8)>>(t&7)&e},Li=function(r,t){var e=t/8|0;return(r[e]|r[e+1]<<8|r[e+2]<<16)>>(t&7)},Cn=function(r){return(r/8|0)+(r&7&&1)},Ln=function(r,t,e){(t==null||t<0)&&(t=0),(e==null||e>r.length)&&(e=r.length);var i=new(r instanceof jt?jt:r instanceof Fi?Fi:Pt)(e-t);return i.set(r.subarray(t,e)),i},Dn=function(r,t,e){var i=r.length;if(!i||e&&!e.l&&i<5)return t||new Pt(0);var n=!t||e,s=!e||e.i;e||(e={}),t||(t=new Pt(i*3));var l=function(L){var E=t.length;if(L>E){var D=new Pt(Math.max(E*2,L));D.set(t),t=D}},f=e.f||0,o=e.p||0,a=e.b||0,v=e.l,d=e.d,m=e.m,w=e.n,I=i*8;do{if(!v){e.f=f=Rt(r,o,1);var z=Rt(r,o+1,3);if(o+=3,z)if(z==1)v=wn,d=bn,m=9,w=5;else if(z==2){var $=Rt(r,o,31)+257,c=Rt(r,o+10,15)+4,P=$+Rt(r,o+5,31)+1;o+=14;for(var M=new Pt(P),A=new Pt(19),U=0;U<c;++U)A[En[U]]=Rt(r,o+U*3,7);o+=c*3;for(var S=Ci(A),et=(1<<S)-1,lt=Le(A,S,1),U=0;U<P;){var gt=lt[Rt(r,o,et)];o+=gt&15;var Z=gt>>>4;if(Z<16)M[U++]=Z;else{var ht=0,yt=0;for(Z==16?(yt=3+Rt(r,o,3),o+=2,ht=M[U-1]):Z==17?(yt=3+Rt(r,o,7),o+=3):Z==18&&(yt=11+Rt(r,o,127),o+=7);yt--;)M[U++]=ht}}var At=M.subarray(0,$),Et=M.subarray($);m=Ci(At),w=Ci(Et),v=Le(At,m,1),d=Le(Et,w,1)}else throw"invalid block type";else{var Z=Cn(o)+4,q=r[Z-4]|r[Z-3]<<8,j=Z+q;if(j>i){if(s)throw"unexpected EOF";break}n&&l(a+q),t.set(r.subarray(Z,j),a),e.b=a+=q,e.p=o=j*8;continue}if(o>I){if(s)throw"unexpected EOF";break}}n&&l(a+131072);for(var Bt=(1<<m)-1,C=(1<<w)-1,_=o;;_=o){var ht=v[Li(r,o)&Bt],p=ht>>>4;if(o+=ht&15,o>I){if(s)throw"unexpected EOF";break}if(!ht)throw"invalid length/literal";if(p<256)t[a++]=p;else if(p==256){_=o,v=null;break}else{var h=p-254;if(p>264){var U=p-257,g=Rr[U];h=Rt(r,o,(1<<g)-1)+Ir[U],o+=g}var R=d[Li(r,o)&C],b=R>>>4;if(!R)throw"invalid distance";o+=R&15;var Et=On[b];if(b>3){var g=Fr[b];Et+=Li(r,o)&(1<<g)-1,o+=g}if(o>I){if(s)throw"unexpected EOF";break}n&&l(a+131072);for(var y=a+h;a<y;a+=4)t[a]=t[a-Et],t[a+1]=t[a+1-Et],t[a+2]=t[a+2-Et],t[a+3]=t[a+3-Et];a=y}}e.l=v,e.p=_,e.b=a,v&&(f=1,e.m=m,e.d=d,e.n=w)}while(!f);return a==t.length?t:Ln(t,0,a)},An=new Pt(0),Un=function(r){if((r[0]&15)!=8||r[0]>>>4>7||(r[0]<<8|r[1])%31)throw"invalid zlib data";if(r[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Xn(r,t){return Dn((Un(r),r.subarray(2,-4)),t)}var xn=typeof TextDecoder<"u"&&new TextDecoder,Pn=0;try{xn.decode(An,{stream:!0}),Pn=1}catch{}function Sn(){var r=Object.create(null);function t(n,s){var l=n.id,f=n.name,o=n.dependencies;o===void 0&&(o=[]);var a=n.init;a===void 0&&(a=function(){});var v=n.getTransferables;if(v===void 0&&(v=null),!r[l])try{o=o.map(function(m){return m&&m.isWorkerModule&&(t(m,function(w){if(w instanceof Error)throw w}),m=r[m.id].value),m}),a=i("<"+f+">.init",a),v&&(v=i("<"+f+">.getTransferables",v));var d=null;typeof a=="function"?d=a.apply(void 0,o):console.error("worker module init function failed to rehydrate"),r[l]={id:l,value:d,getTransferables:v},s(d)}catch(m){m&&m.noLog||console.error(m),s(m)}}function e(n,s){var l,f=n.id,o=n.args;(!r[f]||typeof r[f].value!="function")&&s(new Error("Worker module "+f+": not found or its 'init' did not return a function"));try{var a=(l=r[f]).value.apply(l,o);a&&typeof a.then=="function"?a.then(v,function(d){return s(d instanceof Error?d:new Error(""+d))}):v(a)}catch(d){s(d)}function v(d){try{var m=r[f].getTransferables&&r[f].getTransferables(d);(!m||!Array.isArray(m)||!m.length)&&(m=void 0),s(d,m)}catch(w){console.error(w),s(w)}}}function i(n,s){var l=void 0;self.troikaDefine=function(o){return l=o};var f=URL.createObjectURL(new Blob(["/** "+n.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(f)}catch(o){console.error(o)}return URL.revokeObjectURL(f),delete self.troikaDefine,l}self.addEventListener("message",function(n){var s=n.data,l=s.messageId,f=s.action,o=s.data;try{f==="registerModule"&&t(o,function(a){a instanceof Error?postMessage({messageId:l,success:!1,error:a.message}):postMessage({messageId:l,success:!0,result:{isCallable:typeof a=="function"}})}),f==="callModule"&&e(o,function(a,v){a instanceof Error?postMessage({messageId:l,success:!1,error:a.message}):postMessage({messageId:l,success:!0,result:a},v||void 0)})}catch(a){postMessage({messageId:l,success:!1,error:a.stack})}})}function Mn(r){var t=function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];return t._getInitResult().then(function(n){if(typeof n=="function")return n.apply(void 0,e);throw new Error("Worker module function was called but `init` did not return a callable function")})};return t._getInitResult=function(){var e=r.dependencies,i=r.init;e=Array.isArray(e)?e.map(function(s){return s&&s._getInitResult?s._getInitResult():s}):[];var n=Promise.all(e).then(function(s){return i.apply(null,s)});return t._getInitResult=function(){return n},n},t}var Nr=function(){var r=!1;if(typeof window<"u"&&typeof window.document<"u")try{var t=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));t.terminate(),r=!0}catch(e){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+e.message+"]")}return Nr=function(){return r},r},Rn=0,Fn=0,Di=!1,De=Object.create(null),Ae=Object.create(null),ki=Object.create(null);function zn(r){if((!r||typeof r.init!="function")&&!Di)throw new Error("requires `options.init` function");var t=r.dependencies,e=r.init,i=r.getTransferables,n=r.workerId;if(!Nr())return Mn(r);n==null&&(n="#default");var s="workerModule"+ ++Rn,l=r.name||s,f=null;t=t&&t.map(function(a){return typeof a=="function"&&!a.workerModuleData&&(Di=!0,a=zn({workerId:n,name:"<"+l+"> function dependency: "+a.name,init:`function(){return (
`+$e(a)+`
)}`}),Di=!1),a&&a.workerModuleData&&(a=a.workerModuleData),a});function o(){for(var a=[],v=arguments.length;v--;)a[v]=arguments[v];if(!f){f=Or(n,"registerModule",o.workerModuleData);var d=function(){f=null,Ae[n].delete(d)};(Ae[n]||(Ae[n]=new Set)).add(d)}return f.then(function(m){var w=m.isCallable;if(w)return Or(n,"callModule",{id:s,args:a});throw new Error("Worker module function was called but `init` did not return a callable function")})}return o.workerModuleData={isWorkerModule:!0,id:s,name:l,dependencies:t,init:$e(e),getTransferables:i&&$e(i)},o}function Wn(r){Ae[r]&&Ae[r].forEach(function(t){t()}),De[r]&&(De[r].terminate(),delete De[r])}function $e(r){var t=r.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function kn(r){var t=De[r];if(!t){var e=$e(Sn);t=De[r]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+r.replace(/\*/g,"")+` **/

;(`+e+")()"],{type:"application/javascript"}))),t.onmessage=function(i){var n=i.data,s=n.messageId,l=ki[s];if(!l)throw new Error("WorkerModule response with empty or unknown messageId");delete ki[s],l(n)}}return t}function Or(r,t,e){return new Promise(function(i,n){var s=++Fn;ki[s]=function(l){l.success?i(l.result):n(new Error("Error in worker "+t+" call: "+l.error))},kn(r).postMessage({messageId:s,action:t,data:e})})}function jn(){var r=function(t){function e(_,p,h,g,R,b,y,L){var E=1-y;L.x=E*E*_+2*E*y*h+y*y*R,L.y=E*E*p+2*E*y*g+y*y*b}function i(_,p,h,g,R,b,y,L,E,D){var N=1-E;D.x=N*N*N*_+3*N*N*E*h+3*N*E*E*R+E*E*E*y,D.y=N*N*N*p+3*N*N*E*g+3*N*E*E*b+E*E*E*L}function n(_,p){for(var h=/([MLQCZ])([^MLQCZ]*)/g,g,R,b,y,L;g=h.exec(_);){var E=g[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(D){return parseFloat(D)});switch(g[1]){case"M":y=R=E[0],L=b=E[1];break;case"L":(E[0]!==y||E[1]!==L)&&p("L",y,L,y=E[0],L=E[1]);break;case"Q":{p("Q",y,L,y=E[2],L=E[3],E[0],E[1]);break}case"C":{p("C",y,L,y=E[4],L=E[5],E[0],E[1],E[2],E[3]);break}case"Z":(y!==R||L!==b)&&p("L",y,L,R,b);break}}}function s(_,p,h){h===void 0&&(h=16);var g={x:0,y:0};n(_,function(R,b,y,L,E,D,N,nt,st){switch(R){case"L":p(b,y,L,E);break;case"Q":{for(var x=b,dt=y,Ot=1;Ot<h;Ot++)e(b,y,D,N,L,E,Ot/(h-1),g),p(x,dt,g.x,g.y),x=g.x,dt=g.y;break}case"C":{for(var X=b,J=y,tt=1;tt<h;tt++)i(b,y,D,N,nt,st,L,E,tt/(h-1),g),p(X,J,g.x,g.y),X=g.x,J=g.y;break}}})}var l="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",f="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",o=new WeakMap,a={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function v(_,p){var h=_.getContext?_.getContext("webgl",a):_,g=o.get(h);if(!g){let N=function(X){var J=b[X];if(!J&&(J=b[X]=h.getExtension(X),!J))throw new Error(X+" not supported");return J},nt=function(X,J){var tt=h.createShader(J);return h.shaderSource(tt,X),h.compileShader(tt),tt},st=function(X,J,tt,O){if(!y[X]){var Y={},H={},T=h.createProgram();h.attachShader(T,nt(J,h.VERTEX_SHADER)),h.attachShader(T,nt(tt,h.FRAGMENT_SHADER)),h.linkProgram(T),y[X]={program:T,transaction:function(k){h.useProgram(T),k({setUniform:function(V,ut){for(var mt=[],Q=arguments.length-2;Q-- >0;)mt[Q]=arguments[Q+2];var ft=H[ut]||(H[ut]=h.getUniformLocation(T,ut));h["uniform"+V].apply(h,[ft].concat(mt))},setAttribute:function(V,ut,mt,Q,ft){var Tt=Y[V];Tt||(Tt=Y[V]={buf:h.createBuffer(),loc:h.getAttribLocation(T,V),data:null}),h.bindBuffer(h.ARRAY_BUFFER,Tt.buf),h.vertexAttribPointer(Tt.loc,ut,h.FLOAT,!1,0,0),h.enableVertexAttribArray(Tt.loc),R?h.vertexAttribDivisor(Tt.loc,Q):N("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(Tt.loc,Q),ft!==Tt.data&&(h.bufferData(h.ARRAY_BUFFER,ft,mt),Tt.data=ft)}})}}}y[X].transaction(O)},x=function(X,J){E++;try{h.activeTexture(h.TEXTURE0+E);var tt=L[X];tt||(tt=L[X]=h.createTexture(),h.bindTexture(h.TEXTURE_2D,tt),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST)),h.bindTexture(h.TEXTURE_2D,tt),J(tt,E)}finally{E--}},dt=function(X,J,tt){var O=h.createFramebuffer();D.push(O),h.bindFramebuffer(h.FRAMEBUFFER,O),h.activeTexture(h.TEXTURE0+J),h.bindTexture(h.TEXTURE_2D,X),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,X,0);try{tt(O)}finally{h.deleteFramebuffer(O),h.bindFramebuffer(h.FRAMEBUFFER,D[--D.length-1]||null)}},Ot=function(){b={},y={},L={},E=-1,D.length=0};var R=typeof WebGL2RenderingContext<"u"&&h instanceof WebGL2RenderingContext,b={},y={},L={},E=-1,D=[];h.canvas.addEventListener("webglcontextlost",function(X){Ot(),X.preventDefault()},!1),o.set(h,g={gl:h,isWebGL2:R,getExtension:N,withProgram:st,withTexture:x,withTextureFramebuffer:dt,handleContextLoss:Ot})}p(g)}function d(_,p,h,g,R,b,y,L){y===void 0&&(y=15),L===void 0&&(L=null),v(_,function(E){var D=E.gl,N=E.withProgram,nt=E.withTexture;nt("copy",function(st,x){D.texImage2D(D.TEXTURE_2D,0,D.RGBA,R,b,0,D.RGBA,D.UNSIGNED_BYTE,p),N("copy",l,f,function(dt){var Ot=dt.setUniform,X=dt.setAttribute;X("aUV",2,D.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Ot("1i","image",x),D.bindFramebuffer(D.FRAMEBUFFER,L||null),D.disable(D.BLEND),D.colorMask(y&8,y&4,y&2,y&1),D.viewport(h,g,R,b),D.scissor(h,g,R,b),D.drawArrays(D.TRIANGLES,0,3)})})})}function m(_,p,h){var g=_.width,R=_.height;v(_,function(b){var y=b.gl,L=new Uint8Array(g*R*4);y.readPixels(0,0,g,R,y.RGBA,y.UNSIGNED_BYTE,L),_.width=p,_.height=h,d(y,L,0,0,g,R)})}var w=Object.freeze({__proto__:null,withWebGLContext:v,renderImageData:d,resizeWebGLCanvasWithoutClearing:m});function I(_,p,h,g,R,b){b===void 0&&(b=1);var y=new Uint8Array(_*p),L=g[2]-g[0],E=g[3]-g[1],D=[];s(h,function(X,J,tt,O){D.push({x1:X,y1:J,x2:tt,y2:O,minX:Math.min(X,tt),minY:Math.min(J,O),maxX:Math.max(X,tt),maxY:Math.max(J,O)})}),D.sort(function(X,J){return X.maxX-J.maxX});for(var N=0;N<_;N++)for(var nt=0;nt<p;nt++){var st=dt(g[0]+L*(N+.5)/_,g[1]+E*(nt+.5)/p),x=Math.pow(1-Math.abs(st)/R,b)/2;st<0&&(x=1-x),x=Math.max(0,Math.min(255,Math.round(x*255))),y[nt*_+N]=x}return y;function dt(X,J){for(var tt=1/0,O=1/0,Y=D.length;Y--;){var H=D[Y];if(H.maxX+O<=X)break;if(X+O>H.minX&&J-O<H.maxY&&J+O>H.minY){var T=q(X,J,H.x1,H.y1,H.x2,H.y2);T<tt&&(tt=T,O=Math.sqrt(tt))}}return Ot(X,J)&&(O=-O),O}function Ot(X,J){for(var tt=0,O=D.length;O--;){var Y=D[O];if(Y.maxX<=X)break;var H=Y.y1>J!=Y.y2>J&&X<(Y.x2-Y.x1)*(J-Y.y1)/(Y.y2-Y.y1)+Y.x1;H&&(tt+=Y.y1<Y.y2?1:-1)}return tt!==0}}function z(_,p,h,g,R,b,y,L,E,D){b===void 0&&(b=1),L===void 0&&(L=0),E===void 0&&(E=0),D===void 0&&(D=0),Z(_,p,h,g,R,b,y,null,L,E,D)}function Z(_,p,h,g,R,b,y,L,E,D,N){b===void 0&&(b=1),E===void 0&&(E=0),D===void 0&&(D=0),N===void 0&&(N=0);for(var nt=I(_,p,h,g,R,b),st=new Uint8Array(nt.length*4),x=0;x<nt.length;x++)st[x*4+N]=nt[x];d(y,st,E,D,_,p,1<<3-N,L)}function q(_,p,h,g,R,b){var y=R-h,L=b-g,E=y*y+L*L,D=E?Math.max(0,Math.min(1,((_-h)*y+(p-g)*L)/E)):0,N=_-(h+D*y),nt=p-(g+D*L);return N*N+nt*nt}var j=Object.freeze({__proto__:null,generate:I,generateIntoCanvas:z,generateIntoFramebuffer:Z}),$="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",c="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",P="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",M=new Float32Array([0,0,2,0,0,2]),A=null,U=!1,S={},et=new WeakMap;function lt(_){if(!U&&!At(_))throw new Error("WebGL generation not supported")}function gt(_,p,h,g,R,b,y){if(b===void 0&&(b=1),y===void 0&&(y=null),!y&&(y=A,!y)){var L=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!L)throw new Error("OffscreenCanvas or DOM canvas not supported");y=A=L.getContext("webgl",{depth:!1})}lt(y);var E=new Uint8Array(_*p*4);v(y,function(st){var x=st.gl,dt=st.withTexture,Ot=st.withTextureFramebuffer;dt("readable",function(X,J){x.texImage2D(x.TEXTURE_2D,0,x.RGBA,_,p,0,x.RGBA,x.UNSIGNED_BYTE,null),Ot(X,J,function(tt){yt(_,p,h,g,R,b,x,tt,0,0,0),x.readPixels(0,0,_,p,x.RGBA,x.UNSIGNED_BYTE,E)})})});for(var D=new Uint8Array(_*p),N=0,nt=0;N<E.length;N+=4)D[nt++]=E[N];return D}function ht(_,p,h,g,R,b,y,L,E,D){b===void 0&&(b=1),L===void 0&&(L=0),E===void 0&&(E=0),D===void 0&&(D=0),yt(_,p,h,g,R,b,y,null,L,E,D)}function yt(_,p,h,g,R,b,y,L,E,D,N){b===void 0&&(b=1),E===void 0&&(E=0),D===void 0&&(D=0),N===void 0&&(N=0),lt(y);var nt=[];s(h,function(st,x,dt,Ot){nt.push(st,x,dt,Ot)}),nt=new Float32Array(nt),v(y,function(st){var x=st.gl,dt=st.isWebGL2,Ot=st.getExtension,X=st.withProgram,J=st.withTexture,tt=st.withTextureFramebuffer,O=st.handleContextLoss;if(J("rawDistances",function(Y,H){(_!==Y._lastWidth||p!==Y._lastHeight)&&x.texImage2D(x.TEXTURE_2D,0,x.RGBA,Y._lastWidth=_,Y._lastHeight=p,0,x.RGBA,x.UNSIGNED_BYTE,null),X("main",$,c,function(T){var ct=T.setAttribute,k=T.setUniform,W=!dt&&Ot("ANGLE_instanced_arrays"),V=!dt&&Ot("EXT_blend_minmax");ct("aUV",2,x.STATIC_DRAW,0,M),ct("aLineSegment",4,x.DYNAMIC_DRAW,1,nt),k.apply(void 0,["4f","uGlyphBounds"].concat(g)),k("1f","uMaxDistance",R),k("1f","uExponent",b),tt(Y,H,function(ut){x.enable(x.BLEND),x.colorMask(!0,!0,!0,!0),x.viewport(0,0,_,p),x.scissor(0,0,_,p),x.blendFunc(x.ONE,x.ONE),x.blendEquationSeparate(x.FUNC_ADD,dt?x.MAX:V.MAX_EXT),x.clear(x.COLOR_BUFFER_BIT),dt?x.drawArraysInstanced(x.TRIANGLES,0,3,nt.length/4):W.drawArraysInstancedANGLE(x.TRIANGLES,0,3,nt.length/4)})}),X("post",l,P,function(T){T.setAttribute("aUV",2,x.STATIC_DRAW,0,M),T.setUniform("1i","tex",H),x.bindFramebuffer(x.FRAMEBUFFER,L),x.disable(x.BLEND),x.colorMask(N===0,N===1,N===2,N===3),x.viewport(E,D,_,p),x.scissor(E,D,_,p),x.drawArrays(x.TRIANGLES,0,3)})}),x.isContextLost())throw O(),new Error("webgl context lost")})}function At(_){var p=!_||_===A?S:_.canvas||_,h=et.get(p);if(h===void 0){U=!0;var g=null;try{var R=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],b=gt(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,_);h=b&&R.length===b.length&&b.every(function(y,L){return y===R[L]}),h||(g="bad trial run results",console.info(R,b))}catch(y){h=!1,g=y.message}g&&console.warn("WebGL SDF generation not supported:",g),U=!1,et.set(p,h)}return h}var Et=Object.freeze({__proto__:null,generate:gt,generateIntoCanvas:ht,generateIntoFramebuffer:yt,isSupported:At});function Bt(_,p,h,g,R,b){R===void 0&&(R=Math.max(g[2]-g[0],g[3]-g[1])/2),b===void 0&&(b=1);try{return gt.apply(Et,arguments)}catch(y){return console.info("WebGL SDF generation failed, falling back to JS",y),I.apply(j,arguments)}}function C(_,p,h,g,R,b,y,L,E,D){R===void 0&&(R=Math.max(g[2]-g[0],g[3]-g[1])/2),b===void 0&&(b=1),L===void 0&&(L=0),E===void 0&&(E=0),D===void 0&&(D=0);try{return ht.apply(Et,arguments)}catch(N){return console.info("WebGL SDF generation failed, falling back to JS",N),z.apply(j,arguments)}}return t.forEachPathCommand=n,t.generate=Bt,t.generateIntoCanvas=C,t.javascript=j,t.pathToLineSegments=s,t.webgl=Et,t.webglUtils=w,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return r}function Kn(){var r=function(t){var e={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},n={};i.L=1,n[1]="L",Object.keys(e).forEach(function(O,Y){i[O]=1<<Y+1,n[i[O]]=O}),Object.freeze(i);var s=i.LRI|i.RLI|i.FSI,l=i.L|i.R|i.AL,f=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,o=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,a=i.S|i.WS|i.B|s|i.PDI|o,v=null;function d(){if(!v){v=new Map;var O=function(H){if(e.hasOwnProperty(H)){var T=0;e[H].split(",").forEach(function(ct){var k=ct.split("+"),W=k[0],V=k[1];W=parseInt(W,36),V=V?parseInt(V,36):0,v.set(T+=W,i[H]);for(var ut=0;ut<V;ut++)v.set(++T,i[H])})}};for(var Y in e)O(Y)}}function m(O){return d(),v.get(O.codePointAt(0))||i.L}function w(O){return n[m(O)]}var I={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function z(O,Y){var H=36,T=0,ct=new Map,k=Y&&new Map,W;return O.split(",").forEach(function V(ut){if(ut.indexOf("+")!==-1)for(var mt=+ut;mt--;)V(W);else{W=ut;var Q=ut.split(">"),ft=Q[0],Tt=Q[1];ft=String.fromCodePoint(T+=parseInt(ft,H)),Tt=String.fromCodePoint(T+=parseInt(Tt,H)),ct.set(ft,Tt),Y&&k.set(Tt,ft)}}),{map:ct,reverseMap:k}}var Z,q,j;function $(){if(!Z){var O=z(I.pairs,!0),Y=O.map,H=O.reverseMap;Z=Y,q=H,j=z(I.canonical,!1).map}}function c(O){return $(),Z.get(O)||null}function P(O){return $(),q.get(O)||null}function M(O){return $(),j.get(O)||null}var A=i.L,U=i.R,S=i.EN,et=i.ES,lt=i.ET,gt=i.AN,ht=i.CS,yt=i.B,At=i.S,Et=i.ON,Bt=i.BN,C=i.NSM,_=i.AL,p=i.LRO,h=i.RLO,g=i.LRE,R=i.RLE,b=i.PDF,y=i.LRI,L=i.RLI,E=i.FSI,D=i.PDI;function N(O,Y){for(var H=125,T=new Uint32Array(O.length),ct=0;ct<O.length;ct++)T[ct]=m(O[ct]);var k=new Map;function W(Ct,Mt){var Lt=T[Ct];T[Ct]=Mt,k.set(Lt,k.get(Lt)-1),Lt&f&&k.set(f,k.get(f)-1),k.set(Mt,(k.get(Mt)||0)+1),Mt&f&&k.set(f,(k.get(f)||0)+1)}for(var V=new Uint8Array(O.length),ut=new Map,mt=[],Q=null,ft=0;ft<O.length;ft++)Q||mt.push(Q={start:ft,end:O.length-1,level:Y==="rtl"?1:Y==="ltr"?0:ur(ft,!1)}),T[ft]&yt&&(Q.end=ft,Q=null);for(var Tt=R|g|h|p|s|D|b|yt,Kt=function(Ct){return Ct+(Ct&1?1:2)},Yt=function(Ct){return Ct+(Ct&1?2:1)},Ht=0;Ht<mt.length;Ht++){Q=mt[Ht];var ot=[{_level:Q.level,_override:0,_isolate:0}],pt=void 0,Nt=0,Vt=0,ti=0;k.clear();for(var wt=Q.start;wt<=Q.end;wt++){var bt=T[wt];if(pt=ot[ot.length-1],k.set(bt,(k.get(bt)||0)+1),bt&f&&k.set(f,(k.get(f)||0)+1),bt&Tt)if(bt&(R|g)){V[wt]=pt._level;var Yi=(bt===R?Yt:Kt)(pt._level);Yi<=H&&!Nt&&!Vt?ot.push({_level:Yi,_override:0,_isolate:0}):Nt||Vt++}else if(bt&(h|p)){V[wt]=pt._level;var Hi=(bt===h?Yt:Kt)(pt._level);Hi<=H&&!Nt&&!Vt?ot.push({_level:Hi,_override:bt&h?U:A,_isolate:0}):Nt||Vt++}else if(bt&s){bt&E&&(bt=ur(wt+1,!0)===1?L:y),V[wt]=pt._level,pt._override&&W(wt,pt._override);var Vi=(bt===L?Yt:Kt)(pt._level);Vi<=H&&Nt===0&&Vt===0?(ti++,ot.push({_level:Vi,_override:0,_isolate:1,_isolInitIndex:wt})):Nt++}else if(bt&D){if(Nt>0)Nt--;else if(ti>0){for(Vt=0;!ot[ot.length-1]._isolate;)ot.pop();var ei=ot[ot.length-1]._isolInitIndex;ei!=null&&(ut.set(ei,wt),ut.set(wt,ei)),ot.pop(),ti--}pt=ot[ot.length-1],V[wt]=pt._level,pt._override&&W(wt,pt._override)}else bt&b?(Nt===0&&(Vt>0?Vt--:!pt._isolate&&ot.length>1&&(ot.pop(),pt=ot[ot.length-1])),V[wt]=pt._level):bt&yt&&(V[wt]=Q.level);else V[wt]=pt._level,pt._override&&bt!==Bt&&W(wt,pt._override)}for(var $t=[],zt=null,Qt=Q.start;Qt<=Q.end;Qt++){var ii=T[Qt];if(!(ii&o)){var Zi=V[Qt],Gi=ii&s,Vr=ii===D;zt&&Zi===zt._level?(zt._end=Qt,zt._endsWithIsolInit=Gi):$t.push(zt={_start:Qt,_end:Qt,_level:Zi,_startsWithPDI:Vr,_endsWithIsolInit:Gi})}}for(var ri=[],xe=0;xe<$t.length;xe++){var Pe=$t[xe];if(!Pe._startsWithPDI||Pe._startsWithPDI&&!ut.has(Pe._start)){for(var ni=[zt=Pe],Xi=void 0;zt&&zt._endsWithIsolInit&&(Xi=ut.get(zt._end))!=null;)for(var Se=xe+1;Se<$t.length;Se++)if($t[Se]._start===Xi){ni.push(zt=$t[Se]);break}for(var te=[],si=0;si<ni.length;si++)for(var Wi=ni[si],oi=Wi._start;oi<=Wi._end;oi++)te.push(oi);for(var Zr=V[te[0]],ji=Q.level,Me=te[0]-1;Me>=0;Me--)if(!(T[Me]&o)){ji=V[Me];break}var ai=te[te.length-1],Gr=V[ai],Ki=Q.level;if(!(T[ai]&s)){for(var Re=ai+1;Re<=Q.end;Re++)if(!(T[Re]&o)){Ki=V[Re];break}}ri.push({_seqIndices:te,_sosType:Math.max(ji,Zr)%2?U:A,_eosType:Math.max(Ki,Gr)%2?U:A})}}for(var li=0;li<ri.length;li++){var hi=ri[li],F=hi._seqIndices,he=hi._sosType,Xr=hi._eosType;if(k.get(C))for(var Fe=0;Fe<F.length;Fe++){var Qi=F[Fe];if(T[Qi]&C){for(var ci=he,ze=Fe-1;ze>=0;ze--)if(!(T[F[ze]]&o)){ci=T[F[ze]];break}W(Qi,ci&(s|D)?Et:ci)}}if(k.get(S))for(var ke=0;ke<F.length;ke++){var Ji=F[ke];if(T[Ji]&S)for(var Ie=ke-1;Ie>=-1;Ie--){var qi=Ie===-1?he:T[F[Ie]];if(qi&l){qi===_&&W(Ji,gt);break}}}if(k.get(_))for(var ui=0;ui<F.length;ui++){var $i=F[ui];T[$i]&_&&W($i,U)}if(k.get(et)||k.get(ht))for(var ce=1;ce<F.length-1;ce++){var fi=F[ce];if(T[fi]&(et|ht)){for(var ee=0,_i=0,di=ce-1;di>=0&&(ee=T[F[di]],!!(ee&o));di--);for(var mi=ce+1;mi<F.length&&(_i=T[F[mi]],!!(_i&o));mi++);ee===_i&&(T[fi]===et?ee===S:ee&(S|gt))&&W(fi,ee)}}if(k.get(S))for(var ue=0;ue<F.length;ue++){var Wr=F[ue];if(T[Wr]&S){for(var Be=ue-1;Be>=0&&T[F[Be]]&(lt|o);Be--)W(F[Be],S);for(var Ne=ue+1;Ne<F.length&&T[F[Ne]]&(lt|o);Ne++)W(F[Ne],S)}}if(k.get(lt)||k.get(et)||k.get(ht))for(var fe=0;fe<F.length;fe++){var tr=F[fe];if(T[tr]&(lt|et|ht)){W(tr,Et);for(var Ye=fe-1;Ye>=0&&T[F[Ye]]&o;Ye--)W(F[Ye],Et);for(var He=fe+1;He<F.length&&T[F[He]]&o;He++)W(F[He],Et)}}if(k.get(S))for(var pi=0,er=he;pi<F.length;pi++){var ir=F[pi],vi=T[ir];vi&S?er===A&&W(ir,A):vi&l&&(er=vi)}if(k.get(f)){var _e=U|S|gt,rr=_e|A,Ve=[];{for(var ie=[],re=0;re<F.length;re++)if(T[F[re]]&f){var de=O[F[re]],nr=void 0;if(c(de)!==null)if(ie.length<63)ie.push({char:de,seqIndex:re});else break;else if((nr=P(de))!==null)for(var me=ie.length-1;me>=0;me--){var gi=ie[me].char;if(gi===nr||gi===P(M(de))||c(M(gi))===de){Ve.push([ie[me].seqIndex,re]),ie.length=me;break}}}Ve.sort(function(Ct,Mt){return Ct[0]-Mt[0]})}for(var Ei=0;Ei<Ve.length;Ei++){for(var sr=Ve[Ei],pe=sr[0],Ze=sr[1],or=!1,St=0,yi=pe+1;yi<Ze;yi++){var Ti=F[yi];if(T[Ti]&rr){or=!0;var ar=T[Ti]&_e?U:A;if(ar===ne(Ti)){St=ar;break}}}if(or&&!St){St=he;for(var Oi=pe-1;Oi>=0;Oi--){var Ge=F[Oi];if(T[Ge]&rr){var lr=T[Ge]&_e?U:A;lr!==ne(Ge)?St=lr:St=ne(Ge);break}}}if(St){if(T[F[pe]]=T[F[Ze]]=St,St!==ne(F[pe])){for(var ve=pe+1;ve<F.length;ve++)if(!(T[F[ve]]&o)){m(O[F[ve]])&C&&(T[F[ve]]=St);break}}if(St!==ne(F[Ze])){for(var ge=Ze+1;ge<F.length;ge++)if(!(T[F[ge]]&o)){m(O[F[ge]])&C&&(T[F[ge]]=St);break}}}}for(var Zt=0;Zt<F.length;Zt++)if(T[F[Zt]]&f){for(var hr=Zt,wi=Zt,bi=he,Ee=Zt-1;Ee>=0;Ee--)if(T[F[Ee]]&o)hr=Ee;else{bi=T[F[Ee]]&_e?U:A;break}for(var cr=Xr,ye=Zt+1;ye<F.length;ye++)if(T[F[ye]]&(f|o))wi=ye;else{cr=T[F[ye]]&_e?U:A;break}for(var Xe=hr;Xe<=wi;Xe++)T[F[Xe]]=bi===cr?bi:ne(F[Xe]);Zt=wi}}}for(var Ut=Q.start;Ut<=Q.end;Ut++){var jr=V[Ut],We=T[Ut];if(jr&1?We&(A|S|gt)&&V[Ut]++:We&U?V[Ut]++:We&(gt|S)&&(V[Ut]+=2),We&o&&(V[Ut]=Ut===0?Q.level:V[Ut-1]),Ut===Q.end||m(O[Ut])&(At|yt))for(var je=Ut;je>=0&&m(O[je])&a;je--)V[je]=Q.level}}return{levels:V,paragraphs:mt};function ur(Ct,Mt){for(var Lt=Ct;Lt<O.length;Lt++){var Gt=T[Lt];if(Gt&(U|_))return 1;if(Gt&(yt|A)||Mt&&Gt===D)return 0;if(Gt&s){var fr=Kr(Lt);Lt=fr===-1?O.length:fr}}return 0}function Kr(Ct){for(var Mt=1,Lt=Ct+1;Lt<O.length;Lt++){var Gt=T[Lt];if(Gt&yt)break;if(Gt&D){if(--Mt===0)return Lt}else Gt&s&&Mt++}return-1}function ne(Ct){return V[Ct]&1?U:A}}var nt="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",st;function x(){if(!st){var O=z(nt,!0),Y=O.map,H=O.reverseMap;H.forEach(function(T,ct){Y.set(ct,T)}),st=Y}}function dt(O){return x(),st.get(O)||null}function Ot(O,Y,H,T){var ct=O.length;H=Math.max(0,H==null?0:+H),T=Math.min(ct-1,T==null?ct-1:+T);for(var k=new Map,W=H;W<=T;W++)if(Y[W]&1){var V=dt(O[W]);V!==null&&k.set(W,V)}return k}function X(O,Y,H,T){var ct=O.length;H=Math.max(0,H==null?0:+H),T=Math.min(ct-1,T==null?ct-1:+T);var k=[];return Y.paragraphs.forEach(function(W){var V=Math.max(H,W.start),ut=Math.min(T,W.end);if(V<ut){for(var mt=Y.levels.slice(V,ut+1),Q=ut;Q>=V&&m(O[Q])&a;Q--)mt[Q]=W.level;for(var ft=W.level,Tt=1/0,Kt=0;Kt<mt.length;Kt++){var Yt=mt[Kt];Yt>ft&&(ft=Yt),Yt<Tt&&(Tt=Yt|1)}for(var Ht=ft;Ht>=Tt;Ht--)for(var ot=0;ot<mt.length;ot++)if(mt[ot]>=Ht){for(var pt=ot;ot+1<mt.length&&mt[ot+1]>=Ht;)ot++;ot>pt&&k.push([pt+H,ot+H])}}}),k}function J(O,Y,H,T){var ct=tt(O,Y,H,T),k=[].concat(O);return ct.forEach(function(W,V){k[V]=(Y.levels[W]&1?dt(O[W]):null)||O[W]}),k.join("")}function tt(O,Y,H,T){for(var ct=X(O,Y,H,T),k=[],W=0;W<O.length;W++)k[W]=W;return ct.forEach(function(V){for(var ut=V[0],mt=V[1],Q=k.slice(ut,mt+1),ft=Q.length;ft--;)k[mt-ft]=Q[ft]}),k}return t.closingToOpeningBracket=P,t.getBidiCharType=m,t.getBidiCharTypeName=w,t.getCanonicalBracket=M,t.getEmbeddingLevels=N,t.getMirroredCharacter=dt,t.getMirroredCharactersMap=Ot,t.getReorderSegments=X,t.getReorderedIndices=tt,t.getReorderedString=J,t.openingToClosingBracket=c,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return r}/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const G={LEFT:1,RIGHT:2,MIDDLE:4},u=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),se={NONE:0,IN:1,OUT:-1};function Jt(r){return r.isPerspectiveCamera}function Wt(r){return r.isOrthographicCamera}const oe=Math.PI*2,wr=Math.PI/2,Yr=1e-5,Te=Math.PI/180;function Ft(r,t,e){return Math.max(t,Math.min(e,r))}function at(r,t=Yr){return Math.abs(r)<t}function rt(r,t,e=Yr){return at(r-t,e)}function br(r,t){return Math.round(r/t)*t}function Oe(r){return isFinite(r)?r:r<0?-Number.MAX_VALUE:Number.MAX_VALUE}function we(r){return Math.abs(r)<Number.MAX_VALUE?r:r*(1/0)}function Ke(r,t,e,i,n=1/0,s){i=Math.max(1e-4,i);const l=2/i,f=l*s,o=1/(1+f+.48*f*f+.235*f*f*f);let a=r-t;const v=t,d=n*i;a=Ft(a,-d,d),t=r-a;const m=(e.value+l*a)*s;e.value=(e.value-l*m)*o;let w=t+(a+m)*o;return v-r>0==w>v&&(w=v,e.value=(w-v)/s),w}function Cr(r,t,e,i,n=1/0,s,l){i=Math.max(1e-4,i);const f=2/i,o=f*s,a=1/(1+o+.48*o*o+.235*o*o*o);let v=t.x,d=t.y,m=t.z,w=r.x-v,I=r.y-d,z=r.z-m;const Z=v,q=d,j=m,$=n*i,c=$*$,P=w*w+I*I+z*z;if(P>c){const At=Math.sqrt(P);w=w/At*$,I=I/At*$,z=z/At*$}v=r.x-w,d=r.y-I,m=r.z-z;const M=(e.x+f*w)*s,A=(e.y+f*I)*s,U=(e.z+f*z)*s;e.x=(e.x-f*M)*a,e.y=(e.y-f*A)*a,e.z=(e.z-f*U)*a,l.x=v+(w+M)*a,l.y=d+(I+A)*a,l.z=m+(z+U)*a;const S=Z-r.x,et=q-r.y,lt=j-r.z,gt=l.x-Z,ht=l.y-q,yt=l.z-j;return S*gt+et*ht+lt*yt>0&&(l.x=Z,l.y=q,l.z=j,e.x=(l.x-Z)/s,e.y=(l.y-q)/s,e.z=(l.z-j)/s),l}function Ai(r,t){t.set(0,0),r.forEach(e=>{t.x+=e.clientX,t.y+=e.clientY}),t.x/=r.length,t.y/=r.length}function Ui(r,t){return Wt(r)?(console.warn(`${t} is not supported in OrthographicCamera`),!0):!1}class In{constructor(){this._listeners={}}addEventListener(t,e){const i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){const i=this._listeners;return i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){const n=this._listeners[t];if(n!==void 0){const s=n.indexOf(e);s!==-1&&n.splice(s,1)}}removeAllEventListeners(t){if(!t){this._listeners={};return}Array.isArray(this._listeners[t])&&(this._listeners[t].length=0)}dispatchEvent(t){const i=this._listeners[t.type];if(i!==void 0){t.target=this;const n=i.slice(0);for(let s=0,l=n.length;s<l;s++)n[s].call(this,t)}}}const Bn="2.7.2",Qe=1/8,Hr=typeof window<"u",Nn=Hr&&/Mac/.test(navigator.platform),Yn=!(Hr&&"PointerEvent"in window);let B,Lr,Je,xi,Dt,K,it,ae,be,kt,It,qt,Dr,Ar,xt,Ce,le,Ur,Pi,xr,Si,Mi,qe;class Ii extends In{static install(t){B=t.THREE,Lr=Object.freeze(new B.Vector3(0,0,0)),Je=Object.freeze(new B.Vector3(0,1,0)),xi=Object.freeze(new B.Vector3(0,0,1)),Dt=new B.Vector2,K=new B.Vector3,it=new B.Vector3,ae=new B.Vector3,be=new B.Vector3,kt=new B.Vector3,It=new B.Vector3,qt=new B.Vector3,Dr=new B.Vector3,Ar=new B.Vector3,xt=new B.Spherical,Ce=new B.Spherical,le=new B.Box3,Ur=new B.Box3,Pi=new B.Sphere,xr=new B.Quaternion,Si=new B.Quaternion,Mi=new B.Matrix4,qe=new B.Raycaster}static get ACTION(){return u}constructor(t,e){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=u.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=se.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new B.Vector3,this._focalOffsetVelocity=new B.Vector3,this._zoomVelocity={value:0},this._truckInternal=(c,P,M)=>{let A,U;if(Jt(this._camera)){const S=K.copy(this._camera.position).sub(this._target),et=this._camera.getEffectiveFOV()*Te,lt=S.length()*Math.tan(et*.5);A=this.truckSpeed*c*lt/this._elementRect.height,U=this.truckSpeed*P*lt/this._elementRect.height}else if(Wt(this._camera)){const S=this._camera;A=c*(S.right-S.left)/S.zoom/this._elementRect.width,U=P*(S.top-S.bottom)/S.zoom/this._elementRect.height}else return;this.verticalDragToForward?(M?this.setFocalOffset(this._focalOffsetEnd.x+A,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(A,0,!0),this.forward(-U,!0)):M?this.setFocalOffset(this._focalOffsetEnd.x+A,this._focalOffsetEnd.y+U,this._focalOffsetEnd.z,!0):this.truck(A,U,!0)},this._rotateInternal=(c,P)=>{const M=oe*this.azimuthRotateSpeed*c/this._elementRect.height,A=oe*this.polarRotateSpeed*P/this._elementRect.height;this.rotate(M,A,!0)},this._dollyInternal=(c,P,M)=>{const A=Math.pow(.95,-c*this.dollySpeed),U=this._sphericalEnd.radius,S=this._sphericalEnd.radius*A,et=Ft(S,this.minDistance,this.maxDistance),lt=et-S;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(S,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(lt,!0),this._dollyToNoClamp(et,!0)):this._dollyToNoClamp(et,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?S:et)-U,this._dollyControlCoord.set(P,M)),this._lastDollyDirection=Math.sign(-c)},this._zoomInternal=(c,P,M)=>{const A=Math.pow(.95,c*this.dollySpeed),U=this._zoom,S=this._zoom*A;this.zoomTo(S,!0),this.dollyToCursor&&(this._changedZoom+=S-U,this._dollyControlCoord.set(P,M))},typeof B>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=t,this._yAxisUpSpace=new B.Quaternion().setFromUnitVectors(this._camera.up,Je),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=u.NONE,this._target=new B.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new B.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new B.Spherical().setFromVector3(K.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new B.Vector3,new B.Vector3,new B.Vector3,new B.Vector3],this._updateNearPlaneCorners(),this._boundary=new B.Box3(new B.Vector3(-1/0,-1/0,-1/0),new B.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new B.Vector2,this.mouseButtons={left:u.ROTATE,middle:u.DOLLY,right:u.TRUCK,wheel:Jt(this._camera)?u.DOLLY:Wt(this._camera)?u.ZOOM:u.NONE},this.touches={one:u.TOUCH_ROTATE,two:Jt(this._camera)?u.TOUCH_DOLLY_TRUCK:Wt(this._camera)?u.TOUCH_ZOOM_TRUCK:u.NONE,three:u.TOUCH_TRUCK};const i=new B.Vector2,n=new B.Vector2,s=new B.Vector2,l=c=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const A=this._domElement.getBoundingClientRect(),U=c.clientX/A.width,S=c.clientY/A.height;if(U<this._interactiveArea.left||U>this._interactiveArea.right||S<this._interactiveArea.top||S>this._interactiveArea.bottom)return}const P=c.pointerType!=="mouse"?null:(c.buttons&G.LEFT)===G.LEFT?G.LEFT:(c.buttons&G.MIDDLE)===G.MIDDLE?G.MIDDLE:(c.buttons&G.RIGHT)===G.RIGHT?G.RIGHT:null;if(P!==null){const A=this._findPointerByMouseButton(P);A&&this._disposePointer(A)}if((c.buttons&G.LEFT)===G.LEFT&&this._lockedPointer)return;const M={pointerId:c.pointerId,clientX:c.clientX,clientY:c.clientY,deltaX:0,deltaY:0,mouseButton:P};this._activePointers.push(M),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",v),this._domElement.ownerDocument.addEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",v),this._isDragging=!0,z(c)},f=c=>{if(!this._enabled||!this._domElement||this._lockedPointer)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const A=this._domElement.getBoundingClientRect(),U=c.clientX/A.width,S=c.clientY/A.height;if(U<this._interactiveArea.left||U>this._interactiveArea.right||S<this._interactiveArea.top||S>this._interactiveArea.bottom)return}const P=(c.buttons&G.LEFT)===G.LEFT?G.LEFT:(c.buttons&G.MIDDLE)===G.MIDDLE?G.MIDDLE:(c.buttons&G.RIGHT)===G.RIGHT?G.RIGHT:null;if(P!==null){const A=this._findPointerByMouseButton(P);A&&this._disposePointer(A)}const M={pointerId:1,clientX:c.clientX,clientY:c.clientY,deltaX:0,deltaY:0,mouseButton:(c.buttons&G.LEFT)===G.LEFT?G.LEFT:(c.buttons&G.MIDDLE)===G.LEFT?G.MIDDLE:(c.buttons&G.RIGHT)===G.LEFT?G.RIGHT:null};this._activePointers.push(M),this._domElement.ownerDocument.removeEventListener("mousemove",a),this._domElement.ownerDocument.removeEventListener("mouseup",d),this._domElement.ownerDocument.addEventListener("mousemove",a),this._domElement.ownerDocument.addEventListener("mouseup",d),this._isDragging=!0,z(c)},o=c=>{c.cancelable&&c.preventDefault();const P=c.pointerId,M=this._lockedPointer||this._findPointerById(P);if(M){if(M.clientX=c.clientX,M.clientY=c.clientY,M.deltaX=c.movementX,M.deltaY=c.movementY,this._state=0,c.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(c.buttons&G.LEFT)===G.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(c.buttons&G.MIDDLE)===G.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(c.buttons&G.RIGHT)===G.RIGHT&&(this._state=this._state|this.mouseButtons.right);Z()}},a=c=>{const P=this._lockedPointer||this._findPointerById(1);P&&(P.clientX=c.clientX,P.clientY=c.clientY,P.deltaX=c.movementX,P.deltaY=c.movementY,this._state=0,(this._lockedPointer||(c.buttons&G.LEFT)===G.LEFT)&&(this._state=this._state|this.mouseButtons.left),(c.buttons&G.MIDDLE)===G.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(c.buttons&G.RIGHT)===G.RIGHT&&(this._state=this._state|this.mouseButtons.right),Z())},v=c=>{const P=this._findPointerById(c.pointerId);if(!(P&&P===this._lockedPointer)){if(P&&this._disposePointer(P),c.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=u.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=u.NONE;q()}},d=()=>{const c=this._findPointerById(1);c&&c===this._lockedPointer||(c&&this._disposePointer(c),this._state=u.NONE,q())};let m=-1;const w=c=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===u.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const S=this._domElement.getBoundingClientRect(),et=c.clientX/S.width,lt=c.clientY/S.height;if(et<this._interactiveArea.left||et>this._interactiveArea.right||lt<this._interactiveArea.top||lt>this._interactiveArea.bottom)return}if(c.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===u.ROTATE||this.mouseButtons.wheel===u.TRUCK){const S=performance.now();m-S<1e3&&this._getClientRect(this._elementRect),m=S}const P=Nn?-1:-3,M=c.deltaMode===1?c.deltaY/P:c.deltaY/(P*10),A=this.dollyToCursor?(c.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,U=this.dollyToCursor?(c.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case u.ROTATE:{this._rotateInternal(c.deltaX,c.deltaY),this._isUserControllingRotate=!0;break}case u.TRUCK:{this._truckInternal(c.deltaX,c.deltaY,!1),this._isUserControllingTruck=!0;break}case u.OFFSET:{this._truckInternal(c.deltaX,c.deltaY,!0),this._isUserControllingOffset=!0;break}case u.DOLLY:{this._dollyInternal(-M,A,U),this._isUserControllingDolly=!0;break}case u.ZOOM:{this._zoomInternal(-M,A,U),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},I=c=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===Ii.ACTION.NONE){const P=c instanceof PointerEvent?c.pointerId:(c instanceof MouseEvent,0),M=this._findPointerById(P);M&&this._disposePointer(M),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",v),this._domElement.ownerDocument.removeEventListener("mousemove",a),this._domElement.ownerDocument.removeEventListener("mouseup",d);return}c.preventDefault()}},z=c=>{if(!this._enabled)return;if(Ai(this._activePointers,Dt),this._getClientRect(this._elementRect),i.copy(Dt),n.copy(Dt),this._activePointers.length>=2){const M=Dt.x-this._activePointers[1].clientX,A=Dt.y-this._activePointers[1].clientY,U=Math.sqrt(M*M+A*A);s.set(0,U);const S=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,et=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;n.set(S,et)}if(this._state=0,!c)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in c&&c.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(c.buttons&G.LEFT)===G.LEFT&&(this._state=this._state|this.mouseButtons.left),(c.buttons&G.MIDDLE)===G.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(c.buttons&G.RIGHT)===G.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&u.ROTATE)===u.ROTATE||(this._state&u.TOUCH_ROTATE)===u.TOUCH_ROTATE||(this._state&u.TOUCH_DOLLY_ROTATE)===u.TOUCH_DOLLY_ROTATE||(this._state&u.TOUCH_ZOOM_ROTATE)===u.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&u.TRUCK)===u.TRUCK||(this._state&u.TOUCH_TRUCK)===u.TOUCH_TRUCK||(this._state&u.TOUCH_DOLLY_TRUCK)===u.TOUCH_DOLLY_TRUCK||(this._state&u.TOUCH_ZOOM_TRUCK)===u.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&u.DOLLY)===u.DOLLY||(this._state&u.TOUCH_DOLLY)===u.TOUCH_DOLLY||(this._state&u.TOUCH_DOLLY_TRUCK)===u.TOUCH_DOLLY_TRUCK||(this._state&u.TOUCH_DOLLY_OFFSET)===u.TOUCH_DOLLY_OFFSET||(this._state&u.TOUCH_DOLLY_ROTATE)===u.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&u.ZOOM)===u.ZOOM||(this._state&u.TOUCH_ZOOM)===u.TOUCH_ZOOM||(this._state&u.TOUCH_ZOOM_TRUCK)===u.TOUCH_ZOOM_TRUCK||(this._state&u.TOUCH_ZOOM_OFFSET)===u.TOUCH_ZOOM_OFFSET||(this._state&u.TOUCH_ZOOM_ROTATE)===u.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&u.OFFSET)===u.OFFSET||(this._state&u.TOUCH_OFFSET)===u.TOUCH_OFFSET||(this._state&u.TOUCH_DOLLY_OFFSET)===u.TOUCH_DOLLY_OFFSET||(this._state&u.TOUCH_ZOOM_OFFSET)===u.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},Z=()=>{if(!this._enabled)return;Ai(this._activePointers,Dt);const P=this._domElement&&document.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,M=P?-P.deltaX:n.x-Dt.x,A=P?-P.deltaY:n.y-Dt.y;if(n.copy(Dt),((this._state&u.ROTATE)===u.ROTATE||(this._state&u.TOUCH_ROTATE)===u.TOUCH_ROTATE||(this._state&u.TOUCH_DOLLY_ROTATE)===u.TOUCH_DOLLY_ROTATE||(this._state&u.TOUCH_ZOOM_ROTATE)===u.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(M,A),this._isUserControllingRotate=!0),(this._state&u.DOLLY)===u.DOLLY||(this._state&u.ZOOM)===u.ZOOM){const U=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,S=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0,et=this.dollyDragInverted?-1:1;(this._state&u.DOLLY)===u.DOLLY?(this._dollyInternal(et*A*Qe,U,S),this._isUserControllingDolly=!0):(this._zoomInternal(et*A*Qe,U,S),this._isUserControllingZoom=!0)}if((this._state&u.TOUCH_DOLLY)===u.TOUCH_DOLLY||(this._state&u.TOUCH_ZOOM)===u.TOUCH_ZOOM||(this._state&u.TOUCH_DOLLY_TRUCK)===u.TOUCH_DOLLY_TRUCK||(this._state&u.TOUCH_ZOOM_TRUCK)===u.TOUCH_ZOOM_TRUCK||(this._state&u.TOUCH_DOLLY_OFFSET)===u.TOUCH_DOLLY_OFFSET||(this._state&u.TOUCH_ZOOM_OFFSET)===u.TOUCH_ZOOM_OFFSET||(this._state&u.TOUCH_DOLLY_ROTATE)===u.TOUCH_DOLLY_ROTATE||(this._state&u.TOUCH_ZOOM_ROTATE)===u.TOUCH_ZOOM_ROTATE){const U=Dt.x-this._activePointers[1].clientX,S=Dt.y-this._activePointers[1].clientY,et=Math.sqrt(U*U+S*S),lt=s.y-et;s.set(0,et);const gt=this.dollyToCursor?(n.x-this._elementRect.x)/this._elementRect.width*2-1:0,ht=this.dollyToCursor?(n.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&u.TOUCH_DOLLY)===u.TOUCH_DOLLY||(this._state&u.TOUCH_DOLLY_ROTATE)===u.TOUCH_DOLLY_ROTATE||(this._state&u.TOUCH_DOLLY_TRUCK)===u.TOUCH_DOLLY_TRUCK||(this._state&u.TOUCH_DOLLY_OFFSET)===u.TOUCH_DOLLY_OFFSET?(this._dollyInternal(lt*Qe,gt,ht),this._isUserControllingDolly=!0):(this._zoomInternal(lt*Qe,gt,ht),this._isUserControllingZoom=!0)}((this._state&u.TRUCK)===u.TRUCK||(this._state&u.TOUCH_TRUCK)===u.TOUCH_TRUCK||(this._state&u.TOUCH_DOLLY_TRUCK)===u.TOUCH_DOLLY_TRUCK||(this._state&u.TOUCH_ZOOM_TRUCK)===u.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(M,A,!1),this._isUserControllingTruck=!0),((this._state&u.OFFSET)===u.OFFSET||(this._state&u.TOUCH_OFFSET)===u.TOUCH_OFFSET||(this._state&u.TOUCH_DOLLY_OFFSET)===u.TOUCH_DOLLY_OFFSET||(this._state&u.TOUCH_ZOOM_OFFSET)===u.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(M,A,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},q=()=>{Ai(this._activePointers,Dt),n.copy(Dt),(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",a),this._domElement.ownerDocument.removeEventListener("pointerup",v),this._domElement.ownerDocument.removeEventListener("mouseup",d),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",v),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",j),this._domElement.ownerDocument.addEventListener("pointerlockerror",$),this._domElement.ownerDocument.addEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",v),z())},this.unlockPointer=()=>{this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),document.exitPointerLock(),this.cancel(),this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointerlockchange",j),this._domElement.ownerDocument.removeEventListener("pointerlockerror",$))};const j=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},$=()=>{this.unlockPointer()};this._addAllEventListeners=c=>{this._domElement=c,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",l),Yn&&this._domElement.addEventListener("mousedown",f),this._domElement.addEventListener("pointercancel",v),this._domElement.addEventListener("wheel",w,{passive:!1}),this._domElement.addEventListener("contextmenu",I)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",l),this._domElement.removeEventListener("mousedown",f),this._domElement.removeEventListener("pointercancel",v),this._domElement.removeEventListener("wheel",w,{passive:!1}),this._domElement.removeEventListener("contextmenu",I),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",a),this._domElement.ownerDocument.removeEventListener("pointerup",v),this._domElement.ownerDocument.removeEventListener("mouseup",d),this._domElement.ownerDocument.removeEventListener("pointerlockchange",j),this._domElement.ownerDocument.removeEventListener("pointerlockerror",$))},this.cancel=()=>{this._state!==u.NONE&&(this._state=u.NONE,this._activePointers.length=0,q())},e&&this.connect(e),this.update(0)}get camera(){return this._camera}set camera(t){this._camera=t,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._domElement&&(t?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(t){this._spherical.radius===t&&this._sphericalEnd.radius===t||(this._spherical.radius=t,this._sphericalEnd.radius=t,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(t){this._spherical.theta===t&&this._sphericalEnd.theta===t||(this._spherical.theta=t,this._sphericalEnd.theta=t,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(t){this._spherical.phi===t&&this._sphericalEnd.phi===t||(this._spherical.phi=t,this._sphericalEnd.phi=t,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(t){this._boundaryEnclosesCamera=t,this._needsUpdate=!0}set interactiveArea(t){this._interactiveArea.width=Ft(t.width,0,1),this._interactiveArea.height=Ft(t.height,0,1),this._interactiveArea.x=Ft(t.x,0,1-this._interactiveArea.width),this._interactiveArea.y=Ft(t.x,0,1-this._interactiveArea.height)}addEventListener(t,e){super.addEventListener(t,e)}removeEventListener(t,e){super.removeEventListener(t,e)}rotate(t,e,i=!1){return this.rotateTo(this._sphericalEnd.theta+t,this._sphericalEnd.phi+e,i)}rotateAzimuthTo(t,e=!1){return this.rotateTo(t,this._sphericalEnd.phi,e)}rotatePolarTo(t,e=!1){return this.rotateTo(this._sphericalEnd.theta,t,e)}rotateTo(t,e,i=!1){this._isUserControllingRotate=!1;const n=Ft(t,this.minAzimuthAngle,this.maxAzimuthAngle),s=Ft(e,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=n,this._sphericalEnd.phi=s,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,i||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const l=!i||rt(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&rt(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(l)}dolly(t,e=!1){return this.dollyTo(this._sphericalEnd.radius-t,e)}dollyTo(t,e=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=se.NONE,this._changedDolly=0,this._dollyToNoClamp(Ft(t,this.minDistance,this.maxDistance),e)}_dollyToNoClamp(t,e=!1){const i=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const l=this._collisionTest(),f=rt(l,this._spherical.radius);if(!(i>t)&&f)return Promise.resolve();this._sphericalEnd.radius=Math.min(t,l)}else this._sphericalEnd.radius=t;this._needsUpdate=!0,e||(this._spherical.radius=this._sphericalEnd.radius);const s=!e||rt(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(s)}dollyInFixed(t,e=!1){this._targetEnd.add(this._getCameraDirection(be).multiplyScalar(t)),e||this._target.copy(this._targetEnd);const i=!e||rt(this._target.x,this._targetEnd.x,this.restThreshold)&&rt(this._target.y,this._targetEnd.y,this.restThreshold)&&rt(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}zoom(t,e=!1){return this.zoomTo(this._zoomEnd+t,e)}zoomTo(t,e=!1){this._isUserControllingZoom=!1,this._zoomEnd=Ft(t,this.minZoom,this.maxZoom),this._needsUpdate=!0,e||(this._zoom=this._zoomEnd);const i=!e||rt(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(i)}pan(t,e,i=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(t,e,i)}truck(t,e,i=!1){this._camera.updateMatrix(),kt.setFromMatrixColumn(this._camera.matrix,0),It.setFromMatrixColumn(this._camera.matrix,1),kt.multiplyScalar(t),It.multiplyScalar(-e);const n=K.copy(kt).add(It),s=it.copy(this._targetEnd).add(n);return this.moveTo(s.x,s.y,s.z,i)}forward(t,e=!1){K.setFromMatrixColumn(this._camera.matrix,0),K.crossVectors(this._camera.up,K),K.multiplyScalar(t);const i=it.copy(this._targetEnd).add(K);return this.moveTo(i.x,i.y,i.z,e)}elevate(t,e=!1){return K.copy(this._camera.up).multiplyScalar(t),this.moveTo(this._targetEnd.x+K.x,this._targetEnd.y+K.y,this._targetEnd.z+K.z,e)}moveTo(t,e,i,n=!1){this._isUserControllingTruck=!1;const s=K.set(t,e,i).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,s,this.boundaryFriction),this._needsUpdate=!0,n||this._target.copy(this._targetEnd);const l=!n||rt(this._target.x,this._targetEnd.x,this.restThreshold)&&rt(this._target.y,this._targetEnd.y,this.restThreshold)&&rt(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(l)}lookInDirectionOf(t,e,i,n=!1){const f=K.set(t,e,i).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius);return this.setPosition(f.x,f.y,f.z,n)}fitToBox(t,e,{cover:i=!1,paddingLeft:n=0,paddingRight:s=0,paddingBottom:l=0,paddingTop:f=0}={}){const o=[],a=t.isBox3?le.copy(t):le.setFromObject(t);a.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const v=br(this._sphericalEnd.theta,wr),d=br(this._sphericalEnd.phi,wr);o.push(this.rotateTo(v,d,e));const m=K.setFromSpherical(this._sphericalEnd).normalize(),w=xr.setFromUnitVectors(m,xi),I=rt(Math.abs(m.y),1);I&&w.multiply(Si.setFromAxisAngle(Je,v)),w.multiply(this._yAxisUpSpaceInverse);const z=Ur.makeEmpty();it.copy(a.min).applyQuaternion(w),z.expandByPoint(it),it.copy(a.min).setX(a.max.x).applyQuaternion(w),z.expandByPoint(it),it.copy(a.min).setY(a.max.y).applyQuaternion(w),z.expandByPoint(it),it.copy(a.max).setZ(a.min.z).applyQuaternion(w),z.expandByPoint(it),it.copy(a.min).setZ(a.max.z).applyQuaternion(w),z.expandByPoint(it),it.copy(a.max).setY(a.min.y).applyQuaternion(w),z.expandByPoint(it),it.copy(a.max).setX(a.min.x).applyQuaternion(w),z.expandByPoint(it),it.copy(a.max).applyQuaternion(w),z.expandByPoint(it),z.min.x-=n,z.min.y-=l,z.max.x+=s,z.max.y+=f,w.setFromUnitVectors(xi,m),I&&w.premultiply(Si.invert()),w.premultiply(this._yAxisUpSpace);const Z=z.getSize(K),q=z.getCenter(it).applyQuaternion(w);if(Jt(this._camera)){const j=this.getDistanceToFitBox(Z.x,Z.y,Z.z,i);o.push(this.moveTo(q.x,q.y,q.z,e)),o.push(this.dollyTo(j,e)),o.push(this.setFocalOffset(0,0,0,e))}else if(Wt(this._camera)){const j=this._camera,$=j.right-j.left,c=j.top-j.bottom,P=i?Math.max($/Z.x,c/Z.y):Math.min($/Z.x,c/Z.y);o.push(this.moveTo(q.x,q.y,q.z,e)),o.push(this.zoomTo(P,e)),o.push(this.setFocalOffset(0,0,0,e))}return Promise.all(o)}fitToSphere(t,e){const i=[],s=t instanceof B.Sphere?Pi.copy(t):Ii.createBoundingSphere(t,Pi);if(i.push(this.moveTo(s.center.x,s.center.y,s.center.z,e)),Jt(this._camera)){const l=this.getDistanceToFitSphere(s.radius);i.push(this.dollyTo(l,e))}else if(Wt(this._camera)){const l=this._camera.right-this._camera.left,f=this._camera.top-this._camera.bottom,o=2*s.radius,a=Math.min(l/o,f/o);i.push(this.zoomTo(a,e))}return i.push(this.setFocalOffset(0,0,0,e)),Promise.all(i)}setLookAt(t,e,i,n,s,l,f=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=se.NONE,this._changedDolly=0;const o=it.set(n,s,l),a=K.set(t,e,i);this._targetEnd.copy(o),this._sphericalEnd.setFromVector3(a.sub(o).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,f||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const v=!f||rt(this._target.x,this._targetEnd.x,this.restThreshold)&&rt(this._target.y,this._targetEnd.y,this.restThreshold)&&rt(this._target.z,this._targetEnd.z,this.restThreshold)&&rt(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&rt(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&rt(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(v)}lerpLookAt(t,e,i,n,s,l,f,o,a,v,d,m,w,I=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=se.NONE,this._changedDolly=0;const z=K.set(n,s,l),Z=it.set(t,e,i);xt.setFromVector3(Z.sub(z).applyQuaternion(this._yAxisUpSpace));const q=ae.set(v,d,m),j=it.set(f,o,a);Ce.setFromVector3(j.sub(q).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(z.lerp(q,w));const $=Ce.theta-xt.theta,c=Ce.phi-xt.phi,P=Ce.radius-xt.radius;this._sphericalEnd.set(xt.radius+P*w,xt.phi+c*w,xt.theta+$*w),this.normalizeRotations(),this._needsUpdate=!0,I||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const M=!I||rt(this._target.x,this._targetEnd.x,this.restThreshold)&&rt(this._target.y,this._targetEnd.y,this.restThreshold)&&rt(this._target.z,this._targetEnd.z,this.restThreshold)&&rt(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&rt(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&rt(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(M)}setPosition(t,e,i,n=!1){return this.setLookAt(t,e,i,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,n)}setTarget(t,e,i,n=!1){const s=this.getPosition(K),l=this.setLookAt(s.x,s.y,s.z,t,e,i,n);return this._sphericalEnd.phi=Ft(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),l}setFocalOffset(t,e,i,n=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(t,e,i),this._needsUpdate=!0,n||this._focalOffset.copy(this._focalOffsetEnd);const s=!n||rt(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&rt(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&rt(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}setOrbitPoint(t,e,i){this._camera.updateMatrixWorld(),kt.setFromMatrixColumn(this._camera.matrixWorldInverse,0),It.setFromMatrixColumn(this._camera.matrixWorldInverse,1),qt.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const n=K.set(t,e,i),s=n.distanceTo(this._camera.position),l=n.sub(this._camera.position);kt.multiplyScalar(l.x),It.multiplyScalar(l.y),qt.multiplyScalar(l.z),K.copy(kt).add(It).add(qt),K.z=K.z+s,this.dollyTo(s,!1),this.setFocalOffset(-K.x,K.y,-K.z,!1),this.moveTo(t,e,i,!1)}setBoundary(t){if(!t){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(t),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(t,e,i,n){if(t===null){this._viewport=null;return}this._viewport=this._viewport||new B.Vector4,typeof t=="number"?this._viewport.set(t,e,i,n):this._viewport.copy(t)}getDistanceToFitBox(t,e,i,n=!1){if(Ui(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const s=t/e,l=this._camera.getEffectiveFOV()*Te,f=this._camera.aspect;return((n?s>f:s<f)?e:t/f)*.5/Math.tan(l*.5)+i*.5}getDistanceToFitSphere(t){if(Ui(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const e=this._camera.getEffectiveFOV()*Te,i=Math.atan(Math.tan(e*.5)*this._camera.aspect)*2,n=1<this._camera.aspect?e:i;return t/Math.sin(n*.5)}getTarget(t,e=!0){return(t&&t.isVector3?t:new B.Vector3).copy(e?this._targetEnd:this._target)}getPosition(t,e=!0){return(t&&t.isVector3?t:new B.Vector3).setFromSpherical(e?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(e?this._targetEnd:this._target)}getSpherical(t,e=!0){return(t&&t instanceof B.Spherical?t:new B.Spherical).copy(e?this._sphericalEnd:this._spherical)}getFocalOffset(t,e=!0){return(t&&t.isVector3?t:new B.Vector3).copy(e?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%oe,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=oe),this._spherical.theta+=oe*Math.round((this._sphericalEnd.theta-this._spherical.theta)/oe)}reset(t=!1){if(!rt(this._camera.up.x,this._cameraUp0.x)||!rt(this._camera.up.y,this._cameraUp0.y)||!rt(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const i=this.getPosition(K);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}const e=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,t),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,t),this.zoomTo(this._zoom0,t)];return Promise.all(e)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,Je),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const t=K.subVectors(this._target,this._camera.position).normalize(),e=it.crossVectors(t,this._camera.up);this._camera.up.crossVectors(e,t).normalize(),this._camera.updateMatrixWorld();const i=this.getPosition(K);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}update(t){const e=this._sphericalEnd.theta-this._spherical.theta,i=this._sphericalEnd.phi-this._spherical.phi,n=this._sphericalEnd.radius-this._spherical.radius,s=Dr.subVectors(this._targetEnd,this._target),l=Ar.subVectors(this._focalOffsetEnd,this._focalOffset),f=this._zoomEnd-this._zoom;if(at(e))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const d=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=Ke(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,d,1/0,t),this._needsUpdate=!0}if(at(i))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const d=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=Ke(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,d,1/0,t),this._needsUpdate=!0}if(at(n))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const d=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=Ke(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,d,this.maxSpeed,t),this._needsUpdate=!0}if(at(s.x)&&at(s.y)&&at(s.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const d=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;Cr(this._target,this._targetEnd,this._targetVelocity,d,this.maxSpeed,t,this._target),this._needsUpdate=!0}if(at(l.x)&&at(l.y)&&at(l.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const d=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;Cr(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,d,this.maxSpeed,t,this._focalOffset),this._needsUpdate=!0}if(at(f))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const d=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=Ke(this._zoom,this._zoomEnd,this._zoomVelocity,d,1/0,t)}if(this.dollyToCursor){if(Jt(this._camera)&&this._changedDolly!==0){const d=this._spherical.radius-this._lastDistance,m=this._camera,w=this._getCameraDirection(be),I=K.copy(w).cross(m.up).normalize();I.lengthSq()===0&&(I.x=1);const z=it.crossVectors(I,w),Z=this._sphericalEnd.radius*Math.tan(m.getEffectiveFOV()*Te*.5),j=(this._sphericalEnd.radius-d-this._sphericalEnd.radius)/this._sphericalEnd.radius,$=ae.copy(this._targetEnd).add(I.multiplyScalar(this._dollyControlCoord.x*Z*m.aspect)).add(z.multiplyScalar(this._dollyControlCoord.y*Z)),c=K.copy(this._targetEnd).lerp($,j),P=this._lastDollyDirection===se.IN&&this._spherical.radius<=this.minDistance,M=this._lastDollyDirection===se.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(P||M)){this._sphericalEnd.radius-=d,this._spherical.radius-=d;const U=it.copy(w).multiplyScalar(-d);c.add(U)}this._boundary.clampPoint(c,c);const A=it.subVectors(c,this._targetEnd);this._targetEnd.copy(c),this._target.add(A),this._changedDolly-=d,at(this._changedDolly)&&(this._changedDolly=0)}else if(Wt(this._camera)&&this._changedZoom!==0){const d=this._zoom-this._lastZoom,m=this._camera,w=K.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(m.near+m.far)/(m.near-m.far)).unproject(m),I=it.set(0,0,-1).applyQuaternion(m.quaternion),z=ae.copy(w).add(I.multiplyScalar(-w.dot(m.up))),q=-(this._zoom-d-this._zoom)/this._zoom,j=this._getCameraDirection(be),$=this._targetEnd.dot(j),c=K.copy(this._targetEnd).lerp(z,q),P=c.dot(j),M=j.multiplyScalar(P-$);c.sub(M),this._boundary.clampPoint(c,c);const A=it.subVectors(c,this._targetEnd);this._targetEnd.copy(c),this._target.add(A),this._changedZoom-=d,at(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);const o=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,o),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!at(this._focalOffset.x)||!at(this._focalOffset.y)||!at(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),kt.setFromMatrixColumn(this._camera.matrix,0),It.setFromMatrixColumn(this._camera.matrix,1),qt.setFromMatrixColumn(this._camera.matrix,2),kt.multiplyScalar(this._focalOffset.x),It.multiplyScalar(-this._focalOffset.y),qt.multiplyScalar(this._focalOffset.z),K.copy(kt).add(It).add(qt),this._camera.position.add(K)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),K.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const v=this._needsUpdate;return v&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):v?(this.dispatchEvent({type:"update"}),at(e,this.restThreshold)&&at(i,this.restThreshold)&&at(n,this.restThreshold)&&at(s.x,this.restThreshold)&&at(s.y,this.restThreshold)&&at(s.z,this.restThreshold)&&at(l.x,this.restThreshold)&&at(l.y,this.restThreshold)&&at(l.z,this.restThreshold)&&at(f,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!v&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=v,this._needsUpdate=!1,v}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:Oe(this.maxDistance),minZoom:this.minZoom,maxZoom:Oe(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:Oe(this.maxPolarAngle),minAzimuthAngle:Oe(this.minAzimuthAngle),maxAzimuthAngle:Oe(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:K.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(t,e=!1){const i=JSON.parse(t);this.enabled=i.enabled,this.minDistance=i.minDistance,this.maxDistance=we(i.maxDistance),this.minZoom=i.minZoom,this.maxZoom=we(i.maxZoom),this.minPolarAngle=i.minPolarAngle,this.maxPolarAngle=we(i.maxPolarAngle),this.minAzimuthAngle=we(i.minAzimuthAngle),this.maxAzimuthAngle=we(i.maxAzimuthAngle),this.smoothTime=i.smoothTime,this.draggingSmoothTime=i.draggingSmoothTime,this.dollySpeed=i.dollySpeed,this.truckSpeed=i.truckSpeed,this.dollyToCursor=i.dollyToCursor,this.verticalDragToForward=i.verticalDragToForward,this._target0.fromArray(i.target0),this._position0.fromArray(i.position0),this._zoom0=i.zoom0,this._focalOffset0.fromArray(i.focalOffset0),this.moveTo(i.target[0],i.target[1],i.target[2],e),xt.setFromVector3(K.fromArray(i.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(xt.theta,xt.phi,e),this.dollyTo(xt.radius,e),this.zoomTo(i.zoom,e),this.setFocalOffset(i.focalOffset[0],i.focalOffset[1],i.focalOffset[2],e),this._needsUpdate=!0}connect(t){if(this._domElement){console.warn("camera-controls is already connected.");return}t.setAttribute("data-camera-controls-version",Bn),this._addAllEventListeners(t),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(t){return t.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(t){return this._getTargetDirection(t).negate()}_findPointerById(t){return this._activePointers.find(e=>e.pointerId===t)}_findPointerByMouseButton(t){return this._activePointers.find(e=>e.mouseButton===t)}_disposePointer(t){this._activePointers.splice(this._activePointers.indexOf(t),1)}_encloseToBoundary(t,e,i){const n=e.lengthSq();if(n===0)return t;const s=it.copy(e).add(t),f=this._boundary.clampPoint(s,ae).sub(s),o=f.lengthSq();if(o===0)return t.add(e);if(o===n)return t;if(i===0)return t.add(e).add(f);{const a=1+i*o/e.dot(f);return t.add(it.copy(e).multiplyScalar(a)).add(f.multiplyScalar(1-i))}}_updateNearPlaneCorners(){if(Jt(this._camera)){const t=this._camera,e=t.near,i=t.getEffectiveFOV()*Te,n=Math.tan(i*.5)*e,s=n*t.aspect;this._nearPlaneCorners[0].set(-s,-n,0),this._nearPlaneCorners[1].set(s,-n,0),this._nearPlaneCorners[2].set(s,n,0),this._nearPlaneCorners[3].set(-s,n,0)}else if(Wt(this._camera)){const t=this._camera,e=1/t.zoom,i=t.left*e,n=t.right*e,s=t.top*e,l=t.bottom*e;this._nearPlaneCorners[0].set(i,s,0),this._nearPlaneCorners[1].set(n,s,0),this._nearPlaneCorners[2].set(n,l,0),this._nearPlaneCorners[3].set(i,l,0)}}_collisionTest(){let t=1/0;if(!(this.colliderMeshes.length>=1)||Ui(this._camera,"_collisionTest"))return t;const i=this._getTargetDirection(be);Mi.lookAt(Lr,i,this._camera.up);for(let n=0;n<4;n++){const s=it.copy(this._nearPlaneCorners[n]);s.applyMatrix4(Mi);const l=ae.addVectors(this._target,s);qe.set(l,i),qe.far=this._spherical.radius+1;const f=qe.intersectObjects(this.colliderMeshes);f.length!==0&&f[0].distance<t&&(t=f[0].distance)}return t}_getClientRect(t){if(!this._domElement)return;const e=this._domElement.getBoundingClientRect();return t.x=e.left,t.y=e.top,this._viewport?(t.x+=this._viewport.x,t.y+=e.height-this._viewport.w-this._viewport.y,t.width=this._viewport.z,t.height=this._viewport.w):(t.width=e.width,t.height=e.height),t}_createOnRestPromise(t){return t?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(e=>{const i=()=>{this.removeEventListener("rest",i),e()};this.addEventListener("rest",i)}))}_addAllEventListeners(t){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(t){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(t){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(t,e=new B.Sphere){const i=e,n=i.center;le.makeEmpty(),t.traverseVisible(l=>{l.isMesh&&le.expandByObject(l)}),le.getCenter(n);let s=0;return t.traverseVisible(l=>{if(!l.isMesh)return;const f=l,o=f.geometry.clone();o.applyMatrix4(f.matrixWorld);const v=o.attributes.position;for(let d=0,m=v.count;d<m;d++)K.fromBufferAttribute(v,d),s=Math.max(s,n.distanceToSquared(K))}),i.radius=Math.sqrt(s),i}}export{Ii as C,pn as F,jn as S,Xn as a,zn as b,Vn as c,Zn as d,Kn as e,pr as s,Wn as t,Gn as u};
